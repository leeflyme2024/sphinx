# ip
```bash
bash-5.1# ip --help
Usage: ip [ OPTIONS ] OBJECT { COMMAND | help }
       ip [ -force ] -batch filename
where  OBJECT := { address | addrlabel | amt | fou | help | ila | ioam | l2tp |
                   link | macsec | maddress | monitor | mptcp | mroute | mrule |
                   neighbor | neighbour | netconf | netns | nexthop | ntable |
                   ntbl | route | rule | sr | tap | tcpmetrics |
                   token | tunnel | tuntap | vrf | xfrm }
       OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] | -r[esolve] |
                    -h[uman-readable] | -iec | -j[son] | -p[retty] |
                    -f[amily] { inet | inet6 | mpls | bridge | link } |
                    -4 | -6 | -M | -B | -0 |
                    -l[oops] { maximum-addr-flush-attempts } | -br[ief] |
                    -o[neline] | -t[imestamp] | -ts[hort] | -b[atch] [filename] |
                    -rc[vbuf] [size] | -n[etns] name | -N[umeric] | -a[ll] |
                    -c[olor]}
```

## 参数解析

### 显示版本信息

```bash
ip -V
```
- `-V` 或 `--version`: 显示 `ip` 命令的版本信息。

### 显示帮助信息

```bash
ip help
```
- `help`: 显示命令的帮助信息。

### 操作地址

```bash
ip address show
ip address add 192.168.1.100/24 dev eth0
ip address del 192.168.1.100/24 dev eth0
```
- `address show`: 显示所有 IP 地址。
- `address add`: 添加 IP 地址到指定接口。
- `address del`: 从指定接口删除 IP 地址。

### 操作地址标签

```bash
ip addrlabel show
ip addrlabel add 1000 2001:db8::/32
ip addrlabel del 1000 2001:db8::/32
```
- `addrlabel show`: 显示地址标签。
- `addrlabel add`: 添加地址标签。
- `addrlabel del`: 删除地址标签。

### 操作 AMT (Address Mapping Table)

```bash
ip amt show
ip amt add ...
ip amt del ...
```
- `amt show`: 显示 AMT 相关信息。
- `amt add`: 添加 AMT 配置。
- `amt del`: 删除 AMT 配置。

### 操作 FOU (Generic Forwarding)

```bash
ip fou show
ip fou add ...
ip fou del ...
```
- `fou show`: 显示 FOU 相关信息。
- `fou add`: 添加 FOU 配置。
- `fou del`: 删除 FOU 配置。

### 操作 ILA (Identifier Locator Addressing)

```bash
ip ila show
ip ila add ...
ip ila del ...
```
- `ila show`: 显示 ILA 相关信息。
- `ila add`: 添加 ILA 配置。
- `ila del`: 删除 ILA 配置。

### 操作 IOAM (In-Situ Operations, Administration, and Maintenance)

```bash
ip ioam show
ip ioam add ...
ip ioam del ...
```
- `ioam show`: 显示 IOAM 相关信息。
- `ioam add`: 添加 IOAM 配置。
- `ioam del`: 删除 IOAM 配置。

### 操作 L2TP (Layer 2 Tunneling Protocol)

```bash
ip l2tp show
ip l2tp add ...
ip l2tp del ...
```
- `l2tp show`: 显示 L2TP 相关信息。
- `l2tp add`: 添加 L2TP 配置。
- `l2tp del`: 删除 L2TP 配置。

### 操作网络接口

```bash
ip link show
ip link set eth0 up
ip link set eth0 down
```
- `link show`: 显示网络接口状态。
- `link set ... up`: 启用网络接口。
- `link set ... down`: 禁用网络接口。

### 操作 MACsec (Media Access Control Security)

```bash
ip macsec show
ip macsec add ...
ip macsec del ...
```
- `macsec show`: 显示 MACsec 相关信息。
- `macsec add`: 添加 MACsec 配置。
- `macsec del`: 删除 MACsec 配置。

### 操作多播地址

```bash
ip maddress show
ip maddress add 239.0.0.1 dev eth0
ip maddress del 239.0.0.1 dev eth0
```
- `maddress show`: 显示多播地址。
- `maddress add`: 添加多播地址到指定接口。
- `maddress del`: 从指定接口删除多播地址。

### 监视网络状态

```bash
ip monitor
```
- `monitor`: 监视网络状态变化。

### 操作 MPTCP (Multipath TCP)

```bash
ip mptcp show
ip mptcp add ...
ip mptcp del ...
```
- `mptcp show`: 显示 MPTCP 相关信息。
- `mptcp add`: 添加 MPTCP 配置。
- `mptcp del`: 删除 MPTCP 配置。

### 操作多播路由

```bash
ip mroute show
ip mroute add ...
ip mroute del ...
```
- `mroute show`: 显示多播路由。
- `mroute add`: 添加多播路由。
- `mroute del`: 删除多播路由。

### 操作多播路由规则

```bash
ip mrule show
ip mrule add ...
ip mrule del ...
```
- `mrule show`: 显示多播路由规则。
- `mrule add`: 添加多播路由规则。
- `mrule del`: 删除多播路由规则。

### 操作邻居表

```bash
ip neighbor show
ip neighbor add 192.168.1.1 dev eth0
ip neighbor del 192.168.1.1 dev eth0
```
- `neighbor show`: 显示邻居表信息。
- `neighbor add`: 添加邻居。
- `neighbor del`: 删除邻居。

### 操作网络配置

```bash
ip netconf show
ip netconf add ...
ip netconf del ...
```
- `netconf show`: 显示网络配置。
- `netconf add`: 添加网络配置。
- `netconf del`: 删除网络配置。

### 操作网络命名空间

```bash
ip netns list
ip netns add ns1
ip netns delete ns1
```
- `netns list`: 列出网络命名空间。
- `netns add`: 添加网络命名空间。
- `netns delete`: 删除网络命名空间。

### 操作下一跳

```bash
ip nexthop show
ip nexthop add ...
ip nexthop del ...
```
- `nexthop show`: 显示下一跳信息。
- `nexthop add`: 添加下一跳配置。
- `nexthop del`: 删除下一跳配置。

### 操作网络表

```bash
ip ntable show
ip ntable add ...
ip ntable del ...
```
- `ntable show`: 显示网络表。
- `ntable add`: 添加网络表。
- `ntable del`: 删除网络表。

### 操作路由

```bash
ip route show
ip route add 192.168.1.0/24 via 192.168.1.1
ip route del 192.168.1.0/24
```
- `route show`: 显示路由表。
- `route add`: 添加路由。
- `route del`: 删除路由。

### 操作路由规则

```bash
ip rule show
ip rule add from 192.168.1.0/24 table 1
ip rule del from 192.168.1.0/24 table 1
```
- `rule show`: 显示路由规则。
- `rule add`: 添加路由规则。
- `rule del`: 删除路由规则。

### 操作 SR (Segment Routing)

```bash
ip sr show
ip sr add ...
ip sr del ...
```
- `sr show`: 显示 SR 相关信息。
- `sr add`: 添加 SR 配置。
- `sr del`: 删除 SR 配置。

### 操作 TAP (虚拟网络接口)

```bash
ip tap show
ip tap add ...
ip tap del ...
```
- `tap show`: 显示 TAP 设备信息。
- `tap add`: 添加 TAP 设备。
- `tap del`: 删除 TAP 设备。

### 操作 TCP 指标

```bash
ip tcpmetrics show
ip tcpmetrics add ...
ip tcpmetrics del ...
```
- `tcpmetrics show`: 显示 TCP 指标。
- `tcpmetrics add`: 添加 TCP 指标配置。
- `tcpmetrics del`: 删除 TCP 指标配置。

### 操作网络令牌

```bash
ip token show
ip token add ...
ip token del ...
```
- `token show`: 显示网络令牌信息。
- `token add`: 添加网络令牌。
- `token del`: 删除网络令牌。

### 操作隧道

```bash
ip tunnel show
ip tunnel add ...
ip tunnel del ...
```
- `tunnel show`: 显示隧道信息。
- `tunnel add`: 添加隧道配置。
- `tunnel del`: 删除隧道配置。

### 操作 TUN/TAP 设备

```bash
ip tuntap show
ip tuntap add ...
ip tuntap del ...
```
- `tuntap show`: 显示 TUN/TAP 设备信息。
- `tuntap add`: 添加 TUN/TAP 设备。
- `tuntap del`: 删除 TUN/TAP 设备。

### 操作 VRF (Virtual Routing and Forwarding)

```bash
ip vrf show
ip vrf add ...
ip vrf del ...
```
- `vrf show`: 显示 VRF 信息。
- `vrf add`: 添加 VRF 配置。
- `vrf del`: 删除 VRF 配置。

### 操作 XFRM (Transform)

```bash
ip

 xfrm show
ip xfrm add ...
ip xfrm del ...
```
- `xfrm show`: 显示 XFRM 信息。
- `xfrm add`: 添加 XFRM 配置。
- `xfrm del`: 删除 XFRM 配置。

### 添加和删除 IP 地址

```bash
ip address add 10.0.0.1/24 dev eth0
ip address del 10.0.0.1/24 dev eth0
```
- **添加**: 将 `10.0.0.1/24` 地址添加到 `eth0` 接口。
- **删除**: 从 `eth0` 接口删除 `10.0.0.1/24` 地址。

### 启用和禁用网络接口

```bash
ip link set eth0 up
ip link set eth0 down
```
- **启用**: 启用 `eth0` 网络接口。
- **禁用**: 禁用 `eth0` 网络接口。

### 添加和删除路由

```bash
ip route add 192.168.1.0/24 via 192.168.1.1
ip route del 192.168.1.0/24
```
- **添加**: 将 `192.168.1.0/24` 路由通过 `192.168.1.1` 添加到路由表。
- **删除**: 从路由表中删除 `192.168.1.0/24` 路由。

### 显示和修改邻居表

```bash
ip neighbor show
ip neighbor add 192.168.1.1 dev eth0
ip neighbor del 192.168.1.1 dev eth0
```
- **显示**: 显示邻居表信息。
- **添加**: 将 `192.168.1.1` 添加到 `eth0` 接口的邻居表。
- **删除**: 从 `eth0` 接口的邻居表中删除 `192.168.1.1`。


### 显示和设置网络接口的 MAC 地址

```bash
ip link show dev eth0
ip link set dev eth0 address 00:11:22:33:44:55
```
- `link show dev ...`: 显示指定设备的详细信息，包括 MAC 地址。
- `link set dev ... address ...`: 设置指定设备的新 MAC 地址。

### 显示和修改网络命名空间

```bash
ip netns list
ip netns add ns1
ip netns delete ns1
```
- `netns list`: 列出所有网络命名空间。
- `netns add ...`: 添加新的网络命名空间。
- `netns delete ...`: 删除指定的网络命名空间。

### 显示和设置网络设备的 MTU

```bash
ip link show dev eth0
ip link set dev eth0 mtu 1500
```
- `link show dev ...`: 显示设备的当前 MTU 值。
- `link set dev ... mtu ...`: 设置设备的新 MTU 值。

### 查看和配置网络路由规则

```bash
ip rule show
ip rule add from 192.168.1.0/24 table 100
ip rule del from 192.168.1.0/24 table 100
```
- `rule show`: 显示当前的路由规则。
- `rule add ...`: 添加新的路由规则。
- `rule del ...`: 删除现有的路由规则。

### 查看和修改路由表

```bash
ip route show
ip route add default via 192.168.1.1
ip route del default via 192.168.1.1
```
- `route show`: 显示当前的路由表。
- `route add ...`: 添加新的路由。
- `route del ...`: 删除现有的路由。

### 显示和修改多播路由

```bash
ip mroute show
ip mroute add 239.0.0.0/8 dev eth0
ip mroute del 239.0.0.0/8 dev eth0
```
- `mroute show`: 显示多播路由表。
- `mroute add ...`: 添加新的多播路由。
- `mroute del ...`: 删除现有的多播路由。

### 显示和配置 TAP 设备

```bash
ip tuntap show
ip tuntap add dev tap0 mode tap
ip tuntap del dev tap0
```
- `tuntap show`: 显示 TUN/TAP 设备的状态。
- `tuntap add ... mode ...`: 添加新的 TUN/TAP 设备。
- `tuntap del ...`: 删除现有的 TUN/TAP 设备。

### 显示和设置 TCP 指标

```bash
ip tcpmetrics show
ip tcpmetrics add ...
ip tcpmetrics del ...
```
- `tcpmetrics show`: 显示 TCP 指标信息。
- `tcpmetrics add ...`: 添加新的 TCP 指标配置。
- `tcpmetrics del ...`: 删除现有的 TCP 指标配置。

### 配置和显示 SR (Segment Routing) 信息

```bash
ip sr show
ip sr add ...
ip sr del ...
```
- `sr show`: 显示 SR 相关信息。
- `sr add ...`: 添加 SR 配置。
- `sr del ...`: 删除 SR 配置。

### 显示和配置 XFRM (Transform) 信息

```bash
ip xfrm show
ip xfrm add ...
ip xfrm del ...
```
- `xfrm show`: 显示 XFRM 相关信息。
- `xfrm add ...`: 添加 XFRM 配置。
- `xfrm del ...`: 删除 XFRM 配置。

## 综合应用

### 修改网络接口的 MAC 地址

```bash
ip link set dev eth0 address 00:11:22:33:44:55
```
- **修改**: 将网络接口 `eth0` 的 MAC 地址更改为 `00:11:22:33:44:55`。

### 设置网络接口的 MTU

```bash
ip link set dev eth0 mtu 1500
```
- **设置**: 将 `eth0` 接口的 MTU 设置为 `1500`。

### 查看和配置网络命名空间

```bash
ip netns list
ip netns add ns1
ip netns delete ns1
```
- **查看**: 列出所有网络命名空间。
- **添加**: 创建一个新的网络命名空间 `ns1`。
- **删除**: 删除网络命名空间 `ns1`。

### 配置默认路由

```bash
ip route add default via 192.168.1.1
```
- **配置**: 将默认路由设置为 `192.168.1.1`。

### 显示和删除多播路由

```bash
ip mroute show
ip mroute del 239.0.0.0/8 dev eth0
```
- **显示**: 显示当前的多播路由。
- **删除**: 从 `eth0` 接口删除 `239.0.0.0/8` 的多播路由。

### 配置 TAP 设备

```bash
ip tuntap add dev tap0 mode tap
```
- **配置**: 创建一个新的 TAP 设备 `tap0`。

### 查看和配置 TCP 指标

```bash
ip tcpmetrics show
ip tcpmetrics add ...
```
- **查看**: 显示当前的 TCP 指标。
- **配置**: 添加新的 TCP 指标配置。


# iptables                       


# iptables-save  


# iptables-apply 


# iptables-restore


# iptables-restore-translate


# iptables-translate


# iptables-legacy  


# iptables-legacy-save           

   
# iptables-legacy-restore    


# iptables-nft                 


# iptables-nft-save  


# iptables-nft-restore  

# iptables-xml

# ip6tables                    


# ip6tables-apply   


# ip6tables-save    


# ip6tables-restore            


# ip6tables-restore-translate 


# ip6tables-translate            

  
# ip6tables-legacy     


# ip6tables-legacy-save          


# ip6tables-legacy-restore     


# ip6tables-nft     


# ip6tables-nft-save            


# ip6tables-nft-restore        

# iptunnel
```bash
bash-5.1# iptunnel --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: iptunnel add|change|del|show [NAME]
        [mode ipip|gre|sit] [remote ADDR] [local ADDR] [ttl TTL]

iptunnel add|change|del|show [NAME]
        [mode ipip|gre|sit] [remote ADDR] [local ADDR]
        [[i|o]seq] [[i|o]key KEY] [[i|o]csum]
        [ttl TTL] [tos TOS] [[no]pmtudisc] [dev PHYS_DEV]
```

## 参数解析

### 添加一个新的隧道

```bash
iptunnel add mytunnel mode ipip remote 192.168.1.1 local 192.168.1.2 ttl 64
```

- `add`：添加新的隧道。
- `mytunnel`：隧道名称。
- `mode ipip`：隧道模式（例如，`ipip`、`gre`、`sit`）。
- `remote 192.168.1.1`：远程地址。
- `local 192.168.1.2`：本地地址。
- `ttl 64`：生存时间（TTL）。

### 更改现有的隧道配置

```bash
iptunnel change mytunnel mode gre remote 10.0.0.1 local 10.0.0.2 ttl 128
```

- `change`：更改现有的隧道配置。
- `mytunnel`：隧道名称。
- `mode gre`：新隧道模式。
- `remote 10.0.0.1`：新远程地址。
- `local 10.0.0.2`：新本地地址。
- `ttl 128`：新的生存时间（TTL）。

### 删除现有的隧道

```bash
iptunnel del mytunnel
```

- `del`：删除指定的隧道。
- `mytunnel`：隧道名称。

### 显示隧道配置

```bash
iptunnel show mytunnel
```

- `show`：显示现有隧道的配置。
- `mytunnel`：隧道名称。

### 配置隧道的更多选项

```bash
iptunnel add mytunnel mode gre remote 192.168.2.1 local 192.168.2.2 iseq 1 oseq 1 ikey 100 okey 200 csum ttl 64 tos 16 pmtudisc dev eth0
```

- `mode gre`：隧道模式（例如，`ipip`、`gre`、`sit`）。
- `remote 192.168.2.1`：远程地址。
- `local 192.168.2.2`：本地地址。
- `iseq 1`：输入序列号。
- `oseq 1`：输出序列号。
- `ikey 100`：输入密钥。
- `okey 200`：输出密钥。
- `csum`：启用校验和。
- `ttl 64`：生存时间（TTL）。
- `tos 16`：服务类型（TOS）。
- `pmtudisc`：启用路径最大传输单元发现。
- `dev eth0`：物理设备。

## 综合应用

### 添加并配置 GRE 隧道

```bash
iptunnel add gre1 mode gre remote 192.168.1.1 local 192.168.1.2 ttl 64
```

- `add`：添加新的隧道。
- `gre1`：隧道名称。
- `mode gre`：GRE 隧道模式。
- `remote 192.168.1.1`：远程地址。
- `local 192.168.1.2`：本地地址。
- `ttl 64`：生存时间（TTL）。

### 更改 IPIP 隧道的配置

```bash
iptunnel change ipip1 mode ipip remote 172.16.0.1 local 172.16.0.2 ttl 128
```

- `change`：更改现有隧道。
- `ipip1`：隧道名称。
- `mode ipip`：IPIP 隧道模式。
- `remote 172.16.0.1`：新远程地址。
- `local 172.16.0.2`：新本地地址。
- `ttl 128`：新的生存时间（TTL）。

### 删除不再使用的隧道

```bash
iptunnel del oldtunnel
```

- `del`：删除指定的隧道。
- `oldtunnel`：隧道名称。

### 显示当前 GRE 隧道的配置

```bash
iptunnel show gre1
```

- `show`：显示现有隧道的配置。
- `gre1`：隧道名称。


# iprule
```bash
bash-5.1# iprule --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: iprule [list] | add|del SELECTOR ACTION

        SELECTOR := [from PREFIX] [to PREFIX] [tos TOS] [fwmark FWMARK[/MASK]]
                        [dev IFACE] [pref NUMBER]
        ACTION := [table TABLE_ID] [nat ADDR]
                        [prohibit|reject|unreachable]
                        [realms [SRCREALM/]DSTREALM]
        TABLE_ID := [local|main|default|NUMBER]
```

## 参数解析

### 列出规则

```bash
iprule list
```

- 列出当前的所有路由规则。

### 添加规则

```bash
iprule add SELECTOR ACTION
```

- `SELECTOR`：规则的选择条件。
  - `from PREFIX`：指定源地址前缀。
  - `to PREFIX`：指定目标地址前缀。
  - `tos TOS`：指定服务类型。
  - `fwmark FWMARK[/MASK]`：指定防火墙标记和掩码。
  - `dev IFACE`：指定网络接口。
  - `pref NUMBER`：指定规则的优先级。
- `ACTION`：规则的动作。
  - `table TABLE_ID`：指定路由表的 ID。
    - `TABLE_ID` 可以是 `local`、`main`、`default` 或一个数字。
  - `nat ADDR`：指定 NAT 地址。
  - `prohibit`：禁止匹配的数据包。
  - `reject`：拒绝匹配的数据包。
  - `unreachable`：指定目标不可达。
  - `realms [SRCREALM/]DSTREALM`：指定源和目标的领域。

### 删除规则

```bash
iprule del SELECTOR
```

- `SELECTOR`：指定要删除的规则的选择条件。

## 综合应用

### 添加路由规则

```bash
iprule add from 192.168.1.0/24 to 10.0.0.0/8 table 100
```

- `from 192.168.1.0/24`：匹配源地址为 `192.168.1.0/24` 的流量。
- `to 10.0.0.0/8`：匹配目标地址为 `10.0.0.0/8` 的流量。
- `table 100`：将匹配的流量路由到表 ID 为 `100` 的路由表。

### 删除路由规则

```bash
iprule del from 192.168.1.0/24
```

- `from 192.168.1.0/24`：删除源地址为 `192.168.1.0/24` 的路由规则。


# iproute
```bash
bash-5.1# iproute --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: iproute list|flush|add|del|change|append|replace|test ROUTE

iproute list|flush SELECTOR
        SELECTOR := [root PREFIX] [match PREFIX] [proto RTPROTO]
        PREFIX := default|ADDR[/MASK]
iproute get ADDR [from ADDR iif IFACE]
        [oif IFACE] [tos TOS]
iproute add|del|change|append|replace|test ROUTE
        ROUTE := NODE_SPEC [INFO_SPEC]
        NODE_SPEC := PREFIX [table TABLE_ID] [proto RTPROTO] [scope SCOPE] [metric METRIC]
        INFO_SPEC := NH OPTIONS
        NH := [via [inet|inet6] ADDR] [dev IFACE] [src ADDR] [onlink]
        OPTIONS := [mtu [lock] NUM] [advmss [lock] NUM]
```

## 参数解析

### 列出路由表中的所有条目

```bash
iproute list
```

- `list`：列出当前的路由表条目。

### 刷新路由表

```bash
iproute flush
```

- `flush`：清除所有路由表条目。

### 添加一个新的路由条目

```bash
iproute add 192.168.1.0/24 via 192.168.1.1 dev eth0
```

- `add`：添加新的路由条目。
- `192.168.1.0/24`：目标网络地址和子网掩码。
- `via 192.168.1.1`：下一跳地址。
- `dev eth0`：指定的网络接口。

### 删除一个现有的路由条目

```bash
iproute del 192.168.1.0/24
```

- `del`：删除指定的路由条目。
- `192.168.1.0/24`：目标网络地址和子网掩码。

### 更改现有的路由条目

```bash
iproute change 192.168.1.0/24 via 192.168.1.254 dev eth0
```

- `change`：更改现有的路由条目。
- `192.168.1.0/24`：目标网络地址和子网掩码。
- `via 192.168.1.254`：新的下一跳地址。
- `dev eth0`：指定的网络接口。

### 追加一个新的路由条目

```bash
iproute append 192.168.2.0/24 via 192.168.2.1 dev eth1
```

- `append`：追加新的路由条目。
- `192.168.2.0/24`：目标网络地址和子网掩码。
- `via 192.168.2.1`：下一跳地址。
- `dev eth1`：指定的网络接口。

### 替换现有的路由条目

```bash
iproute replace 192.168.3.0/24 via 192.168.3.1 dev eth2
```

- `replace`：替换现有的路由条目。
- `192.168.3.0/24`：目标网络地址和子网掩码。
- `via 192.168.3.1`：新的下一跳地址。
- `dev eth2`：指定的网络接口。

### 测试路由到指定地址

```bash
iproute test 8.8.8.8
```

- `test`：测试到指定地址的路由。
- `8.8.8.8`：目标地址。

## 综合应用

### 添加静态路由到网络接口

```bash
iproute add 10.0.0.0/24 via 10.0.0.1 dev eth0
```

- `add`：添加静态路由。
- `10.0.0.0/24`：目标网络地址和子网掩码。
- `via 10.0.0.1`：下一跳地址。
- `dev eth0`：网络接口。

### 删除不再需要的路由

```bash
iproute del 10.0.1.0/24
```

- `del`：删除指定的路由。
- `10.0.1.0/24`：目标网络地址和子网掩码。

### 更改现有的路由条目以使用不同的下一跳

```bash
iproute change 192.168.0.0/16 via 192.168.0.254 dev eth1
```

- `change`：更新现有路由。
- `192.168.0.0/16`：目标网络地址和子网掩码。
- `via 192.168.0.254`：新的下一跳地址。
- `dev eth1`：网络接口。

### 追加新的路由规则以覆盖现有规则

```bash
iproute append 172.16.0.0/12 via 172.16.1.1 dev eth2
```

- `append`：追加路由规则。
- `172.16.0.0/12`：目标网络地址和子网掩码。
- `via 172.16.1.1`：新的下一跳地址。
- `dev eth2`：网络接口。

### 测试路由到外部网络

```bash
iproute test 1.1.1.1
```

- `test`：测试路由是否有效。
- `1.1.1.1`：目标外部地址。


# ipneigh
```bash
bash-5.1# ipneigh --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: ipneigh show|flush [to PREFIX] [dev DEV] [nud STATE]
```

## 参数解析

### 显示邻居缓存

```bash
ipneigh show [to PREFIX] [dev DEV] [nud STATE]
```

- `to PREFIX`：过滤显示的邻居条目，指定目标地址前缀。
- `dev DEV`：过滤显示的邻居条目，指定网络设备。
- `nud STATE`：过滤显示的邻居条目，指定邻居状态。

### 清空邻居缓存

```bash
ipneigh flush [to PREFIX] [dev DEV] [nud STATE]
```

- `to PREFIX`：指定要清除的邻居条目的目标地址前缀。
- `dev DEV`：指定要清除的邻居条目所在的网络设备。
- `nud STATE`：指定要清除的邻居条目的状态。

## 综合应用

### 显示所有邻居缓存

```bash
ipneigh show
```

- 显示所有邻居缓存条目。

### 清空特定网络设备的邻居缓存

```bash
ipneigh flush dev eth0
```

- `dev eth0`：清除网络设备 `eth0` 上的所有邻居条目。


# ipaddr
```bash
bash-5.1# ipaddr --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: ipaddr add|del IFADDR dev IFACE | show|flush [dev IFACE] [to PREFIX]

ipaddr add|change|replace|delete dev IFACE [CONFFLAG-LIST] IFADDR
        IFADDR := PREFIX | ADDR peer PREFIX [broadcast ADDR|+|-]
                [anycast ADDR] [label STRING] [scope SCOPE]
        PREFIX := ADDR[/MASK]
        SCOPE := [host|link|global|NUMBER]
        CONFFLAG-LIST := [CONFFLAG-LIST] CONFFLAG
        CONFFLAG := [noprefixroute]
ipaddr show|flush [dev IFACE] [scope SCOPE] [to PREFIX] [label PATTERN]
```

## 参数解析

### 添加一个新的 IP 地址

```bash
ipaddr add 192.168.1.100/24 dev eth0
```

- `add`：添加一个新的 IP 地址。
- `192.168.1.100/24`：IP 地址和子网掩码。
- `dev eth0`：指定网络接口 `eth0`。

### 删除一个 IP 地址

```bash
ipaddr del 192.168.1.100/24 dev eth0
```

- `del`：删除指定的 IP 地址。
- `192.168.1.100/24`：IP 地址和子网掩码。
- `dev eth0`：指定网络接口 `eth0`。

### 显示当前网络接口的 IP 地址

```bash
ipaddr show dev eth0
```

- `show`：显示当前 IP 地址。
- `dev eth0`：指定网络接口 `eth0`。

### 刷新网络接口的 IP 地址

```bash
ipaddr flush dev eth0
```

- `flush`：刷新网络接口的 IP 地址。
- `dev eth0`：指定网络接口 `eth0`。

### 更改现有的 IP 地址配置

```bash
ipaddr change 192.168.1.100/24 dev eth0 label eth0:1
```

- `change`：更改现有的 IP 地址配置。
- `192.168.1.100/24`：IP 地址和子网掩码。
- `dev eth0`：指定网络接口 `eth0`。
- `label eth0:1`：设置接口标签。

### 替换现有的 IP 地址配置

```bash
ipaddr replace 192.168.1.100/24 dev eth0
```

- `replace`：替换现有的 IP 地址配置。
- `192.168.1.100/24`：IP 地址和子网掩码。
- `dev eth0`：指定网络接口 `eth0`。

### 设置 IP 地址的范围

```bash
ipaddr show dev eth0 to 192.168.1.200/24
```

- `show`：显示 IP 地址。
- `dev eth0`：指定网络接口 `eth0`。
- `to 192.168.1.200/24`：显示到指定 IP 地址和子网掩码。

## 综合应用

### 添加新的 IP 地址到网络接口

```bash
ipaddr add 10.0.0.5/24 dev eth0 label eth0:2
```

- `add`：添加新的 IP 地址。
- `10.0.0.5/24`：IP 地址和子网掩码。
- `dev eth0`：指定网络接口 `eth0`。
- `label eth0:2`：设置接口标签。

### 删除现有的 IP 地址配置

```bash
ipaddr del 10.0.0.5/24 dev eth0
```

- `del`：删除 IP 地址。
- `10.0.0.5/24`：IP 地址和子网掩码。
- `dev eth0`：指定网络接口 `eth0`。

### 显示并过滤 IP 地址信息

```bash
ipaddr show dev eth0 scope global
```

- `show`：显示 IP 地址。
- `dev eth0`：指定网络接口 `eth0`。
- `scope global`：只显示全局范围的 IP 地址。

### 刷新所有 IP 地址配置

```bash
ipaddr flush dev eth0
```

- `flush`：刷新 IP 地址配置。
- `dev eth0`：指定网络接口 `eth0`。


# ipmaddr

# iplink
```bash
bash-5.1# iplink --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: iplink set IFACE [up|down] [arp on|off] [multicast on|off]
        [promisc on|off] [mtu NUM] [name NAME] [qlen NUM] [address MAC]
        [master IFACE | nomaster] [netns PID]
iplink add [link IFACE] IFACE [address MAC] type TYPE [ARGS]
iplink delete IFACE type TYPE [ARGS]
        TYPE ARGS := vlan VLANARGS | vrf table NUM
        VLANARGS := id VLANID [protocol 802.1q|802.1ad] [reorder_hdr on|off]
                [gvrp on|off] [mvrp on|off] [loose_binding on|off]
iplink show [IFACE]
```
## 参数解析

### 设置接口属性

```bash
iplink set IFACE [up|down] [arp on|off] [multicast on|off] [promisc on|off] [mtu NUM] [name NAME] [qlen NUM] [address MAC] [master IFACE | nomaster] [netns PID]
```

- `IFACE`：指定要设置的网络接口。
- `up`：启用接口。
- `down`：禁用接口。
- `arp on|off`：启用或禁用 ARP。
- `multicast on|off`：启用或禁用多播。
- `promisc on|off`：启用或禁用混杂模式。
- `mtu NUM`：设置接口的最大传输单元（MTU）为 `NUM`。
- `name NAME`：更改接口名称为 `NAME`。
- `qlen NUM`：设置接口的队列长度为 `NUM`。
- `address MAC`：设置接口的 MAC 地址为 `MAC`。
- `master IFACE`：将接口设置为指定接口的从属。
- `nomaster`：取消接口的从属状态。
- `netns PID`：将接口移动到指定的网络命名空间 `PID`。

### 添加接口

```bash
iplink add [link IFACE] IFACE [address MAC] type TYPE [ARGS]
```

- `link IFACE`：指定接口的上游接口。
- `IFACE`：指定要添加的接口。
- `address MAC`：设置接口的 MAC 地址为 `MAC`。
- `type TYPE`：指定接口的类型（如 `vlan` 或 `vrf`）。
- `ARGS`：附加的接口参数（如 VLAN 参数或 VRF 参数）。

### 删除接口

```bash
iplink delete IFACE type TYPE [ARGS]
```

- `IFACE`：指定要删除的接口。
- `type TYPE`：指定接口的类型。
- `ARGS`：附加的接口参数（如 VLAN 参数或 VRF 参数）。

### 显示接口信息

```bash
iplink show [IFACE]
```

- `IFACE`：指定要显示的接口。如果省略，将显示所有接口的信息。

## 综合应用

### 配置接口并设置 MTU

```bash
iplink set eth0 up mtu 1500
```

- `eth0`：指定接口。
- `up`：启用接口。
- `mtu 1500`：设置 MTU 为 `1500`。

### 添加 VLAN 接口

```bash
iplink add link eth0 name eth0.100 type vlan id 100
```

- `link eth0`：指定基础接口。
- `name eth0.100`：设置 VLAN 接口名称。
- `type vlan`：指定接口类型为 VLAN。
- `id 100`：设置 VLAN ID 为 `100`。

### 删除 VLAN 接口

```bash
iplink delete eth0.100 type vlan
```

- `eth0.100`：指定要删除的 VLAN 接口。
- `type vlan`：指定接口类型为 VLAN。


# ss
```bash
bash-5.1# ss --help
Usage: ss [ OPTIONS ]
       ss [ OPTIONS ] [ FILTER ]
   -h, --help          this message
   -V, --version       output version information
   -n, --numeric       don't resolve service names
   -r, --resolve       resolve host names
   -a, --all           display all sockets
   -l, --listening     display listening sockets
   -o, --options       show timer information
   -e, --extended      show detailed socket information
   -m, --memory        show socket memory usage
   -p, --processes     show process using socket
   -i, --info          show internal TCP information
       --tipcinfo      show internal tipc socket information
   -s, --summary       show socket usage summary
       --tos           show tos and priority information
       --cgroup        show cgroup information
   -b, --bpf           show bpf filter socket information
   -E, --events        continually display sockets as they are destroyed
   -Z, --context       display process SELinux security contexts
   -z, --contexts      display process and socket SELinux security contexts
   -N, --net           switch to the specified network namespace name

   -4, --ipv4          display only IP version 4 sockets
   -6, --ipv6          display only IP version 6 sockets
   -0, --packet        display PACKET sockets
   -t, --tcp           display only TCP sockets
   -M, --mptcp         display only MPTCP sockets
   -S, --sctp          display only SCTP sockets
   -u, --udp           display only UDP sockets
   -d, --dccp          display only DCCP sockets
   -w, --raw           display only RAW sockets
   -x, --unix          display only Unix domain sockets
       --tipc          display only TIPC sockets
       --vsock         display only vsock sockets
   -f, --family=FAMILY display sockets of type FAMILY
       FAMILY := {inet|inet6|link|unix|netlink|vsock|tipc|xdp|help}

   -K, --kill          forcibly close sockets, display what was closed
   -H, --no-header     Suppress header line
   -O, --oneline       socket's data printed on a single line
       --inet-sockopt  show various inet socket options

   -A, --query=QUERY, --socket=QUERY
       QUERY := {all|inet|tcp|mptcp|udp|raw|unix|unix_dgram|unix_stream|unix_seqpacket|packet|netlink|vsock_stream|vsock_dgram|tipc}[,QUERY]

   -D, --diag=FILE     Dump raw information about TCP sockets to FILE
   -F, --filter=FILE   read filter information from FILE
       FILTER := [ state STATE-FILTER ] [ EXPRESSION ]
       STATE-FILTER := {all|connected|synchronized|bucket|big|TCP-STATES}
         TCP-STATES := {established|syn-sent|syn-recv|fin-wait-{1,2}|time-wait|closed|close-wait|last-ack|listening|closing}
          connected := {established|syn-sent|syn-recv|fin-wait-{1,2}|time-wait|close-wait|last-ack|closing}
       synchronized := {established|syn-recv|fin-wait-{1,2}|time-wait|close-wait|last-ack|closing}
             bucket := {syn-recv|time-wait}
                big := {established|syn-sent|fin-wait-{1,2}|closed|close-wait|last-ack|listening|closing}
```


## 参数解析

### 显示帮助信息

```bash
ss -h
```

- `-h, --help`：显示帮助信息。

### 显示版本信息

```bash
ss -V
```

- `-V, --version`：输出版本信息。

### 不解析服务名称

```bash
ss -n
```

- `-n, --numeric`：不解析服务名称，直接显示端口号。

### 解析主机名

```bash
ss -r
```

- `-r, --resolve`：解析主机名。

### 显示所有套接字

```bash
ss -a
```

- `-a, --all`：显示所有套接字，包括监听和非监听状态。

### 显示监听套接字

```bash
ss -l
```

- `-l, --listening`：仅显示监听套接字。

### 显示定时器信息

```bash
ss -o
```

- `-o, --options`：显示定时器信息。

### 显示详细的套接字信息

```bash
ss -e
```

- `-e, --extended`：显示详细的套接字信息。

### 显示套接字的内存使用情况

```bash
ss -m
```

- `-m, --memory`：显示套接字的内存使用情况。

### 显示使用套接字的进程信息

```bash
ss -p
```

- `-p, --processes`：显示使用套接字的进程信息。

### 显示内部 TCP 信息

```bash
ss -i
```

- `-i, --info`：显示内部 TCP 信息。

### 显示内部 TIPC 套接字信息

```bash
ss --tipcinfo
```

- `--tipcinfo`：显示内部 TIPC 套接字信息。

### 显示套接字使用情况的摘要

```bash
ss -s
```

- `-s, --summary`：显示套接字使用情况的摘要。

### 显示 TOS 和优先级信息

```bash
ss --tos
```

- `--tos`：显示 TOS 和优先级信息。

### 显示 cgroup 信息

```bash
ss --cgroup
```

- `--cgroup`：显示 cgroup 信息。

### 显示 BPF 过滤器套接字信息

```bash
ss -b
```

- `-b, --bpf`：显示 BPF 过滤器套接字信息。

### 持续显示被销毁的套接字

```bash
ss -E
```

- `-E, --events`：持续显示套接字并在其被销毁时更新。

### 显示 SELinux 安全上下文

```bash
ss -Z
```

- `-Z, --context`：显示进程的 SELinux 安全上下文。

### 显示进程和套接字的 SELinux 安全上下文

```bash
ss -z
```

- `-z, --contexts`：显示进程和套接字的 SELinux 安全上下文。

### 切换到指定的网络命名空间

```bash
ss -N mynamespace
```

- `-N, --net`：切换到指定的网络命名空间 `mynamespace`。

### 仅显示 IPv4 套接字

```bash
ss -4
```

- `-4, --ipv4`：仅显示 IPv4 套接字。

### 仅显示 IPv6 套接字

```bash
ss -6
```

- `-6, --ipv6`：仅显示 IPv6 套接字。

### 仅显示 PACKET 套接字

```bash
ss -0
```

- `-0, --packet`：仅显示 PACKET 套接字。

### 仅显示 TCP 套接字

```bash
ss -t
```

- `-t, --tcp`：仅显示 TCP 套接字。

### 仅显示 MPTCP 套接字

```bash
ss -M
```

- `-M, --mptcp`：仅显示 MPTCP 套接字。

### 仅显示 SCTP 套接字

```bash
ss -S
```

- `-S, --sctp`：仅显示 SCTP 套接字。

### 仅显示 UDP 套接字

```bash
ss -u
```

- `-u, --udp`：仅显示 UDP 套接字。

### 仅显示 DCCP 套接字

```bash
ss -d
```

- `-d, --dccp`：仅显示 DCCP 套接字。

### 仅显示 RAW 套接字

```bash
ss -w
```

- `-w, --raw`：仅显示 RAW 套接字。

### 仅显示 Unix 域套接字

```bash
ss -x
```

- `-x, --unix`：仅显示 Unix 域套接字。

### 仅显示 TIPC 套接字

```bash
ss --tipc
```

- `--tipc`：仅显示 TIPC 套接字。

### 仅显示 vsock 套接字

```bash
ss --vsock
```

- `--vsock`：仅显示 vsock 套接字。

### 显示指定类型的套接字

```bash
ss -f inet
```

- `-f, --family=FAMILY`：显示指定类型的套接字（例如 `inet`、`unix`）。

### 强制关闭套接字并显示被关闭的套接字

```bash
ss -K
```

- `-K, --kill`：强制关闭套接字，并显示被关闭的套接字。

### 不显示头行

```bash
ss -H
```

- `-H, --no-header`：不显示头行。

### 将套接字数据打印在一行上

```bash
ss -O
```

- `-O, --oneline`：将套接字数据打印在一行上。

### 显示各种 IPv4 套接字选项

```bash
ss --inet-sockopt
```

- `--inet-sockopt`：显示各种 IPv4 套接字选项。

### 查询特定类型的套接字

```bash
ss -A inet
```

- `-A, --query=QUERY, --socket=QUERY`：查询特定类型的套接字（例如 `all`、`tcp`、`udp`）。

### 转储 TCP 套接字的原始信息到文件

```bash
ss -D myfile
```

- `-D, --diag=FILE`：将 TCP 套接字的原始信息转储到文件 `myfile`。

### 从文件读取过滤信息

```bash
ss -F myfilter
```

- `-F, --filter=FILE`：从文件 `myfilter` 读取过滤信息。

## 综合应用

### 显示所有 TCP 套接字的详细信息

```bash
ss -t -e
```

- `-t`：仅显示 TCP 套接字。
- `-e`：显示详细的套接字信息。

### 显示所有监听的 UDP 套接字并包含进程信息

```bash
ss -u -l -p
```

- `-u`：仅显示 UDP 套接字。
- `-l`：仅显示监听套接字。
- `-p`：显示使用套接字的进程信息。

### 切换到指定的网络命名空间并显示所有套接字

```bash
ss -N mynamespace -a
```

- `-N mynamespace`：切换到网络命名空间 `mynamespace`。
- `-a`：显示所有套接字。

### 显示所有的 Unix 域套接字及其内存使用情况

```bash
ss -x -m
```

- `-x`：仅显示 Unix 域套接字。
- `-m`：显示套接字的内存使用情况。

### 显示所有 IPv6 套接字的 SELinux 上下文

```bash
ss -6 -Z
```

- `-6`：仅显示 IPv6 套接字。
- `-Z`：显示 SELinux 上下文信息。

### 持续监视 TCP 套接字的创建和销毁

```bash
ss -t -E
```

- `-t`：仅显示 TCP 套接字。
- `-E`：持续显示套接字并在其被销毁时更新。

# tc
```bash
bash-5.1# tc -help
Usage:  tc [ OPTIONS ] OBJECT { COMMAND | help }
        tc [-force] -batch filename
where  OBJECT := { qdisc | class | filter | chain |
                    action | monitor | exec }
       OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] | -r[aw] |
                    -o[neline] | -j[son] | -p[retty] | -c[olor]
                    -b[atch] [filename] | -n[etns] name | -N[umeric] |
                     -nm | -nam[es] | { -cf | -conf } path
                     -br[ief] }
```

## 参数解析

### 显示指定对象的信息

```bash
tc qdisc show dev eth0
```
- `qdisc show dev ...`: 显示指定设备的队列规则。

### 添加或修改队列规则

```bash
tc qdisc add dev eth0 root handle 1: htb default 12
```
- `qdisc add dev ...`: 添加或修改设备的队列规则。

### 删除队列规则

```bash
tc qdisc del dev eth0 root
```
- `qdisc del dev ...`: 删除指定设备的队列规则。

### 显示指定类的信息

```bash
tc class show dev eth0
```
- `class show dev ...`: 显示指定设备的类别信息。

### 添加或修改流量类别

```bash
tc class add dev eth0 parent 1: classid 1:1 htb rate 1mbit
```
- `class add dev ...`: 添加或修改设备的流量类别。

### 删除流量类别

```bash
tc class del dev eth0 classid 1:1
```
- `class del dev ...`: 删除指定设备的流量类别。

### 显示过滤器规则

```bash
tc filter show dev eth0
```
- `filter show dev ...`: 显示指定设备的过滤器规则。

### 添加或修改过滤器规则

```bash
tc filter add dev eth0 protocol ip prio 1 u32 match ip src 192.168.1.1 flowid 1:1
```
- `filter add dev ...`: 添加或修改设备的过滤器规则。

### 删除过滤器规则

```bash
tc filter del dev eth0 protocol ip prio 1
```
- `filter del dev ...`: 删除指定设备的过滤器规则。

### 执行批处理文件

```bash
tc -batch filename
```
- `-batch ...`: 从文件中批量执行命令。

### 显示监控信息

```bash
tc monitor
```
- `monitor`: 显示实时监控信息。

## 综合应用

### 配置队列规则以实现流量整形

```bash
tc qdisc add dev eth0 root handle 1: htb default 12
tc class add dev eth0 parent 1: classid 1:1 htb rate 1mbit
```
- **配置**: 设置 `eth0` 接口的根队列规则为 HTB，并创建一个带宽为 `1mbit` 的类。

### 添加过滤器规则以匹配特定源 IP

```bash
tc filter add dev eth0 protocol ip prio 1 u32 match ip src 192.168.1.1 flowid 1:1
```
- **添加**: 创建一个过滤器规则以匹配源 IP 为 `192.168.1.1` 的流量，并将其流量分类到 `1:1` 类中。

### 执行批处理操作

```bash
tc -batch /path/to/batchfile
```
- **批处理**: 从指定的批处理文件 `/path/to/batchfile` 中执行所有 TC 命令。


# nstat
```bash
bash-5.1# nstat --help
Usage: nstat [OPTION] [ PATTERN [ PATTERN ] ]
   -h, --help          this message
   -a, --ignore        ignore history
   -d, --scan=SECS     sample every statistics every SECS
   -j, --json          format output in JSON
   -n, --nooutput      do history only
   -p, --pretty        pretty print
   -r, --reset         reset history
   -s, --noupdate      don't update history
   -t, --interval=SECS report average over the last SECS
   -V, --version       output version information
   -z, --zeros         show entries with zero activity
```

## 参数解析

### 显示 JSON 格式的网络统计信息

```bash
nstat -j
```

- `-j`：将输出格式化为 JSON 格式。

### 设置报告间隔时间为 10 秒

```bash
nstat -d 10
```

- `-d SECS`：每隔 `SECS` 秒采样一次统计信息（例如 `10` 秒）。

### 格式化输出，使其易于阅读

```bash
nstat -p
```

- `-p`：使输出格式化为易于阅读的格式。

### 重置历史统计数据

```bash
nstat -r
```

- `-r`：重置历史统计数据。

### 显示过去 60 秒的网络统计信息平均值

```bash
nstat -t 60
```

- `-t SECS`：报告过去 `SECS` 秒的统计信息的平均值（例如 `60` 秒）。

### 显示所有网络统计条目，包括零活动的条目

```bash
nstat -z
```

- `-z`：显示所有条目，包括活动为零的条目。

## 综合应用

### 每 5 秒更新一次统计数据，并以 JSON 格式输出

```bash
nstat -d 5 -j
```

- `-d 5`：每隔 5 秒更新一次统计数据。
- `-j`：输出格式为 JSON。

### 在不更新历史记录的情况下显示网络统计信息

```bash
nstat -n
```

- `-n`：仅显示当前的网络统计信息，不更新历史记录。

### 在美化输出的同时忽略历史数据

```bash
nstat -a -p
```

- `-a`：忽略历史记录。
- `-p`：输出结果格式化为易于阅读的格式。


# lnstat
```bash
bash-5.1# lnstat --help
/usr/sbin/lnstat Version 5.16.0
Copyright (C) 2004 by Harald Welte <laforge@gnumonks.org>
This program is free software licensed under GNU GPLv2
with ABSOLUTELY NO WARRANTY.

Parameters:
        -V --version            Print Version of Program
        -c --count <count>      Print <count> number of intervals
        -d --dump               Dump list of available files/keys
        -j --json               Display in JSON format
        -f --file <file>        Statistics file to use
        -h --help               This help message
        -i --interval <intv>    Set interval to 'intv' seconds
        -k --keys k,k,k,...     Display only keys specified
        -s --subject [0-2]      Control header printing:
                                0 = never
                                1 = once
                                2 = every 20 lines (default))
        -w --width n,n,n,...    Width for each field
```

## 参数解析

### 打印程序版本

```bash
lnstat -V
```

- `-V`：打印程序版本信息。

### 打印指定数量的间隔统计数据

```bash
lnstat -c 10
```

- `-c <count>`：打印 `<count>` 个间隔的统计数据（例如 `10`）。

### 显示可用文件/键的列表

```bash
lnstat -d
```

- `-d`：显示可用文件或键的列表。

### 以 JSON 格式显示输出

```bash
lnstat -j
```

- `-j`：以 JSON 格式显示输出。

### 使用指定的统计文件

```bash
lnstat -f statsfile
```

- `-f <file>`：指定使用的统计文件（例如 `statsfile`）。

### 设置统计间隔时间

```bash
lnstat -i 60
```

- `-i <intv>`：设置统计的时间间隔为 `<intv>` 秒（例如 `60` 秒）。

### 仅显示指定的键

```bash
lnstat -k key1,key2
```

- `-k k,k,k,...`：仅显示指定的键（例如 `key1,key2`）。

### 控制头部打印

```bash
lnstat -s 1
```

- `-s [0-2]`：控制头部打印的频率：
  - `0`：从不打印。
  - `1`：打印一次。
  - `2`：每 20 行打印一次（默认）。

### 设置字段宽度

```bash
lnstat -w 10,20,30
```

- `-w n,n,n,...`：设置每个字段的宽度（例如 `10,20,30`）。

## 综合应用

### 以 JSON 格式打印所有间隔统计数据

```bash
lnstat -j -c 5
```

- `-j`：以 JSON 格式显示。
- `-c 5`：打印 5 个间隔的统计数据。

### 使用指定文件和设置 30 秒间隔打印统计数据

```bash
lnstat -f /var/log/statsfile -i 30
```

- `-f /var/log/statsfile`：使用指定的统计文件 `/var/log/statsfile`。
- `-i 30`：设置间隔为 30 秒。

### 显示特定键的统计信息并设置字段宽度

```bash
lnstat -k key1,key2 -w 15,25
```

- `-k key1,key2`：仅显示 `key1` 和 `key2` 的统计信息。
- `-w 15,25`：设置字段宽度为 15 和 25。


# bridge
```bash
bash-5.1# bridge --help
Usage: bridge [ OPTIONS ] OBJECT { COMMAND | help }
       bridge [ -force ] -batch filename
where  OBJECT := { link | fdb | mdb | vlan | monitor }
       OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] |
                    -o[neline] | -t[imestamp] | -n[etns] name |
                    -c[ompressvlans] -color -p[retty] -j[son] }
```

## 参数解析

### 显示版本信息

```bash
bridge -V
```

- `-V`：显示版本信息。

### 显示桥接接口的详细信息

```bash
bridge -d link
```

- `-d`：显示详细信息。
- `link`：操作对象为链接接口。

### 以 JSON 格式输出桥接信息

```bash
bridge -j link
```

- `-j`：以 JSON 格式输出信息。
- `link`：操作对象为链接接口。

### 显示桥接接口的统计信息

```bash
bridge -s link
```

- `-s`：显示统计信息。
- `link`：操作对象为链接接口。

### 使用批处理文件执行命令

```bash
bridge -batch commands.txt
```

- `-batch filename`：从指定的文件 `filename` 中批量读取命令并执行（例如 `commands.txt`）。

### 在网络命名空间 `mynetns` 中执行命令

```bash
bridge -n mynetns link
```

- `-n name`：在指定的网络命名空间 `name` 中执行命令（例如 `mynetns`）。

### 在输出中压缩 VLAN 信息

```bash
bridge -c vlan
```

- `-c`：压缩 VLAN 信息。
- `vlan`：操作对象为 VLAN。

### 显示单行输出

```bash
bridge -o link
```

- `-o`：输出为单行格式。
- `link`：操作对象为链接接口。

### 显示带有时间戳的信息

```bash
bridge -t link
```

- `-t`：在输出中显示时间戳。
- `link`：操作对象为链接接口。

## 综合应用

### 显示桥接接口的统计信息并以 JSON 格式输出

```bash
bridge -s -j link
```

- `-s`：显示统计信息。
- `-j`：以 JSON 格式输出。
- `link`：操作对象为链接接口。

### 使用批处理文件执行所有桥接命令

```bash
bridge -batch all_commands.txt
```

- `-batch`：从文件 `all_commands.txt` 中批量读取命令并执行。

### 在指定网络命名空间中以详细模式显示 VLAN 信息

```bash
bridge -n mynetns -d vlan
```

- `-n mynetns`：在网络命名空间 `mynetns` 中执行命令。
- `-d`：显示详细信息。
- `vlan`：操作对象为 VLAN。

# ifup
```bash
bash-5.1# ifup --help
Usage: /usr/sbin/ifup <options> <ifaces...>

Options:
        -h, --help             this help
        -V, --version          copyright and version information
        -a, --all              process all interfaces marked "auto"
        --allow CLASS          ignore non-"allow-CLASS" interfaces
        -i, --interfaces FILE  use FILE for interface definitions
        --state-dir DIR        use DIR to store state information
        -X, --exclude PATTERN  exclude interfaces from the list of
                               interfaces to operate on by a PATTERN
        -n, --no-act           print out what would happen, but don't do it
                               (note that this option doesn't disable mappings)
        -v, --verbose          print out what would happen before doing it
        -o OPTION=VALUE        set OPTION to VALUE as though it were in
                               /etc/network/interfaces
        --no-mappings          don't run any mappings
        --no-scripts           don't run any hook scripts
        --no-loopback          don't act specially on the loopback device
        --force                force de/configuration
        --ignore-errors        ignore errors
```
## 参数解析

### 启动指定网络接口

```bash
ifup eth0
```

- `eth0`：要启动的网络接口名称。

### 启动所有自动配置的接口

```bash
ifup -a
```

- `-a`：处理所有标记为“auto”的接口。

### 使用指定的配置文件启动接口

```bash
ifup -i /etc/network/interfaces.d/eth0 eth0
```

- `-i /etc/network/interfaces.d/eth0`：使用指定的文件作为接口定义文件。
- `eth0`：要启动的网络接口名称。

### 启动接口并显示将要执行的操作

```bash
ifup -n eth0
```

- `-n`：打印出将要发生的操作，但不实际执行（注意此选项不禁用映射）。

### 启动接口并忽略错误

```bash
ifup --ignore-errors eth0
```

- `--ignore-errors`：忽略错误。

### 启动接口并设置选项

```bash
ifup -o mtu=1500 eth0
```

- `-o mtu=1500`：设置选项 `mtu` 为 `1500`，如同它在 `/etc/network/interfaces` 中一样。
- `eth0`：要启动的网络接口名称。

### 启动接口并排除匹配模式的接口

```bash
ifup -X "eth*" eth0
```

- `-X "eth*"`：排除与模式匹配的接口。
- `eth0`：要启动的网络接口名称。

## 综合应用

### 启动所有自动配置的接口并排除特定模式

```bash
ifup -a -X "wlan*"
```

- `-a`：处理所有标记为“auto”的接口。
- `-X "wlan*"`：排除与模式匹配的接口（例如 `wlan*`）。

### 启动指定接口并显示操作详情

```bash
ifup -v eth1
```

- `-v`：在执行操作之前打印出将要发生的事情。
- `eth1`：要启动的网络接口名称。

### 启动接口并使用指定的配置文件

```bash
ifup -i /etc/network/interfaces.d/eth1 eth1
```

- `-i /etc/network/interfaces.d/eth1`：使用指定的文件作为接口定义文件。
- `eth1`：要启动的网络接口名称。

# iface

# ifcfg


# ifconfig
```bash
bash-5.1# ifconfig --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: ifconfig [-a] [IFACE] [ADDRESS]

Configure a network interface

        [add ADDRESS[/PREFIXLEN]]
        [del ADDRESS[/PREFIXLEN]]
        [[-]broadcast [ADDRESS]] [[-]pointopoint [ADDRESS]]
        [netmask ADDRESS] [dstaddr ADDRESS]
        [outfill NN] [keepalive NN]
        [hw ether|infiniband ADDRESS] [metric NN] [mtu NN]
        [[-]trailers] [[-]arp] [[-]allmulti]
        [multicast] [[-]promisc] [txqueuelen NN] [[-]dynamic]
        [mem_start NN] [io_addr NN] [irq NN]
        [up|down] ...
```

## 参数解析

### 显示所有网络接口信息

```bash
ifconfig -a
```
显示所有网络接口的信息。

### 配置网络接口的IP地址

```bash
ifconfig [IFACE] [ADDRESS]
```
为指定接口`[IFACE]`配置IP地址`[ADDRESS]`。

### 添加IP地址到接口

```bash
ifconfig [IFACE] add [ADDRESS[/PREFIXLEN]]
```
将IP地址`[ADDRESS[/PREFIXLEN]]`添加到指定接口`[IFACE]`。

### 从接口删除IP地址

```bash
ifconfig [IFACE] del [ADDRESS[/PREFIXLEN]]
```
从指定接口`[IFACE]`删除IP地址`[ADDRESS[/PREFIXLEN]]`。

### 设置广播地址

```bash
ifconfig [IFACE] broadcast [ADDRESS]
```
设置广播地址为`[ADDRESS]`。

### 设置点对点地址

```bash
ifconfig [IFACE] pointopoint [ADDRESS]
```
设置点对点地址为`[ADDRESS]`。

### 配置网络掩码

```bash
ifconfig [IFACE] netmask [ADDRESS]
```
设置网络掩码为`[ADDRESS]`。

### 配置目标地址

```bash
ifconfig [IFACE] dstaddr [ADDRESS]
```
设置目标地址为`[ADDRESS]`。

### 配置输出填充和保活参数

```bash
ifconfig [IFACE] outfill [NN] keepalive [NN]
```
设置输出填充为`[NN]`，保活时间为`[NN]`。

### 配置硬件地址

```bash
ifconfig [IFACE] hw ether|infiniband [ADDRESS]
```
设置硬件地址为`[ADDRESS]`，可以是以太网或Infiniband地址。

### 配置度量值

```bash
ifconfig [IFACE] metric [NN]
```
设置度量值为`[NN]`。

### 配置最大传输单元（MTU）

```bash
ifconfig [IFACE] mtu [NN]
```
设置最大传输单元为`[NN]`。

### 启用或禁用各种特性

```bash
ifconfig [IFACE] [--]trailers [--]arp [--]allmulti [--]multicast [--]promisc
```
启用或禁用数据包尾部、ARP、所有多播、组播和混杂模式等特性。

### 配置队列长度

```bash
ifconfig [IFACE] txqueuelen [NN]
```
设置传输队列长度为`[NN]`。

### 启用或禁用动态配置

```bash
ifconfig [IFACE] [--]dynamic
```
启用或禁用动态配置。

### 配置内存起始地址、I/O地址和中断请求

```bash
ifconfig [IFACE] mem_start [NN] io_addr [NN] irq [NN]
```
设置内存起始地址、I/O地址和中断请求值。

### 启用或禁用接口

```bash
ifconfig [IFACE] up|down
```
启用或禁用指定接口`[IFACE]`。

## 综合应用

### 配置一个网络接口并添加IP地址

```bash
ifconfig eth0 add 192.168.1.100/24
```

### 设置网络接口的广播地址

```bash
ifconfig eth0 broadcast 192.168.1.255
```

### 配置网络接口的最大传输单元（MTU）

```bash
ifconfig eth0 mtu 1500
```

### 启用网络接口并设置其为混杂模式

```bash
ifconfig eth0 up promisc
```

### 配置网络接口的硬件地址并禁用动态配置

```bash
ifconfig eth0 hw ether 00:1A:2B:3C:4D:5E dynamic
```

# arp
```bash
bash-5.1# arp --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: arp
[-vn]   [-H HWTYPE] [-i IF] -a [HOSTNAME]
[-v]                [-i IF] -d HOSTNAME [pub]
[-v]    [-H HWTYPE] [-i IF] -s HOSTNAME HWADDR [temp]
[-v]    [-H HWTYPE] [-i IF] -s HOSTNAME HWADDR [netmask MASK] pub
[-v]    [-H HWTYPE] [-i IF] -Ds HOSTNAME IFACE [netmask MASK] pub

Manipulate ARP cache

        -a              Display (all) hosts
        -d              Delete ARP entry
        -s              Set new entry
        -v              Verbose
        -n              Don't resolve names
        -i IF           Network interface
        -D              Read HWADDR from IFACE
        -A,-p AF        Protocol family
        -H HWTYPE       Hardware address type
```

## 参数解析

### 显示所有主机的 ARP 表项

```bash
arp -a
```

- `-a`：显示所有主机的 ARP 表项。

### 删除指定主机的 ARP 表项

```bash
arp -d hostname
```

- `-d`：删除指定主机（例如 `hostname`）的 ARP 表项。

### 设置新的 ARP 表项

```bash
arp -s hostname hwaddr
```

- `-s`：设置新的 ARP 表项。
- `hostname`：主机名。
- `hwaddr`：硬件地址（MAC 地址）。

### 设置新的 ARP 表项，带有掩码

```bash
arp -s hostname hwaddr netmask mask
```

- `-s`：设置新的 ARP 表项。
- `hostname`：主机名。
- `hwaddr`：硬件地址（MAC 地址）。
- `netmask mask`：网络掩码（例如 `255.255.255.0`）。

### 设置新的 ARP 表项，并标记为发布的

```bash
arp -s hostname hwaddr netmask mask pub
```

- `-s`：设置新的 ARP 表项。
- `hostname`：主机名。
- `hwaddr`：硬件地址（MAC 地址）。
- `netmask mask`：网络掩码。
- `pub`：将条目标记为发布的。

### 从指定接口读取硬件地址

```bash
arp -D hostname iface
```

- `-D`：从指定接口（例如 `iface`）读取硬件地址。

### 显示所有主机的 ARP 表项，不解析名称

```bash
arp -an
```

- `-n`：不解析主机名。

## 综合应用

### 删除指定主机的 ARP 表项

```bash
arp -d 192.168.1.10
```

- `-d`：删除 ARP 表项。
- `192.168.1.10`：指定要删除的主机 IP 地址。

### 设置新的 ARP 表项并标记为发布的

```bash
arp -s 192.168.1.20 00:1A:2B:3C:4D:5E netmask 255.255.255.0 pub
```

- `-s`：设置新的 ARP 表项。
- `192.168.1.20`：主机 IP 地址。
- `00:1A:2B:3C:4D:5E`：硬件地址。
- `netmask 255.255.255.0`：网络掩码。
- `pub`：标记为发布的。

### 显示所有 ARP 表项并不解析主机名

```bash
arp -an
```

- `-a`：显示所有主机的 ARP 表项。
- `-n`：不解析主机名。

# arping
```bash
bash-5.1# arping --help

Usage:
  arping [options] <destination>

Options:
  -f            quit on first reply
  -q            be quiet
  -b            keep on broadcasting, do not unicast
  -D            duplicate address detection mode
  -U            unsolicited ARP mode, update your neighbours
  -A            ARP answer mode, update your neighbours
  -V            print version and exit
  -c <count>    how many packets to send
  -w <timeout>  how long to wait for a reply
  -i <interval> set interval between packets (default: 1 second)
  -I <device>   which ethernet device to use
  -s <source>   source ip address
  <destination> dns name or ip address

For more details see arping(8).
```

## 参数解析

### 设置 ARP 请求的目标

```bash
arping <destination>
```

- `<destination>`：目标的 DNS 名称或 IP 地址。

### 退出于第一个回复

```bash
arping -f <destination>
```

- `-f`：在收到第一个回复后退出。

### 仅广播，不单播

```bash
arping -b <destination>
```

- `-b`：持续广播，不转换为单播。

### 进行重复地址检测

```bash
arping -D <destination>
```

- `-D`：进行重复地址检测模式。

### 进行无应答 ARP 模式

```bash
arping -U <destination>
```

- `-U`：进行无应答 ARP 模式，更新邻居表。

### 进行 ARP 应答模式

```bash
arping -A <destination>
```

- `-A`：进行 ARP 应答模式，更新邻居表。

### 打印版本并退出

```bash
arping -V
```

- `-V`：打印程序版本并退出。

### 发送指定数量的数据包

```bash
arping -c <count> <destination>
```

- `-c <count>`：发送指定数量的数据包。

### 设置等待回复的超时时间

```bash
arping -w <timeout> <destination>
```

- `-w <timeout>`：设置等待回复的超时时间（以秒为单位）。

### 设置数据包之间的时间间隔

```bash
arping -i <interval> <destination>
```

- `-i <interval>`：设置数据包之间的时间间隔（默认为 1 秒）。

### 指定使用的网络设备

```bash
arping -I <device> <destination>
```

- `-I <device>`：指定使用的以太网设备。

### 设置源 IP 地址

```bash
arping -s <source> <destination>
```

- `-s <source>`：设置源 IP 地址。

## 综合应用

### 在第一个回复后退出，并发送 5 个数据包

```bash
arping -f -c 5 <destination>
```

- `-f`：在收到第一个回复后退出。
- `-c 5`：发送 5 个数据包。

### 使用指定设备进行 ARP 请求，每秒发送一个数据包

```bash
arping -I eth0 -i 1 <destination>
```

- `-I eth0`：使用 `eth0` 设备。
- `-i 1`：每秒发送一个数据包。

### 进行无应答 ARP 模式，设置源 IP 地址

```bash
arping -U -s 192.168.1.10 <destination>
```

- `-U`：进行无应答 ARP 模式。
- `-s 192.168.1.10`：设置源 IP 地址为 `192.168.1.10`。

### 在 2 秒内等待回复，进行重复地址检测

```bash
arping -D -w 2 <destination>
```

- `-D`：进行重复地址检测。
- `-w 2`：在 2 秒内等待回复。

# arptables
```bash

```

# arptables-save
```bash

```

# arptables-restore
```bash

```


# arptables-nft
```bash

```


# arptables-nft-save
```bash

```


# arptables-nft-restore
```bash

```


# route
```bash
bash-5.1# route --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: route [-ne] [-A inet[6]] [{add|del} [-net|-host] TARGET [netmask MASK]
        [gw GATEWAY] [metric N] [mss BYTES] [window BYTES] [reject] [IFACE]]

Show or edit kernel routing tables

        -n      Don't resolve names
        -e      Display other/more information
        -A inet[6]      Select address family
```

## 参数解析

### 不解析名称，仅显示 IP 地址

```bash
route -n
```

- `-n`：不解析名称，直接显示 IP 地址。

### 显示更详细的信息

```bash
route -e
```

- `-e`：显示更多的信息。

### 选择地址族（IPv4 或 IPv6）

```bash
route -A inet6
```

- `-A inet[6]`：选择地址族，`inet` 表示 IPv4，`inet6` 表示 IPv6。

### 添加一个新的路由

```bash
route add -net 192.168.1.0 netmask 255.255.255.0 gw 192.168.1.1
```

- `add`：添加一个新的路由。
- `-net 192.168.1.0`：目标网络地址。
- `netmask 255.255.255.0`：子网掩码。
- `gw 192.168.1.1`：网关地址。

### 删除一个路由

```bash
route del -net 192.168.1.0 netmask 255.255.255.0
```

- `del`：删除一个路由。
- `-net 192.168.1.0`：目标网络地址。
- `netmask 255.255.255.0`：子网掩码。

### 添加一个主机路由

```bash
route add -host 10.0.0.5 gw 10.0.0.1
```

- `-host 10.0.0.5`：目标主机地址。
- `gw 10.0.0.1`：网关地址。

## 综合应用

### 添加一个新的网络路由

```bash
route add -net 172.16.0.0 netmask 255.240.0.0 gw 172.16.1.1
```

- `-net 172.16.0.0`：目标网络地址。
- `netmask 255.240.0.0`：子网掩码。
- `gw 172.16.1.1`：网关地址。

### 删除现有的网络路由

```bash
route del -net 10.0.0.0 netmask 255.0.0.0
```

- `-net 10.0.0.0`：目标网络地址。
- `netmask 255.0.0.0`：子网掩码。

### 显示当前路由表的详细信息

```bash
route -e
```

- `-e`：显示更多的路由表信息。

### 选择并显示 IPv6 路由表

```bash
route -A inet6
```

- `-A inet6`：选择并显示 IPv6 路由表。

# traceroute
```bash
bash-5.1# traceroute --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: traceroute [-Flnrv] [-f 1ST_TTL] [-m MAXTTL] [-q PROBES] [-p PORT]
        [-t TOS] [-w WAIT_SEC] [-s SRC_IP] [-i IFACE]
        [-z PAUSE_MSEC] HOST [BYTES]

Trace the route to HOST

        -F      Set don't fragment bit
        -l      Display TTL value of the returned packet
        -n      Print numeric addresses
        -r      Bypass routing tables, send directly to HOST
        -f N    First number of hops (default 1)
        -m N    Max number of hops
        -q N    Number of probes per hop (default 3)
        -p N    Base UDP port number used in probes
                (default 33434)
        -s IP   Source address
        -i IFACE Source interface
        -t N    Type-of-service in probe packets (default 0)
        -w SEC  Wait for a response (default 3)
        -z MSEC Wait before each send
```

## 参数解析

### 路由追踪并打印数字地址

```bash
traceroute -n example.com
```

- `-n`：打印数字地址而不是尝试解析主机名。

### 路由追踪并设置最大跳数

```bash
traceroute -m 20 example.com
```

- `-m N`：设置最大跳数为 N。默认值为 30。

### 路由追踪并指定起始 TTL

```bash
traceroute -f 2 example.com
```

- `-f N`：设置起始 TTL 值为 N。默认值为 1。

### 路由追踪并设置每跳探测次数

```bash
traceroute -q 5 example.com
```

- `-q N`：设置每跳的探测次数为 N。默认值为 3。

### 路由追踪并使用指定的 UDP 端口

```bash
traceroute -p 12345 example.com
```

- `-p N`：指定使用的 UDP 基本端口号为 N。默认值为 33434。

### 路由追踪并设置等待时间

```bash
traceroute -w 5 example.com
```

- `-w SEC`：设置等待每个响应的时间为 SEC 秒。默认值为 3 秒。

### 路由追踪并设置源地址

```bash
traceroute -s 192.168.1.1 example.com
```

- `-s IP`：设置源 IP 地址为 IP。

### 路由追踪并设置源接口

```bash
traceroute -i eth0 example.com
```

- `-i IFACE`：指定源接口为 IFACE。

### 路由追踪并设置不分段位

```bash
traceroute -F example.com
```

- `-F`：设置不分段位。

### 路由追踪并绕过路由表

```bash
traceroute -r example.com
```

- `-r`：绕过路由表，直接发送到主机。

### 路由追踪并设置每个发送之间的延迟

```bash
traceroute -z 100 example.com
```

- `-z MSEC`：在每次发送之间等待 MSEC 毫秒。

## 综合应用

### 路由追踪到主机并显示详细信息

```bash
traceroute -n -m 30 -q 5 -p 12345 example.com
```

- `-n`：打印数字地址。
- `-m 30`：最大跳数设置为 30。
- `-q 5`：每跳的探测次数设置为 5。
- `-p 12345`：使用端口 12345 进行探测。

### 路由追踪并使用指定源地址和接口

```bash
traceroute -s 192.168.1.1 -i eth0 example.com
```

- `-s 192.168.1.1`：使用源地址 192.168.1.1。
- `-i eth0`：使用接口 eth0。

### 路由追踪并绕过路由表并设置不分段位

```bash
traceroute -r -F example.com
```

- `-r`：绕过路由表。
- `-F`：设置不分段位。

# nameif
```bash
bash-5.1# nameif --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: nameif [-s] [-c FILE] [IFNAME HWADDR]...

Rename network interface while it in the down state.
The device with address HWADDR is renamed to IFNAME.

        -c FILE Configuration file (default: /etc/mactab)
        -s      Log to syslog
```

## 参数解析

### 重命名网络接口

```bash
nameif eth0 00:1A:2B:3C:4D:5E
```

- `eth0`：新的接口名称。
- `00:1A:2B:3C:4D:5E`：接口的硬件地址（MAC 地址）。

### 使用配置文件重命名接口

```bash
nameif -c /etc/custom_mactab eth0 00:1A:2B:3C:4D:5E
```

- `-c /etc/custom_mactab`：使用指定的配置文件。
- `eth0`：新的接口名称。
- `00:1A:2B:3C:4D:5E`：接口的硬件地址（MAC 地址）。

### 启用 syslog 日志记录

```bash
nameif -s eth0 00:1A:2B:3C:4D:5E
```

- `-s`：将日志记录到 syslog。
- `eth0`：新的接口名称。
- `00:1A:2B:3C:4D:5E`：接口的硬件地址（MAC 地址）。

## 综合应用

### 重命名网络接口并使用自定义配置文件

```bash
nameif -c /etc/custom_mactab newiface 00:1A:2B:3C:4D:5E
```

- `-c /etc/custom_mactab`：指定自定义的配置文件。
- `newiface`：新的接口名称。
- `00:1A:2B:3C:4D:5E`：接口的硬件地址（MAC 地址）。

### 重命名接口并记录日志

```bash
nameif -s eth1 00:1A:2B:3C:4D:5F
```

- `-s`：启用 syslog 日志记录。
- `eth1`：新的接口名称。
- `00:1A:2B:3C:4D:5F`：接口的硬件地址（MAC 地址）。

# mii-tool

# plipconfig

# slattach


# ping
```bash
bash-5.1# ping --help

Usage
  ping [options] <destination>

Options:
  <destination>      dns name or ip address
  -a                 use audible ping
  -A                 use adaptive ping
  -B                 sticky source address
  -c <count>         stop after <count> replies
  -D                 print timestamps
  -d                 use SO_DEBUG socket option
  -f                 flood ping
  -h                 print help and exit
  -I <interface>     either interface name or address
  -i <interval>      seconds between sending each packet
  -L                 suppress loopback of multicast packets
  -l <preload>       send <preload> number of packages while waiting replies
  -m <mark>          tag the packets going out
  -M <pmtud opt>     define mtu discovery, can be one of <do|dont|want>
  -n                 no dns name resolution
  -O                 report outstanding replies
  -p <pattern>       contents of padding byte
  -q                 quiet output
  -Q <tclass>        use quality of service <tclass> bits
  -s <size>          use <size> as number of data bytes to be sent
  -S <size>          use <size> as SO_SNDBUF socket option value
  -t <ttl>           define time to live
  -U                 print user-to-user latency
  -v                 verbose output
  -V                 print version and exit
  -w <deadline>      reply wait <deadline> in seconds
  -W <timeout>       time to wait for response

IPv4 options:
  -4                 use IPv4
  -b                 allow pinging broadcast
  -R                 record route
  -T <timestamp>     define timestamp, can be one of <tsonly|tsandaddr|tsprespec>

IPv6 options:
  -6                 use IPv6
  -F <flowlabel>     define flow label, default is random
  -N <nodeinfo opt>  use icmp6 node info query, try <help> as argument

For more details see ping(8).
```

## 参数解析

### 使用指定目标地址进行ping

```bash
ping <destination>
```
`<destination>`可以是DNS名称或IP地址。

### 使用可听ping

```bash
ping -a <destination>
```
使用声音进行ping。

### 使用自适应ping

```bash
ping -A <destination>
```
使用自适应ping。

### 使用粘性源地址

```bash
ping -B <destination>
```
使用粘性源地址。

### 限制ping次数

```bash
ping -c <count> <destination>
```
在收到`<count>`个回复后停止ping。

### 打印时间戳

```bash
ping -D <destination>
```
打印时间戳。

### 使用SO_DEBUG套接字选项

```bash
ping -d <destination>
```
使用SO_DEBUG套接字选项。

### 洪泛ping

```bash
ping -f <destination>
```
进行洪泛ping。

### 打印帮助信息并退出

```bash
ping -h
```
打印帮助信息并退出。

### 指定网络接口

```bash
ping -I <interface> <destination>
```
指定网络接口名称或地址。

### 设置发送每个数据包的时间间隔

```bash
ping -i <interval> <destination>
```
设置每个数据包发送的时间间隔（秒）。

### 抑制多播数据包的回送

```bash
ping -L <destination>
```
抑制多播数据包的回送。

### 预加载指定数量的数据包

```bash
ping -l <preload> <destination>
```
在等待回复时发送`<preload>`数量的数据包。

### 标记发送的数据包

```bash
ping -m <mark> <destination>
```
标记发送的数据包。

### 定义MTU发现选项

```bash
ping -M <pmtud opt> <destination>
```
定义MTU发现选项，可以是`do`、`dont`或`want`。

### 禁用DNS名称解析

```bash
ping -n <destination>
```
禁用DNS名称解析。

### 报告未完成的回复

```bash
ping -O <destination>
```
报告未完成的回复。

### 设置填充字节内容

```bash
ping -p <pattern> <destination>
```
设置填充字节的内容。

### 静默输出

```bash
ping -q <destination>
```
静默输出。

### 使用服务质量（QoS）位

```bash
ping -Q <tclass> <destination>
```
使用服务质量`<tclass>`位。

### 设置数据字节数

```bash
ping -s <size> <destination>
```
设置数据字节数为`<size>`。

### 设置SO_SNDBUF套接字选项值

```bash
ping -S <size> <destination>
```
设置SO_SNDBUF套接字选项的值为`<size>`。

### 定义生存时间（TTL）

```bash
ping -t <ttl> <destination>
```
定义生存时间（TTL）。

### 打印用户到用户的延迟

```bash
ping -U <destination>
```
打印用户到用户的延迟。

### 输出详细信息

```bash
ping -v <destination>
```
输出详细信息。

### 打印版本信息并退出

```bash
ping -V
```
打印版本信息并退出。

### 设置等待回复的截止时间

```bash
ping -w <deadline> <destination>
```
设置等待回复的截止时间（秒）。

### 设置等待响应的时间

```bash
ping -W <timeout> <destination>
```
设置等待响应的时间（秒）。

### 使用IPv4

```bash
ping -4 <destination>
```
使用IPv4。

### 允许ping广播地址

```bash
ping -b <destination>
```
允许ping广播地址。

### 记录路由

```bash
ping -R <destination>
```
记录路由。

### 定义时间戳

```bash
ping -T <timestamp> <destination>
```
定义时间戳，可以是`tsonly`、`tsandaddr`或`tsprespec`。

### 使用IPv6

```bash
ping -6 <destination>
```
使用IPv6。

### 定义流标签

```bash
ping -F <flowlabel> <destination>
```
定义流标签，默认随机生成。

### 使用ICMP6节点信息查询

```bash
ping -N <nodeinfo opt> <destination>
```
使用ICMP6节点信息查询，可以使用`help`作为参数尝试。

## 综合应用

### 执行对指定目标的10次ping并打印详细输出

```bash
ping -c 10 -v <destination>
```

### 使用自适应ping和设置每秒发送一个数据包

```bash
ping -A -i 1 <destination>
```

### 启用IPv6进行ping，并使用指定的流标签

```bash
ping -6 -F <flowlabel> <destination>
```

### 在指定网络接口上执行ping，记录路由，并设置TTL为64

```bash
ping -I <interface> -R -t 64 <destination>
```

### 使用指定的填充字节内容和服务质量位进行ping

```bash
ping -p <pattern> -Q <tclass> <destination>
```


# iperf3
```bash
bash-5.1# iperf3 --help
Usage: iperf3 [-s|-c host] [options]
       iperf3 [-h|--help] [-v|--version]

Server or Client:
  -p, --port      #         server port to listen on/connect to
  -f, --format   [kmgtKMGT] format to report: Kbits, Mbits, Gbits, Tbits
  -i, --interval  #         seconds between periodic throughput reports
  -I, --pidfile file        write PID file
  -F, --file name           xmit/recv the specified file
  -A, --affinity n/n,m      set CPU affinity
  -B, --bind      <host>    bind to the interface associated with the address <host>
  --bind-dev      <dev>     bind to the network interface with SO_BINDTODEVICE
  -V, --verbose             more detailed output
  -J, --json                output in JSON format
  --logfile f               send output to a log file
  --forceflush              force flushing output at every interval
  --timestamps<=format>     emit a timestamp at the start of each output line
                            (optional "=" and format string as per strftime(3))
  --rcv-timeout #           idle timeout for receiving data
                            (default 120000 ms)
  -d, --debug               emit debugging output
  -v, --version             show version information and quit
  -h, --help                show this message and quit
Server specific:
  -s, --server              run in server mode
  -D, --daemon              run the server as a daemon
  -1, --one-off             handle one client connection then exit
  --server-bitrate-limit #[KMG][/#]   server's total bit rate limit (default 0 = no limit)
                            (optional slash and number of secs interval for averaging
                            total data rate.  Default is 5 seconds)
  --idle-timeout #          restart idle server after # seconds in case it
                            got stuck (default - no timeout)
  --rsa-private-key-path    path to the RSA private key used to decrypt
                            authentication credentials
  --authorized-users-path   path to the configuration file containing user
                            credentials
  --time-skew-threshold     time skew threshold (in seconds) between the server
                            and client during the authentication process
Client specific:
  -c, --client    <host>    run in client mode, connecting to <host>
  -u, --udp                 use UDP rather than TCP
  --connect-timeout #       timeout for control connection setup (ms)
  -b, --bitrate #[KMG][/#]  target bitrate in bits/sec (0 for unlimited)
                            (default 1 Mbit/sec for UDP, unlimited for TCP)
                            (optional slash and packet count for burst mode)
  --pacing-timer #[KMG]     set the timing for pacing, in microseconds (default 1000)
  --fq-rate #[KMG]          enable fair-queuing based socket pacing in
                            bits/sec (Linux only)
  -t, --time      #         time in seconds to transmit for (default 10 secs)
  -n, --bytes     #[KMG]    number of bytes to transmit (instead of -t)
  -k, --blockcount #[KMG]   number of blocks (packets) to transmit (instead of -t or -n)
  -l, --length    #[KMG]    length of buffer to read or write
                            (default 128 KB for TCP, dynamic or 1460 for UDP)
  --cport         <port>    bind to a specific client port (TCP and UDP, default: ephemeral port)
  -P, --parallel  #         number of parallel client streams to run
  -R, --reverse             run in reverse mode (server sends, client receives)
  --bidir                   run in bidirectional mode.
                            Client and server send and receive data.
  -w, --window    #[KMG]    set window size / socket buffer size
  -C, --congestion <algo>   set TCP congestion control algorithm (Linux and FreeBSD only)
  -M, --set-mss   #         set TCP/SCTP maximum segment size (MTU - 40 bytes)
  -N, --no-delay            set TCP/SCTP no delay, disabling Nagle's Algorithm
  -4, --version4            only use IPv4
  -6, --version6            only use IPv6
  -S, --tos N               set the IP type of service, 0-255.
                            The usual prefixes for octal and hex can be used,
                            i.e. 52, 064 and 0x34 all specify the same value.
  --dscp N or --dscp val    set the IP dscp value, either 0-63 or symbolic.
                            Numeric values can be specified in decimal,
                            octal and hex (see --tos above).
  -L, --flowlabel N         set the IPv6 flow label (only supported on Linux)
  -Z, --zerocopy            use a 'zero copy' method of sending data
  -O, --omit N              omit the first n seconds
  -T, --title str           prefix every output line with this string
  --extra-data str          data string to include in client and server JSON
  --get-server-output       get results from server
  --udp-counters-64bit      use 64-bit counters in UDP test packets
  --repeating-payload       use repeating pattern in payload, instead of
                            randomized payload (like in iperf2)
  --dont-fragment           set IPv4 Don't Fragment flag
  --username                username for authentication
  --rsa-public-key-path     path to the RSA public key used to encrypt
                            authentication credentials

[KMG] indicates options that support a K/M/G suffix for kilo-, mega-, or giga-

iperf3 homepage at: https://software.es.net/iperf/
Report bugs to:     https://github.com/esnet/iperf
```

## 参数解析

### 启动服务器模式

```bash
iperf3 -s
iperf3 --server
```
运行iperf3服务器。

### 启动客户端模式并连接到服务器

```bash
iperf3 -c <host>
iperf3 --client <host>
```
运行iperf3客户端并连接到指定的服务器。

### 指定服务器或客户端端口

```bash
iperf3 -p <port>
iperf3 --port <port>
```
指定服务器监听或客户端连接的端口。

### 设置报告格式

```bash
iperf3 -f [kmgtKMGT]
iperf3 --format [kmgtKMGT]
```
设置报告格式为Kbits, Mbits, Gbits, Tbits中的一种。

### 设置报告间隔时间

```bash
iperf3 -i <interval>
iperf3 --interval <interval>
```
设置报告之间的时间间隔（秒）。

### 写入PID文件

```bash
iperf3 -I <file>
iperf3 --pidfile <file>
```
将进程ID写入指定文件。

### 传输/接收指定文件

```bash
iperf3 -F <name>
iperf3 --file <name>
```
传输或接收指定的文件。

### 设置CPU亲和力

```bash
iperf3 -A <n/n,m>
iperf3 --affinity <n/n,m>
```
设置CPU亲和力。

### 绑定到指定主机

```bash
iperf3 -B <host>
iperf3 --bind <host>
```
绑定到与地址相关的接口。

### 使用SO_BINDTODEVICE绑定到网络接口

```bash
iperf3 --bind-dev <dev>
```
绑定到指定的网络接口。

### 更详细的输出

```bash
iperf3 -V
iperf3 --verbose
```
输出更多详细信息。

### 输出为JSON格式

```bash
iperf3 -J
iperf3 --json
```
输出结果为JSON格式。

### 将输出发送到日志文件

```bash
iperf3 --logfile <file>
```
将输出发送到指定的日志文件。

### 每个间隔强制刷新输出

```bash
iperf3 --forceflush
```
强制每个间隔刷新输出。

### 在每行输出前添加时间戳

```bash
iperf3 --timestamps[=<format>]
```
在每行输出前添加时间戳（可选格式字符串，如strftime(3)）。

### 设置接收数据的空闲超时

```bash
iperf3 --rcv-timeout <ms>
```
设置接收数据的空闲超时（默认120000毫秒）。

### 输出调试信息

```bash
iperf3 -d
iperf3 --debug
```
输出调试信息。

### 显示版本信息并退出

```bash
iperf3 -v
iperf3 --version
```
显示版本信息并退出。

### 显示帮助信息并退出

```bash
iperf3 -h
iperf3 --help
```
显示帮助信息并退出。

### 作为守护进程运行服务器

```bash
iperf3 -D
iperf3 --daemon
```
将服务器作为守护进程运行。

### 处理一个客户端连接后退出

```bash
iperf3 -1
iperf3 --one-off
```
处理一个客户端连接后退出。

### 设置服务器总比特率限制

```bash
iperf3 --server-bitrate-limit <#[KMG][/#]>
```
设置服务器的总比特率限制（默认0表示无限制），可选斜线和秒数间隔用于平均总数据速率。

### 设置服务器空闲超时

```bash
iperf3 --idle-timeout <#>
```
在指定秒数后重启空闲服务器以防止其卡住（默认无超时）。

### 设置RSA私钥路径

```bash
iperf3 --rsa-private-key-path <path>
```
设置用于解密认证凭据的RSA私钥路径。

### 设置授权用户配置文件路径

```bash
iperf3 --authorized-users-path <path>
```
设置包含用户凭据的配置文件路径。

### 设置认证过程中服务器与客户端之间的时间偏移阈值

```bash
iperf3 --time-skew-threshold <seconds>
```
设置认证过程中服务器与客户端之间的时间偏移阈值（以秒为单位）。

### 运行客户端并使用UDP协议

```bash
iperf3 -u
iperf3 --udp
```
使用UDP协议而不是TCP。

### 设置控制连接的超时

```bash
iperf3 --connect-timeout <ms>
```
设置控制连接的超时（毫秒）。

### 设置目标比特率

```bash
iperf3 -b <#[KMG][/#]>
iperf3 --bitrate <#[KMG][/#]>
```
设置目标比特率（比特/秒），0表示无限制（UDP默认为1 Mbit/sec，TCP无限制）。

### 设置分配计时器

```bash
iperf3 --pacing-timer <#[KMG]>
```
设置分配计时器，单位为微秒（默认1000）。

### 启用公平排队的套接字分配

```bash
iperf3 --fq-rate <#[KMG]>
```
启用基于公平排队的套接字分配，单位为比特/秒（仅限Linux）。

### 设置传输时间

```bash
iperf3 -t <#>
iperf3 --time <#>
```
设置传输时间，单位为秒（默认10秒）。

### 设置传输字节数

```bash
iperf3 -n <#[KMG]>
iperf3 --bytes <#[KMG]>
```
设置传输字节数（替代-t）。

### 设置传输块数（包数）

```bash
iperf3 -k <#[KMG]>
iperf3 --blockcount <#[KMG]>
```
设置传输块数（包数）（替代-t或-n）。

### 设置读写缓冲区长度

```bash
iperf3 -l <#[KMG]>
iperf3 --length <#[KMG]>
```
设置读写缓冲区长度（TCP默认128 KB，UDP动态或1460）。

### 绑定到特定客户端端口

```bash
iperf3 --cport <port>
```
绑定到特定客户端端口（TCP和UDP，默认临时端口）。

### 设置并行客户端流数

```bash
iperf3 -P <#>
iperf3 --parallel <#>
```
设置并行客户端流数。

### 反向模式运行

```bash
iperf3 -R
iperf3 --reverse
```
以反向模式运行（服务器发送，客户端接收）。

### 双向模式运行

```bash
iperf3 --bidir
```
双向模式运行，客户端和服务器同时发送和接收数据。

### 设置窗口大小/套接字缓冲区大小

```bash
iperf3 -w <#[KMG]>
iperf3 --window <#[KMG]>
```
设置窗口大小/套接字缓冲区大小。

### 设置TCP拥塞控制算法

```bash
iperf3 -C <algo>
iperf3 --congestion <algo>
```
设置TCP拥塞控制算法（仅限Linux和FreeBSD）。

### 设置TCP/SCTP最大段大小

```bash
iperf3 -M <#>
iperf3 --set-mss <#>
```
设置TCP/SCTP最大段大小（MTU - 40字节）。

### 禁用Nagle算法

```bash
iperf3 -N
iperf3 --no-delay
```
禁用Nagle算法。

### 仅使用IPv4

```bash
iperf3 -4
iperf3 --version4
```
仅使用IPv4。

### 仅使用IPv6

```bash
iperf3 -6
iperf3 --version6
```
仅使用IPv6。

### 设置IP服务类型

```bash
iperf3 -S <N>
iperf3 --tos <N>
```
设置IP服务类型，范围为0-255。可以使用八进制和十六进制前缀（如52, 064和0x34表示相同值）。

### 设置IP DSCP值

```bash
iperf3 --dscp <N>
iperf3 --dscp <val>
```
设置IP DSCP值，可以是0-63或符号值。数值可以用十进制、八进制和十六进制表示。

### 设置IPv6流标签

```bash
iperf3 -L <N>
iperf3 --flowlabel <N>
```
设置IPv6流标签（仅支持Linux）。

### 使用零拷贝方法发送数据

```bash
iperf3 -Z
iperf3 --zerocopy
```
使用零拷贝方法发送数据。

### 忽略前N秒的传输数据

```bash
iperf3 -O <N>
iperf3 --omit <N>
```
忽略前N秒的传输数据。

### 在每行输出前添加标题字符串。

```bash
iperf3 -T <str>
iperf3 --title <str>
```


### 在客户端和服务器JSON中包含数据字符串

```bash
iperf3 --extra-data <str>
```
在客户端和服务器JSON中包含数据字符串。

### 从服务器获取结果

```bash
iperf3 --get-server-output
```
从服务器获取结果。

### 在UDP测试包中使用64位计数器

```bash
iperf3 --udp-counters-64bit
```
在UDP测试包中使用64位计数器。

### 使用重复模式的有效负载

```bash
iperf3 --repeating-payload
```
在有效负载中使用重复模式，而不是随机有效负载（如iperf2）。

### 设置IPv4不分片标志

```bash
iperf3 --dont-fragment
```
设置IPv4不分片标志。

### 用户认证的用户名

```bash
iperf3 --username <username>
```
用户认证的用户名。

### 设置RSA公钥路径

```bash
iperf3 --rsa-public-key-path <path>
```
设置用于加密认证凭据的RSA公钥路径。

## 综合应用

### 在服务器模式下运行并将输出记录到文件

```bash
iperf3 -s --logfile server_output.txt
```

### 在客户端模式下运行并指定特定端口、使用UDP协议和设置比特率

```bash
iperf3 -c <host> -p 5201 -u -b 5M
```

### 在客户端模式下运行并设置并行流数为4，传输时间为60秒，并使用IPv6

```bash
iperf3 -c <host> -P 4 -t 60 -6
```

### 启动客户端与服务器进行双向传输测试

```bash
iperf3 -c <host> --bidir
```

### 在客户端模式下运行并使用JSON格式输出和指定特定CPU亲和力

```bash
iperf3 -c <host> -J -A 1/2
```

### 在服务器模式下运行并设置总比特率限制为100Mbits/sec

```bash
iperf3 -s --server-bitrate-limit 100M
```

# ethtool
```bash
bash-5.1# ethtool --help
ethtool version 5.15
Usage:
        ethtool [ FLAGS ]  DEVNAME      Display standard information about device
        ethtool [ FLAGS ] -s|--change DEVNAME   Change generic options
                [ speed %d ]
                [ lanes %d ]
                [ duplex half|full ]
                [ port tp|aui|bnc|mii|fibre|da ]
                [ mdix auto|on|off ]
                [ autoneg on|off ]
                [ advertise %x[/%x] | mode on|off ... [--] ]
                [ phyad %d ]
                [ xcvr internal|external ]
                [ wol %d[/%d] | p|u|m|b|a|g|s|f|d... ]
                [ sopass %x:%x:%x:%x:%x:%x ]
                [ msglvl %d[/%d] | type on|off ... [--] ]
                [ master-slave preferred-master|preferred-slave|forced-master|forced-slave ]
        ethtool [ FLAGS ] -a|--show-pause DEVNAME       Show pause options
        ethtool [ FLAGS ] -A|--pause DEVNAME    Set pause options
                [ autoneg on|off ]
                [ rx on|off ]
                [ tx on|off ]
        ethtool [ FLAGS ] -c|--show-coalesce DEVNAME    Show coalesce options
        ethtool [ FLAGS ] -C|--coalesce DEVNAME Set coalesce options
                [adaptive-rx on|off]
                [adaptive-tx on|off]
                [rx-usecs N]
                [rx-frames N]
                [rx-usecs-irq N]
                [rx-frames-irq N]
                [tx-usecs N]
                [tx-frames N]
                [tx-usecs-irq N]
                [tx-frames-irq N]
                [stats-block-usecs N]
                [pkt-rate-low N]
                [rx-usecs-low N]
                [rx-frames-low N]
                [tx-usecs-low N]
                [tx-frames-low N]
                [pkt-rate-high N]
                [rx-usecs-high N]
                [rx-frames-high N]
                [tx-usecs-high N]
                [tx-frames-high N]
                [sample-interval N]
                [cqe-mode-rx on|off]
                [cqe-mode-tx on|off]
        ethtool [ FLAGS ] -g|--show-ring DEVNAME        Query RX/TX ring parameters
        ethtool [ FLAGS ] -G|--set-ring DEVNAME Set RX/TX ring parameters
                [ rx N ]
                [ rx-mini N ]
                [ rx-jumbo N ]
                [ tx N ]
        ethtool [ FLAGS ] -k|--show-features|--show-offload DEVNAME     Get state of protocol offload and other features
        ethtool [ FLAGS ] -K|--features|--offload DEVNAME       Set protocol offload and other features
                FEATURE on|off ...
        ethtool [ FLAGS ] -i|--driver DEVNAME   Show driver information
        ethtool [ FLAGS ] -d|--register-dump DEVNAME    Do a register dump
                [ raw on|off ]
                [ file FILENAME ]
        ethtool [ FLAGS ] -e|--eeprom-dump DEVNAME      Do a EEPROM dump
                [ raw on|off ]
                [ offset N ]
                [ length N ]
        ethtool [ FLAGS ] -E|--change-eeprom DEVNAME    Change bytes in device EEPROM
                [ magic N ]
                [ offset N ]
                [ length N ]
                [ value N ]
        ethtool [ FLAGS ] -r|--negotiate DEVNAME        Restart N-WAY negotiation
        ethtool [ FLAGS ] -p|--identify DEVNAME Show visible port identification (e.g. blinking)
               [ TIME-IN-SECONDS ]
        ethtool [ FLAGS ] -t|--test DEVNAME     Execute adapter self test
               [ online | offline | external_lb ]
        ethtool [ FLAGS ] -S|--statistics DEVNAME       Show adapter statistics
               [ --all-groups | --groups [eth-phy] [eth-mac] [eth-ctrl] [rmon] ]
        ethtool [ FLAGS ] --phy-statistics DEVNAME      Show phy statistics
        ethtool [ FLAGS ] -n|-u|--show-nfc|--show-ntuple DEVNAME        Show Rx network flow classification options or rules
                [ rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6 [context %d] |
                  rule %d ]
        ethtool [ FLAGS ] -N|-U|--config-nfc|--config-ntuple DEVNAME    Configure Rx network flow classification options or rules
                rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6 m|v|t|s|d|f|n|r... [context %d] |
                flow-type ether|ip4|tcp4|udp4|sctp4|ah4|esp4|ip6|tcp6|udp6|ah6|esp6|sctp6
                        [ src %x:%x:%x:%x:%x:%x [m %x:%x:%x:%x:%x:%x] ]
                        [ dst %x:%x:%x:%x:%x:%x [m %x:%x:%x:%x:%x:%x] ]
                        [ proto %d [m %x] ]
                        [ src-ip IP-ADDRESS [m IP-ADDRESS] ]
                        [ dst-ip IP-ADDRESS [m IP-ADDRESS] ]
                        [ tos %d [m %x] ]
                        [ tclass %d [m %x] ]
                        [ l4proto %d [m %x] ]
                        [ src-port %d [m %x] ]
                        [ dst-port %d [m %x] ]
                        [ spi %d [m %x] ]
                        [ vlan-etype %x [m %x] ]
                        [ vlan %x [m %x] ]
                        [ user-def %x [m %x] ]
                        [ dst-mac %x:%x:%x:%x:%x:%x [m %x:%x:%x:%x:%x:%x] ]
                        [ action %d ] | [ vf %d queue %d ]
                        [ context %d ]
                        [ loc %d]] |
                delete %d
        ethtool [ FLAGS ] -T|--show-time-stamping DEVNAME       Show time stamping capabilities
        ethtool [ FLAGS ] -x|--show-rxfh-indir|--show-rxfh DEVNAME      Show Rx flow hash indirection table and/or RSS hash key
                [ context %d ]
        ethtool [ FLAGS ] -X|--set-rxfh-indir|--rxfh DEVNAME    Set Rx flow hash indirection table and/or RSS hash key
                [ context %d|new ]
                [ equal N | weight W0 W1 ... | default ]
                [ hkey %x:%x:%x:%x:%x:.... ]
                [ hfunc FUNC ]
                [ delete ]
        ethtool [ FLAGS ] -f|--flash DEVNAME    Flash firmware image from the specified file to a region on the device
               FILENAME [ REGION-NUMBER-TO-FLASH ]
        ethtool [ FLAGS ] -P|--show-permaddr DEVNAME    Show permanent hardware address
        ethtool [ FLAGS ] -w|--get-dump DEVNAME Get dump flag, data
                [ data FILENAME ]
        ethtool [ FLAGS ] -W|--set-dump DEVNAME Set dump flag of the device
                N
        ethtool [ FLAGS ] -l|--show-channels DEVNAME    Query Channels
        ethtool [ FLAGS ] -L|--set-channels DEVNAME     Set Channels
               [ rx N ]
               [ tx N ]
               [ other N ]
               [ combined N ]
        ethtool [ FLAGS ] --show-priv-flags DEVNAME     Query private flags
        ethtool [ FLAGS ] --set-priv-flags DEVNAME      Set private flags
                FLAG on|off ...
        ethtool [ FLAGS ] -m|--dump-module-eeprom|--module-info DEVNAME Query/Decode Module EEPROM information and optical diagnostics if available
                [ raw on|off ]
                [ hex on|off ]
                [ offset N ]
                [ length N ]
                [ page N ]
                [ bank N ]
                [ i2c N ]
        ethtool [ FLAGS ] --show-eee DEVNAME    Show EEE settings
        ethtool [ FLAGS ] --set-eee DEVNAME     Set EEE settings
                [ eee on|off ]
                [ advertise %x ]
                [ tx-lpi on|off ]
                [ tx-timer %d ]
        ethtool [ FLAGS ] --set-phy-tunable DEVNAME     Set PHY tunable
                [ downshift on|off [count N] ]
                [ fast-link-down on|off [msecs N] ]
                [ energy-detect-power-down on|off [msecs N] ]
        ethtool [ FLAGS ] --get-phy-tunable DEVNAME     Get PHY tunable
                [ downshift ]
                [ fast-link-down ]
                [ energy-detect-power-down ]
        ethtool [ FLAGS ] --get-tunable DEVNAME Get tunable
                [ rx-copybreak ]
                [ tx-copybreak ]
                [ pfc-precention-tout ]
        ethtool [ FLAGS ] --set-tunable DEVNAME Set tunable
                [ rx-copybreak N]
                [ tx-copybreak N]
                [ pfc-precention-tout N]
        ethtool [ FLAGS ] --reset DEVNAME       Reset components
                [ flags %x ]
                [ mgmt ]
                [ mgmt-shared ]
                [ irq ]
                [ irq-shared ]
                [ dma ]
                [ dma-shared ]
                [ filter ]
                [ filter-shared ]
                [ offload ]
                [ offload-shared ]
                [ mac ]
                [ mac-shared ]
                [ phy ]
                [ phy-shared ]
                [ ram ]
                [ ram-shared ]
                [ ap ]
                [ ap-shared ]
                [ dedicated ]
                [ all ]
        ethtool [ FLAGS ] --show-fec DEVNAME    Show FEC settings
        ethtool [ FLAGS ] --set-fec DEVNAME     Set FEC settings
                [ encoding auto|off|rs|baser|llrs [...]]
        ethtool [ FLAGS ] -Q|--per-queue DEVNAME        Apply per-queue command.
The supported sub commands include --show-coalesce, --coalesce             [queue_mask %x] SUB_COMMAND
        ethtool [ FLAGS ] --cable-test DEVNAME  Perform a cable test
        ethtool [ FLAGS ] --cable-test-tdr DEVNAME      Print cable test time domain reflectrometery data
                [ first N ]
                [ last N ]
                [ step N ]
                [ pair N ]
        ethtool [ FLAGS ] --show-tunnels DEVNAME        Show NIC tunnel offload information
        ethtool [ FLAGS ] -h|--help             Show this help
        ethtool [ FLAGS ] --version             Show version number
        ethtool --monitor               Show kernel notifications
                ( [ --all ]
                  | -s | --change
                  | -s | --change
                  | -s | --change
                  | -s | --change
                  | -k | --show-features | --show-offload | -K | --features | --offload
                  | --show-priv-flags | --set-priv-flags
                  | -g | --show-ring | -G | --set-ring
                  | -l | --show-channels | -L | --set-channels
                  | -c | --show-coalesce | -C | --coalesce
                  | -a | --show-pause | -A | --pause
                  | --show-eee | --set-eee
                  | --cable-test
                  | --cable-test-tdr )
                [ DEVNAME | * ]

FLAGS:
        --debug MASK    turn on debugging messages
        --json          enable JSON output format (not supported by all commands)
        -I|--include-statistics         request device statistics related to the command (not supported by all commands)
```

## 参数解析

### 显示标准信息

```bash
ethtool [ FLAGS ] DEVNAME
```
- **DEVNAME**: 网络设备名称，例如 `eth0`。

### 修改设备设置

```bash
ethtool [ FLAGS ] -s|--change DEVNAME
    [ speed %d ]
    [ lanes %d ]
    [ duplex half|full ]
    [ port tp|aui|bnc|mii|fibre|da ]
    [ mdix auto|on|off ]
    [ autoneg on|off ]
    [ advertise %x[/%x] | mode on|off ... [--] ]
    [ phyad %d ]
    [ xcvr internal|external ]
    [ wol %d[/%d] | p|u|m|b|a|g|s|f|d... ]
    [ sopass %x:%x:%x:%x:%x:%x ]
    [ msglvl %d[/%d] | type on|off ... [--] ]
    [ master-slave preferred-master|preferred-slave|forced-master|forced-slave ]
```
- **speed %d**: 设置网络接口的速度，单位为 Mbps（例如 1000 表示 1 Gbps）。
- **lanes %d**: 设置网络接口的通道数。
- **duplex half|full**: 设置网络接口的双工模式，`half` 表示半双工，`full` 表示全双工。
- **port tp|aui|bnc|mii|fibre|da**: 设置端口类型，包括 `tp`（双绞线）、`fibre`（光纤）等。
- **mdix auto|on|off**: 设置 MDIX 自动检测功能，`auto` 为自动，`on` 启用，`off` 禁用。
- **autoneg on|off**: 启用或禁用自动协商。
- **advertise %x[/%x]**: 设置广告能力，表示网络接口能够支持的速率和功能。
- **phyad %d**: 设置 PHY 设备的地址。
- **xcvr internal|external**: 设置收发器类型，`internal` 表示内部，`external` 表示外部。
- **wol %d[/%d]**: 设置 Wake-on-LAN 功能，`p`（魔术包），`u`（无效的包），`m`（多播），`b`（广播），`a`（ARPs），`g`（组播），`s`（省电），`f`（按键），`d`（DNS）等。
- **sopass %x:%x:%x:%x:%x:%x**: 设置 SOPASS 密码，用于安全认证。
- **msglvl %d[/%d]**: 设置消息级别，控制调试信息的详细程度。
- **master-slave preferred-master|preferred-slave|forced-master|forced-slave**: 设置主从模式，`preferred-master`（优先主设备），`preferred-slave`（优先从设备），`forced-master`（强制主设备），`forced-slave`（强制从设备）。

### 显示暂停选项

```bash
ethtool [ FLAGS ] -a|--show-pause DEVNAME
```
- 显示网络接口的暂停选项，包括是否启用接收和发送暂停。

### 设置暂停选项

```bash
ethtool [ FLAGS ] -A|--pause DEVNAME
    [ autoneg on|off ]
    [ rx on|off ]
    [ tx on|off ]
```
- **autoneg on|off**: 启用或禁用自动协商的暂停功能。
- **rx on|off**: 启用或禁用接收暂停。
- **tx on|off**: 启用或禁用发送暂停。

### 显示协作选项

```bash
ethtool [ FLAGS ] -c|--show-coalesce DEVNAME
```
- 显示网络接口的协作设置，包括接收和发送的延迟和帧数。

### 设置协作选项

```bash
ethtool [ FLAGS ] -C|--coalesce DEVNAME
    [ adaptive-rx on|off ]
    [ adaptive-tx on|off ]
    [ rx-usecs N ]
    [ rx-frames N ]
    [ rx-usecs-irq N ]
    [ rx-frames-irq N ]
    [ tx-usecs N ]
    [ tx-frames N ]
    [ tx-usecs-irq N ]
    [ tx-frames-irq N ]
    [ stats-block-usecs N ]
    [ pkt-rate-low N ]
    [ rx-usecs-low N ]
    [ rx-frames-low N ]
    [ tx-usecs-low N ]
    [ tx-frames-low N ]
    [ pkt-rate-high N ]
    [ rx-usecs-high N ]
    [ rx-frames-high N ]
    [ tx-usecs-high N ]
    [ tx-frames-high N ]
    [ sample-interval N ]
    [ cqe-mode-rx on|off ]
    [ cqe-mode-tx on|off ]
```
- **adaptive-rx on|off**: 启用或禁用自适应接收协作。
- **adaptive-tx on|off**: 启用或禁用自适应发送协作。
- **rx-usecs N**: 设置接收协作的时间延迟，单位为微秒。
- **rx-frames N**: 设置接收协作的帧数。
- **rx-usecs-irq N**: 设置接收协作的中断时间延迟，单位为微秒。
- **rx-frames-irq N**: 设置接收协作的中断帧数。
- **tx-usecs N**: 设置发送协作的时间延迟，单位为微秒。
- **tx-frames N**: 设置发送协作的帧数。
- **tx-usecs-irq N**: 设置发送协作的中断时间延迟，单位为微秒。
- **tx-frames-irq N**: 设置发送协作的中断帧数。
- **stats-block-usecs N**: 设置统计信息块的时间延迟，单位为微秒。
- **pkt-rate-low N**: 设置低数据包速率阈值。
- **rx-usecs-low N**: 设置低数据包速率下的接收延迟，单位为微秒。
- **rx-frames-low N**: 设置低数据包速率下的接收帧数。
- **tx-usecs-low N**: 设置低数据包速率下的发送延迟，单位为微秒。
- **tx-frames-low N**: 设置低数据包速率下的发送帧数。
- **pkt-rate-high N**: 设置高数据包速率阈值。
- **rx-usecs-high N**: 设置高数据包速率下的接收延迟，单位为微秒。
- **rx-frames-high N**: 设置高数据包速率下的接收帧数。
- **tx-usecs-high N**: 设置高数据包速率下的发送延迟，单位为微秒。
- **tx-frames-high N**: 设置高数据包速率下的发送帧数。
- **sample-interval N**: 设置样本间隔时间，单位为微秒。
- **cqe-mode-rx on|off**: 启用或禁用接收完成队列事件模式。
- **cqe-mode-tx on|off**: 启用或禁用发送完成队列事件模式。

### 显示RX/TX环参数

```bash
ethtool [ FLAGS ] -g|--show-ring DEVNAME
```
- 显示RX/TX环的参数，包括接收和发送的环大小。

### 设置RX/TX环参数

```bash
ethtool [ FLAGS ] -G|--set-ring DEVNAME
    [ rx N ]
    [ rx-mini N ]
    [ rx-jumbo N ]
    [ tx N ]
```
- **rx N**: 设置接收环的大小。
- **rx-mini N**: 设置接收迷你环的大小。
- **rx-jumbo N**: 设置接收超大帧环的大小。
- **tx N**: 设置发送环的大小。

### 显示协议卸载和其他功能状态

```bash
ethtool [ FLAGS ] -k|--show-features|--show-offload DEVNAME
```
- 显示网络接口的协议卸载功能和其他特性状态。

### 设置协议卸载和其他功能

```bash
ethtool [ FLAGS ] -K|--features|--offload DEVNAME
    FEATURE on|off ...
```
- **FEATURE on|off**: 启用或禁用特定的协议卸载功能，例如 `tso`（大段卸载）、`gro`（接收段合并）等。

### 显示驱动信息

```bash
ethtool [ FLAGS ] -i|--driver DEVNAME
```
- 显示网络接口的驱动程序信息。

### 显示EEPROM内容

```bash
ethtool [ FLAGS ] -e|--eeprom-dump DEVNAME
    [ raw

 on|off ]
    [ offset N ]
    [ length N ]
```
- **raw on|off**: 显示原始EEPROM内容或解码后的内容。
- **offset N**: 从EEPROM的指定偏移位置开始读取。
- **length N**: 读取的长度，单位为字节。

### 修改EEPROM内容

```bash
ethtool [ FLAGS ] -E|--change-eeprom DEVNAME
    [ magic N ]
    [ offset N ]
    [ length N ]
    [ value N ]
```
- **magic N**: EEPROM修改的魔术值。
- **offset N**: EEPROM中修改的位置。
- **length N**: 修改的长度，单位为字节。
- **value N**: 要写入的值。

### 重新启动协商

```bash
ethtool [ FLAGS ] -r|--negotiate DEVNAME
```
- 重新启动网络接口的自动协商过程。

### 显示端口识别

```bash
ethtool [ FLAGS ] -p|--identify DEVNAME
    [ TIME-IN-SECONDS ]
```
- **TIME-IN-SECONDS**: 端口识别的持续时间，以秒为单位。

### 执行适配器自测

```bash
ethtool [ FLAGS ] -t|--test DEVNAME
    [ online | offline | external_lb ]
```
- **online**: 执行在线自测。
- **offline**: 执行离线自测。
- **external_lb**: 执行外部负载平衡自测。

### 显示适配器统计信息

```bash
ethtool [ FLAGS ] -S|--statistics DEVNAME
    [ --all-groups | --groups [eth-phy] [eth-mac] [eth-ctrl] [rmon] ]
```
- **--all-groups**: 显示所有统计信息组。
- **--groups [eth-phy] [eth-mac] [eth-ctrl] [rmon]**: 显示指定的统计信息组。

### 显示PHY统计信息

```bash
ethtool [ FLAGS ] --phy-statistics DEVNAME
```
- 显示网络接口的PHY统计信息。

### 显示网络流分类选项或规则

```bash
ethtool [ FLAGS ] -n|-u|--show-nfc|--show-ntuple DEVNAME
    [ rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6 [context %d] |
      rule %d ]
```
- **rx-flow-hash**: 显示接收流哈希的分类选项或规则。
- **context %d**: 指定上下文ID。
- **rule %d**: 显示特定的规则。

### 配置网络流分类选项或规则

```bash
ethtool [ FLAGS ] -N|-U|--config-nfc|--config-ntuple DEVNAME
    rx-flow-hash tcp4|udp4|ah4|esp4|sctp4|tcp6|udp6|ah6|esp6|sctp6 m|v|t|s|d|f|n|r... [context %d] |
    flow-type ether|ip4|tcp4|udp4|sctp4|ah4|esp4|ip6|tcp6|udp6|ah6|esp6|sctp6
        [ src %x:%x:%x:%x:%x:%x [m %x:%x:%x:%x:%x:%x] ]
        [ dst %x:%x:%x:%x:%x:%x [m %x:%x:%x:%x:%x:%x] ]
        [ proto %d [m %x] ]
        [ src-ip IP-ADDRESS [m IP-ADDRESS] ]
        [ dst-ip IP-ADDRESS [m IP-ADDRESS] ]
        [ tos %d [m %x] ]
        [ tclass %d [m %x] ]
        [ l4proto %d [m %x] ]
        [ src-port %d [m %x] ]
        [ dst-port %d [m %x] ]
        [ spi %d [m %x] ]
        [ vlan-etype %x [m %x] ]
        [ vlan %x [m %x] ]
        [ user-def %x [m %x] ]
        [ dst-mac %x:%x:%x:%x:%x:%x [m %x:%x:%x:%x:%x:%x] ]
        [ action %d ] | [ vf %d queue %d ]
        [ context %d ]
        [ loc %d]] |
    delete %d
```
- **rx-flow-hash**: 配置接收流哈希的选项或规则。
- **flow-type**: 配置流的类型，例如 `ether`（以太网）、`ip4`（IPv4）等。
- **src %x:%x:%x:%x:%x:%x**: 配置源MAC地址。
- **dst %x:%x:%x:%x:%x:%x**: 配置目标MAC地址。
- **proto %d**: 配置协议类型。
- **src-ip IP-ADDRESS**: 配置源IP地址。
- **dst-ip IP-ADDRESS**: 配置目标IP地址。
- **tos %d**: 配置服务类型字段。
- **tclass %d**: 配置流量类别字段。
- **l4proto %d**: 配置L4协议类型。
- **src-port %d**: 配置源端口。
- **dst-port %d**: 配置目标端口。
- **spi %d**: 配置安全参数索引。
- **vlan-etype %x**: 配置VLAN以太类型。
- **vlan %x**: 配置VLAN ID。
- **user-def %x**: 配置用户自定义字段。
- **dst-mac %x:%x:%x:%x:%x:%x**: 配置目标MAC地址。
- **action %d**: 配置操作类型。
- **vf %d queue %d**: 配置虚拟功能和队列。
- **context %d**: 配置上下文ID。
- **loc %d**: 配置位置ID。

### 显示时间戳功能

```bash
ethtool [ FLAGS ] -T|--show-time-stamping DEVNAME
```
- 显示网络接口的时间戳功能。

### 显示或设置RX流哈希间接表

```bash
ethtool [ FLAGS ] -x|--show-rxfh-indir|--show-rxfh DEVNAME
    [ context %d ]
```
- **context %d**: 显示特定上下文ID的RX流哈希间接表。

### 设置RX流哈希间接表

```bash
ethtool [ FLAGS ] -X|--set-rxfh-indir|--rxfh DEVNAME
    [ context %d|new ]
    [ equal N | weight W0 W1 ... | default ]
    [ hkey %x:%x:%x:%x:%x:.... ]
    [ hfunc FUNC ]
    [ delete ]
```
- **context %d|new**: 设置特定上下文ID或创建新上下文。
- **equal N**: 设置哈希分配的均等性。
- **weight W0 W1 ...**: 设置权重。
- **default**: 使用默认设置。
- **hkey %x:%x:%x:%x:%x:....**: 设置哈希密钥。
- **hfunc FUNC**: 设置哈希函数，例如 `basic`（基本）、`rss`（接收扩展哈希）。
- **delete**: 删除现有设置。

### 刷新固件

```bash
ethtool [ FLAGS ] -f|--flash DEVNAME
    FILENAME [ REGION-NUMBER-TO-FLASH ]
```
- **FILENAME**: 固件文件的路径。
- **REGION-NUMBER-TO-FLASH**: 指定要刷新的固件区域。

### 显示永久硬件地址

```bash
ethtool [ FLAGS ] -P|--show-permaddr DEVNAME
```
- 显示网络接口的永久硬件地址（MAC地址）。

### 获取设备转储标志

```bash
ethtool [ FLAGS ] -w|--get-dump DEVNAME
    [ data FILENAME ]
```
- **data FILENAME**: 指定存储转储数据的文件名。

### 设置设备转储标志

```bash
ethtool [ FLAGS ] -W|--set-dump DEVNAME
    N
```
- **N**: 设置转储标志的值。

### 显示通道信息

```bash
ethtool [ FLAGS ] -l|--show-channels DEVNAME
```
- 显示网络接口的通道信息，包括RX、TX和其他通道。

### 设置通道信息

```bash
ethtool [ FLAGS ] -L|--set-channels DEVNAME
    [ rx N ]
    [ tx N ]
    [ other N ]
    [ combined N ]
```
- **rx N**: 设置

接收通道的数量。
- **tx N**: 设置发送通道的数量。
- **other N**: 设置其他通道的数量。
- **combined N**: 设置合并通道的数量。
### 显示或设置私有标志

```bash
ethtool [ FLAGS ] --show-priv-flags DEVNAME
```
- 显示网络接口的私有标志。

```bash
ethtool [ FLAGS ] --set-priv-flags DEVNAME
    FLAG on|off ...
```
- **FLAG**: 私有标志名称。
- **on|off**: 启用或禁用该标志。

### 查询/解码模块EEPROM信息及光学诊断

```bash
ethtool [ FLAGS ] -m|--dump-module-eeprom|--module-info DEVNAME
    [ raw on|off ]
    [ hex on|off ]
    [ offset N ]
    [ length N ]
    [ page N ]
    [ bank N ]
    [ i2c N ]
```
- **raw on|off**: 显示原始模块EEPROM内容。
- **hex on|off**: 显示解码后的内容。
- **offset N**: 从指定的偏移位置开始读取。
- **length N**: 读取的长度，单位为字节。
- **page N**: 指定页码。
- **bank N**: 指定银行编号。
- **i2c N**: 指定I2C总线编号。

### 显示或设置节能以太网（EEE）设置

```bash
ethtool [ FLAGS ] --show-eee DEVNAME
```
- 显示网络接口的节能以太网（EEE）设置。

```bash
ethtool [ FLAGS ] --set-eee DEVNAME
    [ eee on|off ]
    [ advertise %x ]
    [ tx-lpi on|off ]
    [ tx-timer %d ]
```
- **eee on|off**: 启用或禁用节能以太网。
- **advertise %x**: 设置广告的EEE功能。
- **tx-lpi on|off**: 启用或禁用传输低功耗指示（LPI）。
- **tx-timer %d**: 设置传输LPI的定时器值。

### 设置PHY可调参数

```bash
ethtool [ FLAGS ] --set-phy-tunable DEVNAME
    [ downshift on|off [count N] ]
    [ fast-link-down on|off [msecs N] ]
    [ energy-detect-power-down on|off [msecs N] ]
```
- **downshift on|off**: 启用或禁用链路速率下降。
- **count N**: 下降计数。
- **fast-link-down on|off**: 启用或禁用快速链路关闭。
- **msecs N**: 关闭延迟时间，单位为毫秒。
- **energy-detect-power-down on|off**: 启用或禁用能源检测电源关闭。
- **msecs N**: 关闭延迟时间，单位为毫秒。

### 获取或设置可调参数

```bash
ethtool [ FLAGS ] --get-tunable DEVNAME
    [ rx-copybreak ]
    [ tx-copybreak ]
    [ pfc-precention-tout ]
```
- **rx-copybreak**: 获取接收数据包拷贝中断的阈值。
- **tx-copybreak**: 获取发送数据包拷贝中断的阈值。
- **pfc-precention-tout**: 获取优先级流量控制（PFC）预防超时。

```bash
ethtool [ FLAGS ] --set-tunable DEVNAME
    [ rx-copybreak N ]
    [ tx-copybreak N ]
    [ pfc-precention-tout N ]
```
- **rx-copybreak N**: 设置接收数据包拷贝中断的阈值。
- **tx-copybreak N**: 设置发送数据包拷贝中断的阈值。
- **pfc-precention-tout N**: 设置优先级流量控制（PFC）预防超时。

### 复位组件

```bash
ethtool [ FLAGS ] --reset DEVNAME
    [ flags %x ]
    [ mgmt ]
    [ mgmt-shared ]
    [ irq ]
    [ irq-shared ]
    [ dma ]
    [ dma-shared ]
    [ filter ]
    [ filter-shared ]
    [ offload ]
    [ offload-shared ]
    [ mac ]
    [ mac-shared ]
    [ phy ]
    [ phy-shared ]
    [ ram ]
    [ ram-shared ]
    [ ap ]
    [ ap-shared ]
    [ dedicated ]
    [ all ]
```
- **flags %x**: 指定要重置的标志。
- **mgmt**: 复位管理组件。
- **mgmt-shared**: 复位共享管理组件。
- **irq**: 复位中断请求（IRQ）组件。
- **irq-shared**: 复位共享中断请求（IRQ）组件。
- **dma**: 复位直接内存访问（DMA）组件。
- **dma-shared**: 复位共享直接内存访问（DMA）组件。
- **filter**: 复位过滤器组件。
- **filter-shared**: 复位共享过滤器组件。
- **offload**: 复位卸载功能组件。
- **offload-shared**: 复位共享卸载功能组件。
- **mac**: 复位MAC组件。
- **mac-shared**: 复位共享MAC组件。
- **phy**: 复位PHY组件。
- **phy-shared**: 复位共享PHY组件。
- **ram**: 复位RAM组件。
- **ram-shared**: 复位共享RAM组件。
- **ap**: 复位应用处理器（AP）组件。
- **ap-shared**: 复位共享应用处理器（AP）组件。
- **dedicated**: 复位专用组件。
- **all**: 复位所有组件。

### 显示前向纠错（FEC）设置

```bash
ethtool [ FLAGS ] --show-fec DEVNAME
```
- 显示网络接口的前向纠错（FEC）设置。

### 设置前向纠错（FEC）设置

```bash
ethtool [ FLAGS ] --set-fec DEVNAME
    [ encoding auto|off|rs|baser|llrs [...]]
```
- **encoding auto|off|rs|baser|llrs**: 设置FEC编码类型，例如 `auto`（自动）、`off`（关闭）、`rs`（Reed-Solomon）、`baser`（Base-R）等。

### 应用每队列命令

```bash
ethtool [ FLAGS ] -Q|--per-queue DEVNAME
    [queue_mask %x] SUB_COMMAND
```
- **queue_mask %x**: 指定队列掩码。
- **SUB_COMMAND**: 要应用的子命令，例如 `--show-coalesce`、`--coalesce` 等。

### 执行电缆测试

```bash
ethtool [ FLAGS ] --cable-test DEVNAME
```
- 执行网络电缆测试。

### 执行电缆测试时间域反射仪（TDR）

```bash
ethtool [ FLAGS ] --cable-test-tdr DEVNAME
    [ first N ]
    [ last N ]
    [ step N ]
    [ pair N ]
```
- **first N**: 测试的起始点。
- **last N**: 测试的结束点。
- **step N**: 步长值。
- **pair N**: 指定电缆对。

### 显示NIC隧道卸载信息

```bash
ethtool [ FLAGS ] --show-tunnels DEVNAME
```
- 显示网络接口卡（NIC）的隧道卸载信息。

### 显示帮助

```bash
ethtool [ FLAGS ] -h|--help
```
- 显示帮助信息。

### 显示版本号

```bash
ethtool [ FLAGS ] --version
```
- 显示ethtool的版本号。

### 显示内核通知

```bash
ethtool --monitor
    ( [ --all ]
      | -s | --change
      | -k | --show-features | --show-offload | -K | --features | --offload
      | --show-priv-flags | --set-priv-flags
      | -g | --show-ring | -G | --set-ring
      | -l | --show-channels | -L | --set-channels
      | -c | --show-coalesce | -C | --coalesce
      | -a | --show-pause | -A | --pause
      | --show-eee | --set-eee
      | --cable-test | --cable-test-tdr )
    [ DEVNAME | * ]
```
- **--all**: 显示所有通知。
- **-s | --change**: 显示更改通知。
- **-k | --show-features | --show-offload**: 显示特性或卸载通知。
- **-K | --features | --offload**:

 显示或设置特性或卸载通知。
- **--show-priv-flags | --set-priv-flags**: 显示或设置私有标志通知。
- **-g | --show-ring | -G | --set-ring**: 显示或设置环参数通知。
- **-l | --show-channels | -L | --set-channels**: 显示或设置通道参数通知。
- **-c | --show-coalesce | -C | --coalesce**: 显示或设置合并参数通知。
- **-a | --show-pause | -A | --pause**: 显示或设置暂停参数通知。
- **--show-eee | --set-eee**: 显示或设置EEE参数通知。
- **--cable-test | --cable-test-tdr**: 执行电缆测试或时间域反射仪测试通知。
- **DEVNAME**: 网络设备名称。
- **\***: 监视所有设备。

## 综合应用

### 设置设备的速度和双工模式

```bash
ethtool -s eth0 speed 1000 duplex full autoneg on
```
- 设置设备 `eth0` 的速度为 1000 Mbps，双工模式为全双工，自动协商启用。

### 显示并设置RX/TX环参数

```bash
ethtool -g eth0
ethtool -G eth0 rx 2048 tx 2048
```
- **ethtool -g eth0**: 显示 `eth0` 的 RX/TX 环参数。
- **ethtool -G eth0 rx 2048 tx 2048**: 设置 `eth0` 的 RX 环大小为 2048，TX 环大小为 2048。

### 显示设备的协作选项并设置

```bash
ethtool -c eth0
ethtool -C eth0 rx-usecs 100 tx-usecs 100
```
- **ethtool -c eth0**: 显示 `eth0` 的协作选项。
- **ethtool -C eth0 rx-usecs 100 tx-usecs 100**: 设置 `eth0` 的 RX 合并延迟为 100 微秒，TX 合并延迟为 100 微秒。

### 执行自测并显示统计信息

```bash
ethtool -t eth0 offline
ethtool -S eth0
```
- **ethtool -t eth0 offline**: 执行 `eth0` 的离线自测。
- **ethtool -S eth0**: 显示 `eth0` 的统计信息。

### 显示或设置前向纠错（FEC）设置

```bash
ethtool --show-fec eth0
ethtool --set-fec eth0 encoding rs
```
- **ethtool --show-fec eth0**: 显示 `eth0` 的前向纠错设置。
- **ethtool --set-fec eth0 encoding rs**: 设置 `eth0` 的前向纠错编码为 Reed-Solomon（RS）。

### 执行电缆测试

```bash
ethtool --cable-test eth0
```
- 执行 `eth0` 的电缆测试，检查电缆连接质量。

### 执行电缆测试时间域反射仪（TDR）

```bash
ethtool --cable-test-tdr eth0
```
- 执行 `eth0` 的电缆测试时间域反射仪（TDR），打印电缆测试数据。

### 重置设备的各个组件

```bash
ethtool --reset eth0 all
```
- 重置 `eth0` 的所有组件，包括管理、IRQ、DMA、MAC、PHY 等。

### 配置RX网络流分类选项或规则

```bash
ethtool -N eth0 rx-flow-hash tcp4 dst-port 80
```
- 配置 `eth0` 的 RX 网络流分类规则，基于 TCP 端口 80 进行流量哈希。

### 查询和设置PHY可调参数

```bash
ethtool --get-phy-tunable eth0 downshift
ethtool --set-phy-tunable eth0 downshift on count 10
```
- **ethtool --get-phy-tunable eth0 downshift**: 查询 `eth0` 的 PHY 可调参数下的速率下降设置。
- **ethtool --set-phy-tunable eth0 downshift on count 10**: 启用 `eth0` 的 PHY 速率下降，并设置下降计数为 10。

# nmcli
```bash
bash-5.1# nmcli --help
Usage: nmcli [OPTIONS] OBJECT { COMMAND | help }

OPTIONS
  -a, --ask                                ask for missing parameters
  -c, --colors auto|yes|no                 whether to use colors in output
  -e, --escape yes|no                      escape columns separators in values
  -f, --fields <field,...>|all|common      specify fields to output
  -g, --get-values <field,...>|all|common  shortcut for -m tabular -t -f
  -h, --help                               print this help
  -m, --mode tabular|multiline             output mode
  -o, --overview                           overview mode
  -p, --pretty                             pretty output
  -s, --show-secrets                       allow displaying passwords
  -t, --terse                              terse output
  -v, --version                            show program version
  -w, --wait <seconds>                     set timeout waiting for finishing operations

OBJECT
  g[eneral]       NetworkManager's general status and operations
  n[etworking]    overall networking control
  r[adio]         NetworkManager radio switches
  c[onnection]    NetworkManager's connections
  d[evice]        devices managed by NetworkManager
  a[gent]         NetworkManager secret agent or polkit agent
  m[onitor]       monitor NetworkManager changes
```

## 参数解析

### 显示帮助信息

```bash
nmcli --help
```

- `--help`：打印帮助信息。

### 显示版本信息

```bash
nmcli -v
```

- `-v`：显示程序版本。

### 请求缺失的参数

```bash
nmcli -a
```

- `-a, --ask`：请求用户输入缺失的参数。

### 使用颜色显示输出

```bash
nmcli -c yes g general
```

- `-c, --colors auto|yes|no`：设置输出中是否使用颜色。`yes` 表示启用颜色。

### 转义列分隔符

```bash
nmcli -e yes g general
```

- `-e, --escape yes|no`：设置是否转义列分隔符。`yes` 表示启用转义。

### 指定输出字段

```bash
nmcli -f NAME,UUID c show
```

- `-f, --fields <field,...>|all|common`：指定要输出的字段。例如，`NAME,UUID` 表示只输出 NAME 和 UUID 字段。

### 使用表格模式显示值

```bash
nmcli -g NAME,UUID c show
```

- `-g, --get-values <field,...>|all|common`：快捷方式，用于表格模式和指定字段的输出。例如，`NAME,UUID` 表示只显示 NAME 和 UUID 字段。

### 使用表格模式输出

```bash
nmcli -m tabular g general
```

- `-m, --mode tabular|multiline`：设置输出模式为表格或多行。`tabular` 表示表格模式。

### 显示概述模式

```bash
nmcli -o d status
```

- `-o, --overview`：显示概述模式。

### 美化输出

```bash
nmcli -p d status
```

- `-p, --pretty`：启用美化输出。

### 显示密码

```bash
nmcli -s c show my_wifi
```

- `-s, --show-secrets`：允许显示密码。

### 启用简洁输出

```bash
nmcli -t d status
```

- `-t, --terse`：启用简洁输出。

### 设置超时时间

```bash
nmcli -w 30 g general
```

- `-w, --wait <seconds>`：设置等待操作完成的超时时间（秒）。

## 综合应用

### 显示网络设备状态并使用颜色

```bash
nmcli -c yes -m tabular -t d status
```

- `-c yes`：启用颜色输出。
- `-m tabular`：设置输出模式为表格。
- `-t`：启用简洁输出。
- `d`：对象类型，查看设备状态。
- `status`：命令，显示设备状态。

### 显示所有连接的详细信息并请求缺失参数

```bash
nmcli -a -p c show
```

- `-a`：请求缺失的参数。
- `-p`：美化输出。
- `c`：对象类型，查看连接信息。
- `show`：命令，显示所有连接的详细信息。

## 对象类型

### 查看 NetworkManager 的一般状态和操作

```bash
nmcli g status
```

- `g, --general`：NetworkManager 的一般状态和操作。

### 控制网络

```bash
nmcli n status
```

- `n, --networking`：控制网络。

### 控制无线电开关

```bash
nmcli r wifi on
```

- `r, --radio`：控制 NetworkManager 无线电开关。

### 管理网络连接

```bash
nmcli c show
```

- `c, --connection`：管理 NetworkManager 的连接。

### 管理设备

```bash
nmcli d status
```

- `d, --device`：管理 NetworkManager 的设备。

### 管理 NetworkManager 密码代理或 polkit 代理

```bash
nmcli a status
```

- `a, --agent`：管理 NetworkManager 密码代理或 polkit 代理。

### 监控 NetworkManager 变化

```bash
nmcli m
```

- `m, --monitor`：监控 NetworkManager 变化。


# nc

# wget
```bash
bash-5.1# wget --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: wget [-cqS] [--spider] [-O FILE] [-o LOGFILE] [--header STR]
        [--post-data STR | --post-file FILE] [-Y on/off]
        [-P DIR] [-U AGENT] [-T SEC] URL...

Retrieve files via HTTP or FTP

        --spider        Only check URL existence: $? is 0 if exists
        --header STR    Add STR (of form 'header: value') to headers
        --post-data STR Send STR using POST method
        --post-file FILE        Send FILE using POST method
        -c              Continue retrieval of aborted transfer
        -q              Quiet
        -P DIR          Save to DIR (default .)
        -S              Show server response
        -T SEC          Network read timeout is SEC seconds
        -O FILE         Save to FILE ('-' for stdout)
        -o LOGFILE      Log messages to FILE
        -U STR          Use STR for User-Agent header
        -Y on/off       Use proxy
```
## 参数解析

### 继续下载中断的文件

```bash
wget -c http://example.com/file.zip
```

- `-c`：继续下载中断的传输。

### 安静模式下载文件

```bash
wget -q http://example.com/file.zip
```

- `-q`：静默模式，不显示进度或错误信息。

### 将下载内容保存到指定文件

```bash
wget -O downloaded_file.zip http://example.com/file.zip
```

- `-O FILE`：将下载的内容保存到指定文件 `FILE`，`-` 表示输出到标准输出。

### 将下载日志写入指定日志文件

```bash
wget -o download.log http://example.com/file.zip
```

- `-o LOGFILE`：将日志消息写入指定的日志文件 `LOGFILE`。

### 发送 POST 数据

```bash
wget --post-data "param1=value1&param2=value2" http://example.com/resource
```

- `--post-data STR`：使用 POST 方法发送数据 `STR`。

### 发送文件作为 POST 请求

```bash
wget --post-file file.txt http://example.com/upload
```

- `--post-file FILE`：使用 POST 方法发送文件 `FILE`。

### 仅检查 URL 是否存在

```bash
wget --spider http://example.com/file.zip
```

- `--spider`：仅检查 URL 是否存在，返回值为 0 表示存在。

### 设置请求的用户代理

```bash
wget -U "Mozilla/5.0" http://example.com/file.zip
```

- `-U AGENT`：使用指定的 `AGENT` 字符串作为用户代理头部。

### 设置网络读取超时

```bash
wget -T 30 http://example.com/file.zip
```

- `-T SEC`：设置网络读取超时为 `SEC` 秒。

### 添加自定义 HTTP 头

```bash
wget --header "Accept-Language: en" http://example.com/file.zip
```

- `--header STR`：添加自定义的 HTTP 头部 `STR`。

### 使用代理

```bash
wget -Y on http://example.com/file.zip
```

- `-Y on/off`：启用或禁用代理。

## 综合应用

### 继续下载中断的文件并保存到指定文件

```bash
wget -c -O file.zip http://example.com/file.zip
```

- `-c`：继续下载。
- `-O file.zip`：保存到 `file.zip`。

### 发送文件作为 POST 请求并记录日志

```bash
wget --post-file file.txt -o post.log http://example.com/upload
```

- `--post-file file.txt`：发送文件。
- `-o post.log`：记录日志到 `post.log`。

### 仅检查 URL 是否存在并输出日志

```bash
wget --spider -o spider.log http://example.com/file.zip
```

- `--spider`：检查 URL 是否存在。
- `-o spider.log`：记录日志到 `spider.log`。

# curl

# tcpdump
```bash
bash-5.1# tcpdump --help
tcpdump version 4.99.1
libpcap version 1.10.1 (with TPACKET_V3)
Usage: tcpdump [-AbdDefhHIJKlLnNOpqStuUvxX#] [ -B size ] [ -c count ] [--count]
                [ -C file_size ] [ -E algo:secret ] [ -F file ] [ -G seconds ]
                [ -i interface ] [ --immediate-mode ] [ -j tstamptype ]
                [ -M secret ] [ --number ] [ --print ] [ -Q in|out|inout ]
                [ -r file ] [ -s snaplen ] [ -T type ] [ --version ]
                [ -V file ] [ -w file ] [ -W filecount ] [ -y datalinktype ]
                [ --time-stamp-precision precision ] [ --micro ] [ --nano ]
                [ -z postrotate-command ] [ -Z user ] [ expression ]
```
## 参数解析

### 捕获所有网络流量并将结果保存到文件

```bash
tcpdump -w capture.pcap
```

- `-w file`：将捕获的数据包写入到指定的 `file` 中。

### 限制捕获的数据包数量

```bash
tcpdump -c 100 -w capture.pcap
```

- `-c count`：捕获指定数量的 `count` 数据包后停止。

### 在捕获时显示数据包的详细信息

```bash
tcpdump -v
```

- `-v`：增加详细级别，显示更详细的数据包信息。

### 监听特定接口上的流量

```bash
tcpdump -i eth0
```

- `-i interface`：指定要监听的网络接口 `interface`（如 `eth0`）。

### 读取捕获的文件并分析内容

```bash
tcpdump -r capture.pcap
```

- `-r file`：从指定的 `file` 中读取捕获的数据包进行分析。

### 限制捕获的最大数据包大小

```bash
tcpdump -s 64 -w capture.pcap
```

- `-s snaplen`：设置数据包的最大捕获长度为 `snaplen` 字节。

### 以指定格式显示数据包的时间戳

```bash
tcpdump --time-stamp-precision nano
```

- `--time-stamp-precision precision`：设置时间戳的精度，`precision` 可以是 `micro` 或 `nano`。

### 使用过滤表达式仅捕获特定流量

```bash
tcpdump 'tcp port 80'
```

- `expression`：指定过滤条件（如 `tcp port 80`）来捕获特定流量。

### 在捕获数据包时使用加密算法

```bash
tcpdump -E algo:secret
```

- `-E algo:secret`：使用指定的加密算法和密钥对捕获的数据包进行解密。

## 综合应用

### 捕获所有流量并保存到文件中，同时显示详细信息

```bash
tcpdump -v -w capture.pcap
```

- `-v`：显示详细信息。
- `-w capture.pcap`：保存捕获的数据包到 `capture.pcap` 文件中。

### 从文件读取捕获的数据包并限制显示的包数

```bash
tcpdump -r capture.pcap -c 50
```

- `-r capture.pcap`：从 `capture.pcap` 文件中读取数据包。
- `-c 50`：只显示前 50 个数据包。

### 捕获特定端口的流量并将结果保存到文件中

```bash
tcpdump 'port 443' -w port443_capture.pcap
```

- `'port 443'`：过滤出端口 443 的流量。
- `-w port443_capture.pcap`：将结果保存到 `port443_capture.pcap` 文件中。

# telenet
```bash
bash-5.1# telnet --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: telnet [-a] [-l USER] HOST [PORT]

Connect to telnet server

        -a      Automatic login with $USER variable
        -l USER Automatic login as USER
```

## 参数解析

### 自动登录

```bash
telnet -a HOST [PORT]
```

- `-a`：使用环境变量 `$USER` 进行自动登录。`HOST` 是目标主机地址，`PORT` 是可选的端口号。

### 指定用户登录

```bash
telnet -l USER HOST [PORT]
```

- `-l USER`：以指定的用户名 `USER` 自动登录。`HOST` 是目标主机地址，`PORT` 是可选的端口号。

## 综合应用

### 使用自动登录连接到 Telnet 服务器

```bash
telnet -a example.com
```

- 连接到 `example.com` 服务器，自动使用环境变量 `$USER` 中的用户名进行登录。

### 使用指定用户登录 Telnet 服务器

```bash
telnet -l admin example.com 23
```

- 连接到 `example.com` 服务器的端口 23，以用户名 `admin` 自动登录。

# ptp4l
```bash
bash-5.1# ptp4l --help
/usr/sbin/ptp4l: unrecognized option '--help'

usage: ptp4l [options]

 Delay Mechanism

 -A        Auto, starting with E2E
 -E        E2E, delay request-response (default)
 -P        P2P, peer delay mechanism

 Network Transport

 -2        IEEE 802.3
 -4        UDP IPV4 (default)
 -6        UDP IPV6

 Time Stamping

 -H        HARDWARE (default)
 -S        SOFTWARE
 -L        LEGACY HW

 Other Options

 -f [file] read configuration from 'file'
 -i [dev]  interface device to use, for example 'eth0'
           (may be specified multiple times)
 -p [dev]  Clock device to use, default auto
           (ignored for SOFTWARE/LEGACY HW time stamping)
 -s        client only synchronization mode (overrides configuration file)
 -l [num]  set the logging level to 'num'
 -m        print messages to stdout
 -q        do not print messages to the syslog
 -v        prints the software version and exits
 -h        prints this message and exits
```

## 参数解析

### 配置延迟机制

```bash
ptp4l -E
```

- `-E`：使用端到端（E2E）延迟机制（默认设置）。
- `-P`：使用对等延迟机制（P2P）。
- `-A`：自动选择延迟机制，默认从 E2E 开始。

### 配置网络传输

```bash
ptp4l -4
```

- `-2`：使用 IEEE 802.3 网络传输。
- `-4`：使用 UDP IPv4 网络传输（默认设置）。
- `-6`：使用 UDP IPv6 网络传输。

### 配置时间戳方式

```bash
ptp4l -H
```

- `-H`：使用硬件时间戳（默认设置）。
- `-S`：使用软件时间戳。
- `-L`：使用旧版硬件时间戳。

### 配置文件和设备

```bash
ptp4l -f /path/to/config/file
```

- `-f [file]`：从指定的配置文件 `file` 读取设置。
- `-i [dev]`：指定网络接口设备 `dev`（例如 `eth0`）。可以指定多个接口。
- `-p [dev]`：指定要使用的时钟设备 `dev`（对于软件/旧版硬件时间戳，忽略此选项）。

### 其他选项

```bash
ptp4l -s
```

- `-s`：启用客户端仅同步模式（覆盖配置文件中的设置）。
- `-l [num]`：将日志级别设置为 `num`（例如 `3`）。
- `-m`：将消息打印到标准输出。
- `-q`：不将消息打印到系统日志。
- `-v`：打印软件版本并退出。
- `-h`：打印帮助信息并退出。
- `-z [command]`：指定在日志轮换后执行的命令。
- `-Z [user]`：指定以 `user` 用户身份运行 `ptp4l`。

### 时间戳精度

```bash
ptp4l --time-stamp-precision micro
```

- `--time-stamp-precision [precision]`：设置时间戳的精度。可选值有 `micro`、`nano` 等。

### 网络接口模式

```bash
ptp4l --immediate-mode
```

- `--immediate-mode`：启用立即模式（通常用于测试或调试）。

## 综合应用

### 从配置文件读取设置并启用端到端（E2E）延迟机制

```bash
ptp4l -f /etc/ptp4l.conf -E
```

- `-f /etc/ptp4l.conf`：从 `/etc/ptp4l.conf` 配置文件读取设置。
- `-E`：启用端到端（E2E）延迟机制。

### 使用硬件时间戳并指定网络接口

```bash
ptp4l -H -i eth0
```

- `-H`：使用硬件时间戳。
- `-i eth0`：指定网络接口 `eth0`。

### 启用客户端仅同步模式并设置日志级别

```bash
ptp4l -s -l 2
```

- `-s`：启用客户端仅同步模式。
- `-l 2`：将日志级别设置为 `2`。

# testptp
```bash
bash-5.1# testptp --help
usage: testptp [options]
 -c         query the ptp clock's capabilities
 -d name    device to open
 -e val     read 'val' external time stamp events
 -f val     adjust the ptp clock frequency by 'val' ppb
 -g         get the ptp clock time
 -h         prints this message
 -i val     index for event/trigger
 -k val     measure the time offset between system and phc clock
            for 'val' times (Maximum 25)
 -l         list the current pin configuration
 -L pin,val configure pin index 'pin' with function 'val'
            the channel index is taken from the '-i' option
            'val' specifies the auxiliary function:
            0 - none
            1 - external time stamp
            2 - periodic output
 -p val     enable output with a period of 'val' nanoseconds
 -H val     set output phase to 'val' nanoseconds (requires -p)
 -w val     set output pulse width to 'val' nanoseconds (requires -p)
 -P val     enable or disable (val=1|0) the system clock PPS
 -s         set the ptp clock time from the system time
 -S         set the system time from the ptp clock time
 -t val     shift the ptp clock time by 'val' seconds
 -T val     set the ptp clock time to 'val' seconds
 -z         test combinations of rising/falling external time stamp flags
```

## 参数解析

### 查询 PTP 时钟的能力

```bash
testptp -c
```

- `-c`：查询 PTP 时钟的能力。

### 读取外部时间戳事件

```bash
testptp -e 10
```

- `-e val`：读取 `val` 个外部时间戳事件（例如 `10`）。

### 调整 PTP 时钟频率

```bash
testptp -f 100
```

- `-f val`：将 PTP 时钟的频率调整 `val` ppb（例如 `100`）。

### 获取 PTP 时钟时间

```bash
testptp -g
```

- `-g`：获取当前 PTP 时钟时间。

### 设置设备

```bash
testptp -d eth0
```

- `-d name`：指定要打开的设备（例如 `eth0`）。

### 测量系统和 PHC 时钟的时间偏移

```bash
testptp -k 10
```

- `-k val`：测量系统时钟和 PHC 时钟之间的时间偏移，测量 `val` 次（最大为 `25`）。

### 列出当前的引脚配置

```bash
testptp -l
```

- `-l`：列出当前引脚的配置。

### 配置引脚功能

```bash
testptp -L 1,2
```

- `-L pin,val`：将引脚索引 `pin` 配置为功能 `val`（例如 `1` 配置为外部时间戳，`2` 配置为周期输出）。引脚通道索引由 `-i` 选项指定。

### 启用周期性输出

```bash
testptp -p 1000000
```

- `-p val`：启用周期性输出，周期为 `val` 纳秒（例如 `1000000` 纳秒）。

### 设置输出相位

```bash
testptp -H 500
```

- `-H val`：将输出相位设置为 `val` 纳秒（例如 `500` 纳秒）。此选项要求使用 `-p` 选项。

### 设置输出脉冲宽度

```bash
testptp -w 1000
```

- `-w val`：将输出脉冲宽度设置为 `val` 纳秒（例如 `1000` 纳秒）。此选项要求使用 `-p` 选项。

### 启用或禁用系统时钟 PPS

```bash
testptp -P 1
```

- `-P val`：启用或禁用系统时钟 PPS。`val` 为 `1` 启用，`0` 禁用（例如 `1` 启用）。

### 从系统时间设置 PTP 时钟时间

```bash
testptp -s
```

- `-s`：从系统时间设置 PTP 时钟时间。

### 从 PTP 时钟时间设置系统时间

```bash
testptp -S
```

- `-S`：从 PTP 时钟时间设置系统时间。

### 将 PTP 时钟时间偏移

```bash
testptp -t 5
```

- `-t val`：将 PTP 时钟时间偏移 `val` 秒（例如 `5` 秒）。

### 设置 PTP 时钟时间

```bash
testptp -T 1625168400
```

- `-T val`：将 PTP 时钟时间设置为 `val` 秒（例如 `1625168400` 秒）。

### 测试外部时间戳标志的组合

```bash
testptp -z
```

- `-z`：测试外部时间戳标志的上升/下降组合。

## 综合应用

### 设置设备并查询 PTP 时钟的能力

```bash
testptp -d eth0 -c
```

- `-d eth0`：指定设备 `eth0`。
- `-c`：查询 PTP 时钟的能力。

### 调整 PTP 时钟频率并启用周期性输出

```bash
testptp -f 50 -p 1000000
```

- `-f 50`：将 PTP 时钟频率调整为 `50` ppb。
- `-p 1000000`：启用周期性输出，周期为 `1000000` 纳秒。

### 配置引脚功能并设置输出相位

```bash
testptp -L 2,1 -H 250
```

- `-L 2,1`：将引脚索引 `2` 配置为外部时间戳。
- `-H 250`：将输出相位设置为 `250` 纳秒。

# ppstest
```bash

```

# pppd
```bash
bash-5.1# pppd --help
ppp v2.5.0
Copyright (C) 1999-2022 Paul Mackerras, and others. All rights reserved.

License BSD: The 3 clause BSD license <https://opensource.org/licenses/BSD-3-Clause>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Report Bugs:
   https://github.com/ppp-project/ppp

Usage: /usr/bin/pppd [ options ], where options are:
   <device>        Communicate over the named device
   <speed>         Set the baud rate to <speed>
   <loc>:<rem>     Set the local and/or remote interface IP
                   addresses.  Either one may be omitted.
   asyncmap <n>    Set the desired async map to hex <n>
   auth            Require authentication from peer
   connect <p>     Invoke shell command <p> to set up the serial line
   crtscts         Use hardware RTS/CTS flow control
   defaultroute    Add default route through interface
   file <f>        Take options from file <f>
   modem           Use modem control lines
   mru <n>         Set MRU value to <n> for negotiation
   show-options    Display an extended list of options
See pppd(8) for more options.
```

## 参数解析

### 配置设备和速率

```bash
pppd /dev/ttyS0 115200
```

- `<device>`：设置通信设备，例如 `/dev/ttyS0`。
- `<speed>`：设置波特率，例如 `115200`。

### 设置本地和远程接口 IP 地址

```bash
pppd 192.168.1.1:192.168.1.2
```

- `<loc>:<rem>`：设置本地和/或远程接口 IP 地址。

### 配置异步映射

```bash
pppd asyncmap 0
```

- `asyncmap <n>`：设置所需的异步映射为十六进制值 `<n>`。

### 启用身份验证

```bash
pppd auth
```

- `auth`：要求对等方进行身份验证。

### 配置连接命令

```bash
pppd connect 'chat -v -f /etc/ppp/chat-script'
```

- `connect <p>`：执行 shell 命令 `<p>` 来设置串行线，例如使用 `chat` 脚本。

### 使用硬件流量控制

```bash
pppd crtscts
```

- `crtscts`：使用硬件 RTS/CTS 流量控制。

### 添加默认路由

```bash
pppd defaultroute
```

- `defaultroute`：通过接口添加默认路由。

### 从文件读取选项

```bash
pppd file /etc/ppp/options
```

- `file <f>`：从文件 `<f>` 读取选项。

### 使用调制解调器控制线

```bash
pppd modem
```

- `modem`：使用调制解调器控制线。

### 设置 MRU 值

```bash
pppd mru 1500
```

- `mru <n>`：将 MRU 值设置为 `<n>` 进行协商。

### 显示选项

```bash
pppd show-options
```

- `show-options`：显示扩展的选项列表。

## 综合应用

### 配置 PPP 连接

```bash
pppd /dev/ttyS0 115200 192.168.1.1:192.168.1.2 auth crtscts defaultroute
```

- `/dev/ttyS0`：通信设备。
- `115200`：波特率。
- `192.168.1.1:192.168.1.2`：本地和远程接口 IP 地址。
- `auth`：启用身份验证。
- `crtscts`：使用硬件流量控制。
- `defaultroute`：添加默认路由。

### 从配置文件启动 PPP 连接

```bash
pppd file /etc/ppp/options
```

- `file /etc/ppp/options`：从指定的配置文件 `/etc/ppp/options` 读取选项并启动 PPP 连接。

# pppstats
```bash
bash-5.1# pppstats --help
Usage: pppstats [-a|-d] [-v|-r|-z] [-c count] [-w wait] [interface]
```

## 参数解析

### 显示所有 PPP 接口统计信息

```bash
pppstats -a
```

- `-a`：显示所有 PPP 接口的统计信息。

### 显示统计信息的详细模式

```bash
pppstats -d
```

- `-d`：以详细模式显示 PPP 接口统计信息。

### 显示 PPP 接口的版本信息

```bash
pppstats -v
```

- `-v`：显示 PPP 接口的版本信息。

### 以原始模式显示统计信息

```bash
pppstats -r
```

- `-r`：以原始模式显示统计信息。

### 显示统计信息的压缩模式

```bash
pppstats -z
```

- `-z`：以压缩模式显示统计信息。

### 设置显示统计信息的次数

```bash
pppstats -c 10
```

- `-c count`：设置统计信息显示的次数为 `count`。

### 设置等待时间

```bash
pppstats -w 5
```

- `-w wait`：设置等待时间为 `wait` 秒。

### 显示特定接口的统计信息

```bash
pppstats ppp0
```

- `interface`：指定接口（例如 `ppp0`）以显示其统计信息。

## 综合应用

### 查看所有接口的详细 PPP 统计信息

```bash
pppstats -a -d
```

- `-a`：显示所有 PPP 接口的统计信息。
- `-d`：以详细模式显示。

### 每 10 秒显示 PPP 接口的原始统计信息，显示 5 次

```bash
pppstats -r -w 10 -c 5
```

- `-r`：以原始模式显示统计信息。
- `-w 10`：每 10 秒刷新一次。
- `-c 5`：显示统计信息 5 次。

# pppdump
```bash
bash-5.1# pppdump --help
Usage: /usr/bin/pppdump [-h | -p[d]] [-r] [-m mru] [-a] [file ...]
```
## 参数解析

### 显示帮助信息

```bash
pppdump -h
```

- `-h`：显示帮助信息。

### 打印所有数据包的详细信息

```bash
pppdump -p
```

- `-p`：打印所有数据包的详细信息。

### 打印数据包的摘要信息

```bash
pppdump -pd
```

- `-pd`：打印数据包的摘要信息。

### 以 MRU 过滤数据包

```bash
pppdump -m 1500
```

- `-m mru`：设置最大接收单元（MRU）为 `mru`，用于过滤数据包。

### 显示所有数据

```bash
pppdump -a
```

- `-a`：显示所有数据，不进行任何过滤。

### 从文件读取数据

```bash
pppdump file1 file2
```

- `file ...`：指定要读取的文件列表。可以列出一个或多个文件。

### 只显示接收的数据

```bash
pppdump -r
```

- `-r`：只显示接收的数据。

## 综合应用

### 显示帮助信息和数据包的详细信息

```bash
pppdump -h -p
```

- `-h`：显示帮助信息。
- `-p`：打印所有数据包的详细信息。

### 从指定文件读取数据，设置 MRU 为 1500，并显示所有数据

```bash
pppdump -m 1500 -a file1 file2
```

- `-m 1500`：设置 MRU 为 1500。
- `-a`：显示所有数据。
- `file1 file2`：指定要读取的文件列表。

# vconfig
```bash
bash-5.1# vconfig --help
BusyBox v1.35.0 (2024-07-20 11:38:35 CST) multi-call binary.

Usage: vconfig COMMAND [OPTIONS]

Create and remove virtual ethernet devices

        add IFACE VLAN_ID
        rem VLAN_NAME
        set_flag IFACE 0|1 VLAN_QOS
        set_egress_map VLAN_NAME SKB_PRIO VLAN_QOS
        set_ingress_map VLAN_NAME SKB_PRIO VLAN_QOS
        set_name_type NAME_TYPE
```

## 参数解析

### 添加 VLAN 接口

```bash
vconfig add IFACE VLAN_ID
```

- `add IFACE VLAN_ID`：创建一个新的 VLAN 接口，其中 `IFACE` 是物理接口名称，`VLAN_ID` 是 VLAN 标识符。

### 删除 VLAN 接口

```bash
vconfig rem VLAN_NAME
```

- `rem VLAN_NAME`：删除指定的 VLAN 接口，`VLAN_NAME` 是 VLAN 接口名称。

### 设置 VLAN 标志

```bash
vconfig set_flag IFACE 0|1 VLAN_QOS
```

- `set_flag IFACE 0|1 VLAN_QOS`：设置 VLAN 标志。`IFACE` 是 VLAN 接口，`0|1` 表示禁用或启用标志，`VLAN_QOS` 是 QoS 标志。

### 设置 VLAN 的出接口优先级映射

```bash
vconfig set_egress_map VLAN_NAME SKB_PRIO VLAN_QOS
```

- `set_egress_map VLAN_NAME SKB_PRIO VLAN_QOS`：设置 VLAN 接口的出接口优先级映射。`VLAN_NAME` 是 VLAN 接口名称，`SKB_PRIO` 是 SKB 优先级，`VLAN_QOS` 是 VLAN QoS 级别。

### 设置 VLAN 的入接口优先级映射

```bash
vconfig set_ingress_map VLAN_NAME SKB_PRIO VLAN_QOS
```

- `set_ingress_map VLAN_NAME SKB_PRIO VLAN_QOS`：设置 VLAN 接口的入接口优先级映射。`VLAN_NAME` 是 VLAN 接口名称，`SKB_PRIO` 是 SKB 优先级，`VLAN_QOS` 是 VLAN QoS 级别。

### 设置 VLAN 名称类型

```bash
vconfig set_name_type NAME_TYPE
```

- `set_name_type NAME_TYPE`：设置 VLAN 名称类型。`NAME_TYPE` 可以是不同的 VLAN 名称类型，如 `0`（默认类型）或其他特定类型。

## 综合应用

### 添加 VLAN 接口并设置 VLAN 标志

```bash
vconfig add eth0 100
vconfig set_flag eth0 1 0
```

- `add eth0 100`：在 `eth0` 接口上添加 VLAN ID 为 100 的 VLAN。
- `set_flag eth0 1 0`：为 VLAN 接口 `eth0` 启用 QoS 标志。

### 删除 VLAN 接口并设置优先级映射

```bash
vconfig rem eth0.100
vconfig set_egress_map eth0.100 5 1
vconfig set_ingress_map eth0.100 5 1
```

- `rem eth0.100`：删除 `eth0` 接口上的 VLAN 100。
- `set_egress_map eth0.100 5 1`：设置 `eth0.100` 的出接口优先级映射。
- `set_ingress_map eth0.100 5 1`：设置 `eth0.100` 的入接口优先级映射。

# switch-config
```bash

```

