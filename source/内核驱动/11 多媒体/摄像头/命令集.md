# media-ctl
```bash
bash-5.1# media-ctl --help
/usr/bin/media-ctl [options]
-d, --device dev        Media device name (default: /dev/media0)
                        If <dev> starts with a digit, then /dev/media<dev> is used.
                        If <dev> doesn't exist, then find a media device that
                        reports a bus info string equal to <dev>.
-e, --entity name       Print the device name associated with the given entity
-V, --set-v4l2 v4l2     Comma-separated list of formats to setup
    --get-v4l2 pad      Print the active format on a given pad
    --get-dv pad        Print detected and current DV timings on a given pad
    --set-dv pad        Configure DV timings on a given pad
-h, --help              Show verbose help and exit
-i, --interactive       Modify links interactively
-l, --links links       Comma-separated list of link descriptors to setup
    --known-mbus-fmts   List known media bus formats and their numeric values
-p, --print-topology    Print the device topology. If an entity
                        is specified through the -e option, print
                        information for that entity only.
    --print-dot         Print the device topology as a dot graph
-r, --reset             Reset all links to inactive
-v, --verbose           Be verbose
    --version           Show version information

Links and formats are defined as
        links           = link { ',' link } ;
        link            = pad '->' pad '[' flags ']' ;
        pad             = entity ':' pad-number ;
        entity          = entity-number | ( '"' entity-name '"' ) ;

        v4l2            = pad '[' v4l2-properties ']' ;
        v4l2-properties = v4l2-property { ',' v4l2-property } ;
        v4l2-property   = v4l2-mbusfmt | v4l2-crop | v4l2-interval
                        | v4l2-compose | v4l2-interval ;
        v4l2-mbusfmt    = 'fmt:' fcc '/' size ; { 'field:' v4l2-field ; } { 'colorspace:' v4l2-colorspace ; }
                           { 'xfer:' v4l2-xfer-func ; } { 'ycbcr:' v4l2-ycbcr-enc ; }
                           { 'quantization:' v4l2-quant ; }
        v4l2-crop       = 'crop:' rectangle ;
        v4l2-compose    = 'compose:' rectangle ;
        v4l2-interval   = '@' numerator '/' denominator ;

        rectangle       = '(' left ',' top, ')' '/' size ;
        size            = width 'x' height ;

where the fields are
        entity-number   Entity numeric identifier
        entity-name     Entity name (string)
        pad-number      Pad numeric identifier
        flags           Link flags (0: inactive, 1: active)
        fcc             Format FourCC
        width           Image width in pixels
        height          Image height in pixels
        numerator       Frame interval numerator
        denominator     Frame interval denominator
        v4l2-field      One of the following:
                        any
                        none
                        top
                        bottom
                        interlaced
                        seq-tb
                        seq-bt
                        alternate
                        interlaced-tb
                        interlaced-bt
        v4l2-colorspace One of the following:
                        default
                        smpte170m
                        smpte240m
                        rec709
                        unknown
                        470m
                        470bg
                        jpeg
                        srgb
                        oprgb
                        bt2020
                        raw
                        dcip3
        v4l2-xfer-func  One of the following:
                        default
                        709
                        srgb
                        oprgb
                        smpte240m
                        none
                        dcip3
                        smpte2084
        v4l2-quant      One of the following:
                        default
                        full-range
                        lim-range
        v4l2-ycbcr-enc  One of the following:
                        default
                        601
                        709
                        xv601
                        xv709
                        unknown
                        bt2020
                        bt2020c
                        smpte240m
```

## 参数解析

### 指定媒体设备

```bash
media-ctl -d /dev/media0
```

### 打印给定实体的设备名称

```bash
media-ctl -e 0x0001
```

### 设置 V4L2 格式

```bash
media-ctl -V 0x0001:fmt:YUYV/1280x720
```

### 获取 V4L2 格式

```bash
media-ctl --get-v4l2 0x0001:0
```

### 获取和设置 DV 时序

```bash
media-ctl --get-dv 0x0001:0
media-ctl --set-dv 0x0001:0
```

### 显示帮助信息

```bash
media-ctl -h
```

### 交互式修改链接

```bash
media-ctl -i
```

### 设置链接

```bash
media-ctl -l 0x0001:0->0x0002:0[1]
```

### 列出已知的媒体总线格式

```bash
media-ctl --known-mbus-fmts
```

### 打印设备拓扑

```bash
media-ctl -p
```

### 打印设备拓扑为 dot 图形

```bash
media-ctl --print-dot
```

### 重置所有链接为非激活状态

```bash
media-ctl -r
```

### 显示版本信息

```bash
media-ctl --version
```

### 链接定义

```bash
media-ctl -l 0x0001:0->0x0002:0[1],0x0002:1->0x0003:0
```

### V4L2 格式定义

```bash
media-ctl -V 0x0001:fmt:YUYV/1280x720:field:interlaced:colorspace:rec709
```

## 综合应用

### 设置视频流格式

假设我们想要设置一个视频源（entity 0x0001）到一个视频编码器（entity 0x0002），我们可以定义链接和格式如下：

```bash
media-ctl -l 0x0001:0->0x0002:0[1] -V 0x0001:fmt:YUYV/1280x720:colorspace:rec709
```

### 查看和设置视频流

如果我们要查看和设置视频流，可以使用以下命令：

```bash
media-ctl -V 0x0001:fmt:YUYV/1280x720:colorspace:rec709
media-ctl --get-v4l2 0x0001:0
```

### 重置所有链接并打印设备拓扑

如果要重置所有链接并打印设备拓扑，可以执行以下命令：

```bash
media-ctl -r
media-ctl -p
```


# v4l2

## v4l2-ctl
```bash
bash-5.1# v4l2-ctl --help

General/Common options:
  --all              display all information available
  -C, --get-ctrl <ctrl>[,<ctrl>...]
                     get the value of the controls [VIDIOC_G_EXT_CTRLS]
  -c, --set-ctrl <ctrl>=<val>[,<ctrl>=<val>...]
                     set the value of the controls [VIDIOC_S_EXT_CTRLS]
  -D, --info         show driver info [VIDIOC_QUERYCAP]
  -d, --device <dev> use device <dev> instead of /dev/video0
                     if <dev> starts with a digit, then /dev/video<dev> is used
                     Otherwise if -z was specified earlier, then <dev> is the entity name
                     or interface ID (if prefixed with 0x) as found in the topology of the
                     media device with the bus info string as specified by the -z option.
  -e, --out-device <dev> use device <dev> for output streams instead of the
                     default device as set with --device
                     if <dev> starts with a digit, then /dev/video<dev> is used
                     Otherwise if -z was specified earlier, then <dev> is the entity name
                     or interface ID (if prefixed with 0x) as found in the topology of the
                     media device with the bus info string as specified by the -z option.
  -E, --export-device <dev> use device <dev> for exporting DMA buffers
                     if <dev> starts with a digit, then /dev/video<dev> is used
                     Otherwise if -z was specified earlier, then <dev> is the entity name
                     or interface ID (if prefixed with 0x) as found in the topology of the
                     media device with the bus info string as specified by the -z option.
  -z, --media-bus-info <bus-info>
                     find the media device with the given bus info string. If set, then
                     -d, -e and -E options can use the entity name or interface ID to refer
                     to the device nodes.
  -h, --help         display this help message
  --help-all         all options
  --help-io          input/output options
  --help-meta        metadata format options
  --help-misc        miscellaneous options
  --help-overlay     overlay format options
  --help-sdr         SDR format options
  --help-selection   crop/selection options
  --help-stds        standards and other video timings options
  --help-streaming   streaming options
  --help-subdev      sub-device options
  --help-tuner       tuner/modulator options
  --help-vbi         VBI format options
  --help-vidcap      video capture format options
  --help-vidout      vidout output format options
  --help-edid        edid handling options
  -k, --concise      be more concise if possible.
  -l, --list-ctrls   display all controls and their values [VIDIOC_QUERYCTRL]
  -L, --list-ctrls-menus
                     display all controls and their menus [VIDIOC_QUERYMENU]
  -r, --subset <ctrl>[,<offset>,<size>]+
                     the subset of the N-dimensional array to get/set for control <ctrl>,
                     for every dimension an (<offset>, <size>) tuple is given.
  -w, --wrapper      use the libv4l2 wrapper library.
  --list-devices     list all v4l devices. If -z was given, then list just the
                     devices of the media device with the bus info string as
                     specified by the -z option.
  --log-status       log the board status in the kernel log [VIDIOC_LOG_STATUS]
  --get-priority     query the current access priority [VIDIOC_G_PRIORITY]
  --set-priority <prio>
                     set the new access priority [VIDIOC_S_PRIORITY]
                     <prio> is 1 (background), 2 (interactive) or 3 (record)
  --silent           only set the result code, do not print any messages
  --sleep <secs>     sleep <secs>, call QUERYCAP and close the file handle
  --verbose          turn on verbose ioctl status reporting
  --version          show version information
```


### 参数解析

#### 显示所有可用的信息

```bash
v4l2-ctl --all
```

#### 获取控制项的值

```bash
v4l2-ctl -C brightness,contrast
```

#### 设置控制项的值

```bash
v4l2-ctl -c brightness=50,contrast=100
```

#### 显示驱动信息

```bash
v4l2-ctl -D
```

#### 指定设备

```bash
v4l2-ctl -d /dev/video0
```

#### 指定输出设备

```bash
v4l2-ctl -e /dev/video1
```

#### 指定用于导出DMA缓冲区的设备

```bash
v4l2-ctl -E /dev/video2
```

#### 使用媒体总线信息查找媒体设备

```bahs
v4l2-ctl -z pci-0000:00:1f.3
```

#### 显示帮助信息

```bash
v4l2-ctl -h
```

#### 显示所有选项的帮助信息

```bash
v4l2-ctl --help-all
```

#### 显示输入/输出选项的帮助信息

```bash
v4l2-ctl --help-io
```

#### 显示元数据格式选项的帮助信息

```bash
v4l2-ctl --help-meta
```

#### 显示杂项选项的帮助信息

```bash
v4l2-ctl --help-misc
```

#### 显示覆盖格式选项的帮助信息

```bash
v4l2-ctl --help-overlay
```

#### 显示SDR格式选项的帮助信息

```bash
v4l2-ctl --help-sdr
```

#### 显示裁剪/选择选项的帮助信息

```bash
v4l2-ctl --help-selection
```

#### 显示标准和其他视频定时选项的帮助信息

```bash
v4l2-ctl --help-stds
```

#### 显示流选项的帮助信息

```bash
v4l2-ctl --help-streaming
```

#### 显示子设备选项的帮助信息

```bash
v4l2-ctl --help-subdev
```

#### 显示调谐器/调制器选项的帮助信息

```bash
v4l2-ctl --help-tuner
```

#### 显示VBI格式选项的帮助信息

```bash
v4l2-ctl --help-vbi
```

#### 显示视频捕获格式选项的帮助信息

```bash
v4l2-ctl --help-vidcap
```

#### 显示视频输出格式选项的帮助信息

```bash
v4l2-ctl --help-vidout
```

#### 显示EDID处理选项的帮助信息

```bash
v4l2-ctl --help-edid
```

#### 更简洁的输出

```bash
v4l2-ctl -k
```

#### 列出所有控制项及其值

```bash
v4l2-ctl -l
```

#### 列出所有控制项及其菜单

```bash
v4l2-ctl -L
```

#### 指定控制项的子集

```bahs
v4l2-ctl -r brightness,0,1
```

#### 使用libv4l2包装库

```bash
v4l2-ctl -w
```

#### 列出所有V4L设备

```bash
v4l2-ctl --list-devices
```

#### 记录板载状态到内核日志

```bash
v4l2-ctl --log-status
```

#### 获取当前访问优先级

```bash
v4l2-ctl --get-priority
```

#### 设置新的访问优先级

```bash
v4l2-ctl --set-priority 2
```

#### 只设置返回码，不打印任何消息

```bash
v4l2-ctl --silent
```

#### 睡眠指定秒数后关闭文件句柄

```bash
v4l2-ctl --sleep 10
```

#### 显示详细ioctl状态报告

```bash
v4l2-ctl --verbose
```

#### 显示版本信息

```bash
v4l2-ctl --version
```


### 综合应用


####  获取和设置亮度和对比度控制

获取设备的亮度和对比度控制值：

```bash
v4l2-ctl -C brightness,contrast
```

设置设备的亮度和对比度控制值：

```bash
v4l2-ctl -c brightness=50,contrast=100
```

####  列出所有V4L设备

列出系统中所有的V4L设备：

```bash
v4l2-ctl --list-devices
```

####  获取设备信息

获取指定设备（例如 `/dev/video0`）的信息：

```bash
v4l2-ctl -D -d /dev/video0
```

####  设置设备优先级

设置设备的访问优先级为互动模式：

```bash
v4l2-ctl --set-priority 2 -d /dev/video0
```

####  列出所有控制项及其值

列出指定设备的所有控制项及其当前值：

```bash
v4l2-ctl -l -d /dev/video0
```

####  控制项子集的设置

假设你有一个多维数组控制项，比如一个3x3矩阵，你想设置第2行第2列的值为100：

```bash
v4l2-ctl -c my_matrix[1,1]=100 -d /dev/video0
```


## v4l2_capture


### 参数解析

#### 指定视频设备

```bash
v4l2_capture -d /dev/video0
```

#### 设置捕获格式

```bash
v4l2_capture -f YUYV
```

#### 设置捕获分辨率

```bash
v4l2_capture -s 640x480
```

#### 设置捕获帧率

```bash
v4l2_capture -r 30
```

#### 设置输出文件

```bash
v4l2_capture -o output.yuv
```

#### 设置捕获持续时间

```bash
v4l2_capture -t 10
```

#### 显示帮助信息

```bash
v4l2_capture --help
```

#### 显示版本信息

```bash
v4l2_capture --version
```

#### 捕获视频流

```bash
v4l2_capture -d /dev/video0 -f YUYV -s 640x480 -r 30 -o output.yuv -t 10
```

### 其他选项

#### 设置缓冲区大小

```bash
v4l2_capture -b 1024000
```

#### 设置循环捕获

```bash
v4l2_capture -l
```

#### 设置缓冲区数量

```bash
v4l2_capture -n 4
```

#### 设置内存映射

```bahs
v4l2_capture -m
```

#### 设置非阻塞模式

```bash
v4l2_capture -N
```

#### 设置视频流类型

```bash
v4l2_capture -T
```

#### 显示设备能力

```bash
v4l2_capture -C
```

#### 设置控制参数

```bash
v4l2_capture -c brightness=50,contrast=100
```

#### 显示控制参数

```bash
v4l2_capture -l
```

#### 捕获并实时播放

```bash
v4l2_capture -d /dev/video0 -f YUYV -s 640x480 -r 30 -o - | v4l2_play -
```

### 综合应用

#### 捕获并保存视频

捕获来自 `/dev/video0` 的视频流，并将其保存为 YUV 文件，持续时间为 10 秒：

```bash
v4l2_capture -d /dev/video0 -f YUYV -s 640x480 -r 30 -o output.yuv -t 10
```

#### 捕获并实时播放

捕获来自 `/dev/video0` 的视频流，并使用 `v4l2_play` 实时播放：

```bash
v4l2_capture -d /dev/video0 -f YUYV -s 640x480 -r 30 -o - | v4l2_play -
```


## v4l2-dbg
```bash
bash-5.1# v4l2-dbg --help
Usage: v4l2-dbg [options] [values]
  -D, --info         Show driver info [VIDIOC_QUERYCAP]
  -d, --device <dev> Use device <dev> instead of /dev/video0
                     If <dev> starts with a digit, then /dev/video<dev> is used
  -h, --help         Display this help message
  --verbose          Turn on verbose ioctl error reporting
  -c, --chip <chip>  The chip identifier to use with other commands
                     It can be one of:
                         bridge<num>: bridge chip number <num>
                         bridge (default): same as bridge0
                         subdev<num>: sub-device number <num>
  -l, --list-registers[=min=<addr>[,max=<addr>]]
                     Dump registers from <min> to <max> [VIDIOC_DBG_G_REGISTER]
  -g, --get-register <addr>
                     Get the specified register [VIDIOC_DBG_G_REGISTER]
  -s, --set-register <addr>
                     Set the register with the commandline arguments
                     The register will autoincrement [VIDIOC_DBG_S_REGISTER]
  -n, --scan-chips   Scan the available bridge and subdev chips [VIDIOC_DBG_G_CHIP_INFO]
  -w, --wide <reg length>
                     Sets step between two registers
  --list-symbols     List the symbolic register names you can use, if any
  --log-status       Log the board status in the kernel log [VIDIOC_LOG_STATUS]
```


### 参数解析

#### 显示驱动信息

```bash
v4l2-dbg -D
```

#### 指定设备

```bash
v4l2-dbg -d /dev/video0
```

#### 显示帮助信息

```bash
v4l2-dbg -h
```

#### 显示详细的ioctl错误报告

```bash
v4l2-dbg --verbose
```

#### 指定芯片标识

```bash
v4l2-dbg -c subdev0
```

#### 列出寄存器

```bash
v4l2-dbg -l min=0 max=100
```

#### 获取指定寄存器的值

```bash
v4l2-dbg -g 0x1234
```

#### 设置寄存器

```bash
v4l2-dbg -s 0x1234 value1 value2 ...
```

#### 扫描可用的桥接和子设备芯片

```bash
v4l2-dbg -n
```

#### 设置寄存器之间的步长

```bash
v4l2-dbg -w 4
```

#### 列出可使用的符号寄存器名称

```bash
v4l2-dbg --list-symbols
```

#### 记录板载状态到内核日志

```bash
v4l2-dbg --log-status
```

### 综合应用

####  列出寄存器范围内的值

列出从地址 0x0000 到 0x00FF 的寄存器值：

```bash
v4l2-dbg -l min=0x0000 max=0x00FF
```

####  获取特定寄存器的值

获取地址为 0x1234 的寄存器的值：

```bash
v4l2-dbg -g 0x1234
```

####  设置寄存器

设置地址为 0x1234 的寄存器，假设它是一个自动递增寄存器，每次递增 4 位，设置其值为 0x5678 和 0x9ABC：

```bash
v4l2-dbg -s 0x1234 0x5678 0x9ABC
```

####  扫描芯片

扫描设备中的所有可用的桥接和子设备芯片：

```bash
v4l2-dbg -n
```

####  列出符号寄存器名称

列出可用于该设备的符号寄存器名称：

```bash
v4l2-dbg --list-symbols
```

####  显示详细的ioctl错误报告

当遇到错误时，显示详细的ioctl错误报告：

```bash
v4l2-dbg --verbose -g 0x1234
```

####  记录板载状态

记录设备的板载状态到内核日志：

```bash
v4l2-dbg --log-status
```



## v4l2-sysfs-path
```bash
bash-5.1# v4l2-sysfs-path --help
Usage: v4l2-sysfs-path [OPTION...]

  -d, --device               use alternative device show mode
  -?, --help                 Give this help list
      --usage                Give a short usage message
  -V, --version              Print program version

Report bugs to Mauro Carvalho Chehab <mchehab@kernel.org>.
```


### 参数解析

#### 使用替代设备显示模式

```bash
v4l2-sysfs-path -d
```

#### 显示帮助列表

```bash
v4l2-sysfs-path -?
```

#### 显示简短的用法消息

```bash
v4l2-sysfs-path --usage
```

#### 打印程序版本

```bash
v4l2-sysfs-path -V
```


### 综合应用

#### 使用替代设备显示模式

使用替代设备显示模式查看 sysfs 路径:

```bash
v4l2-sysfs-path -d
```

#### 显示帮助信息

```bash
v4l2-sysfs-path -?
```

#### 显示简短的用法消息

```bash
v4l2-sysfs-path --usage
```

#### 打印程序版本

```bash
v4l2-sysfs-path -V
```


## v4l2-compliance

```bash
bash-5.1# v4l2-compliance --help
Usage:
Common options:
  -d, --device <dev> Use device <dev> as the video device.
                     If <dev> starts with a digit, then /dev/video<dev> is used.
                     Otherwise if -z was specified earlier, then <dev> is the entity name
                     or interface ID (if prefixed with 0x) as found in the topology of the
                     media device with the bus info string as specified by the -z option.
  -V, --vbi-device <dev>
                     Use device <dev> as the vbi device.
                     If <dev> starts with a digit, then /dev/vbi<dev> is used.
                     See the -d description of how <dev> is used in combination with -z.
  -r, --radio-device <dev>
                     Use device <dev> as the radio device.
                     If <dev> starts with a digit, then /dev/radio<dev> is used.
                     See the -d description of how <dev> is used in combination with -z.
  -S, --sdr-device <dev>
                     Use device <dev> as the SDR device.
                     If <dev> starts with a digit, then /dev/swradio<dev> is used.
                     See the -d description of how <dev> is used in combination with -z.
  -t, --touch-device <dev>
                     Use device <dev> as the touch device.
                     If <dev> starts with a digit, then /dev/v4l-touch<dev> is used.
                     See the -d description of how <dev> is used in combination with -z.
  -u, --subdev-device <dev>
                     Use device <dev> as the v4l-subdev device.
                     If <dev> starts with a digit, then /dev/v4l-subdev<dev> is used.
                     See the -d description of how <dev> is used in combination with -z.
  -e, --expbuf-device <dev>
                     Use video device <dev> to obtain DMABUF handles.
                     If <dev> starts with a digit, then /dev/video<dev> is used.
                     See the -d description of how <dev> is used in combination with -z.
  -z, --media-bus-info <bus-info>
                     Find the media device with the given bus info string. If set, then
                     the options above can use the entity name or interface ID to refer
                     to the device nodes.
  -m, --media-device <dev>
                     Use device <dev> as the media controller device. Besides this
                     device it also tests all interfaces it finds.
                     If <dev> starts with a digit, then /dev/media<dev> is used.
                     If <dev> doesn't exist, then attempt to find a media device with a
                     bus info string equal to <dev>.
  -M, --media-device-only <dev>
                     Use device <dev> as the media controller device. Only test this
                     device, don't walk over all the interfaces.
                     If <dev> starts with a digit, then /dev/media<dev> is used.
                     If <dev> doesn't exist, then attempt to find a media device with a
                     bus info string equal to <dev>.
  -s, --streaming <count>
                     Enable the streaming tests. Set <count> to the number of
                     frames to stream (default 60). Requires a valid input/output
                     and frequency (when dealing with a tuner). For DMABUF testing
                     --expbuf-device needs to be set as well.
  --stream-from [<pixelformat>=]<file>
  --stream-from-hdr [<pixelformat>=]<file>
                     Use the contents of the file to fill in output buffers.
                     If the fourcc of the pixelformat is given, then use the file
                     for output buffers using that pixelformat only.
                     The --stream-from-hdr variant uses the format written by
                     v4l2-ctl --stream-to-hdr where the payload sizes for each
                     buffer are stored in a header. Useful for compressed formats.
  -f, --stream-all-formats [<count>]
                     Test streaming all available formats.
                     This attempts to stream using MMAP mode or read/write
                     for one second for all formats, at all sizes, at all intervals
                     and with all field values. If <count> is given, then stream
                     for that many frames instead of one second.
  -a, --stream-all-io
                     Do streaming tests for all inputs or outputs instead of just
                     the current input or output. This requires that a valid video
                     signal is present on all inputs and all outputs are hooked up.
  -c, --stream-all-color color=red|green|blue,skip=<skip>,perc=<percentage>
                     For all formats stream <skip + 1> frames and check if
                     the last frame has at least <perc> percent of the pixels with
                     a <color> component that is higher than the other two color
                     components. This requires that a valid red, green or blue video
                     signal is present on the input(s). If <skip> is not specified,
                     then just capture the first frame. If <perc> is not specified,
                     then this defaults to 90%.
  -E, --exit-on-fail Exit on the first fail.
  -h, --help         Display this help message.
  -C, --color <when> Highlight OK/warn/fail/FAIL strings with colors
                     <when> can be set to always, never, or auto (the default)
  -n, --no-warnings  Turn off warning messages.
  -P, --no-progress  Turn off progress messages.
  -T, --trace        Trace all called ioctls.
  -v, --verbose      Turn on verbose reporting.
  --version          Show version information.
  -w, --wrapper      Use the libv4l2 wrapper library.
  -W, --exit-on-warn Exit on the first warning.
```


### 参数解析

#### 指定视频设备

```bash
v4l2-compliance -d /dev/video0
```

#### 指定 VBI 设备

```bash
v4l2-compliance -V /dev/vbi0
```

#### 指定无线电设备

```bash
v4l2-compliance -r /dev/radio0
```

#### 指定 SDR 设备

```bash
v4l2-compliance -S /dev/swradio0
```

#### 指定触摸设备

```bash
v4l2-compliance -t /dev/v4l-touch0
```

#### 指定子设备

```bash
v4l2-compliance -u /dev/v4l-subdev0
```

#### 指定用于获取 DMABUF 句柄的视频设备

```bash
v4l2-compliance -e /dev/video1
```

#### 使用媒体总线信息查找媒体设备

```bash
v4l2-compliance -z pci-0000:00:1f.3
```

#### 指定媒体控制器设备

```bash
v4l2-compliance -m /dev/media0
```

#### 指定仅测试指定的媒体控制器设备

```bash
v4l2-compliance -M /dev/media0
```

#### 启用流测试

```bash
v4l2-compliance -s 60
```

#### 从文件流数据

```bash
v4l2-compliance --stream-from=/path/to/file
```

#### 测试所有可用格式的流

```bash
v4l2-compliance -f 10
```

#### 对所有输入或输出进行流测试

```bash
v4l2-compliance -a
```

#### 测试所有颜色信号

```bash
v4l2-compliance -c color=red,skip=10,perc=90
```

#### 在第一次失败时退出

```bash
v4l2-compliance -E
```

#### 显示帮助信息

```bash
v4l2-compliance -h
```

#### 高亮显示 OK/warn/fail/FAIL 字符串

```bash
v4l2-compliance -C always
```

#### 关闭警告消息

```bash
v4l2-compliance -n
```

#### 关闭进度消息

```bash
v4l2-compliance -P
```

#### 跟踪所有调用的 ioctl

```bash
v4l2-compliance -T
```

#### 显示详细报告

```bash
v4l2-compliance -v
```

#### 显示版本信息

```bash
v4l2-compliance --version
```

#### 使用 libv4l2 包装库

```bash
v4l2-compliance -w
```

#### 在第一次警告时退出

```bash
v4l2-compliance -W
```

### 综合应用

#### 启用流测试并从文件填充输出缓冲区

```bash
v4l2-compliance -s 60 --stream-from=/path/to/file
```

#### 测试所有可用格式的流，并使用特定格式填充输出缓冲区

```bash
v4l2-compliance -f 10 --stream-from YUYV=/path/to/file
```

#### 对所有输入或输出进行流测试，并在第一次失败时退出

```bash
v4l2-compliance -a -E
```

#### 测试所有颜色信号，并高亮显示 OK/warn/fail/FAIL 字符串

```bash
v4l2-compliance -c color=red,skip=10,perc=90 -C always
```

#### 跟踪所有调用的 ioctl 并显示详细报告

```bash
v4l2-compliance -T -v
```

#### 使用 libv4l2 包装库并在第一次警告时退出

```bash
v4l2-compliance -w -W
```

# gst

## gst-launch-1.0
```bash
bash-5.1# gst-launch-1.0 --help
Usage:
  gst-launch-1.0 [OPTION?] PIPELINE-DESCRIPTION

Help Options:
  -h, --help                        Show help options
  --help-all                        Show all help options
  --help-gst                        Show GStreamer Options

Application Options:
  -t, --tags                        Output tags (also known as metadata)
  -c, --toc                         Output TOC (chapters and editions)
  -v, --verbose                     Output status information and property notifications
  -q, --quiet                       Do not print any progress information
  -m, --messages                    Output messages
  -X, --exclude=PROPERTY-NAME       Do not output status information for the specified property if verbose output is enabled (can be used multiple times)
  -f, --no-fault                    Do not install a fault handler
  -e, --eos-on-shutdown             Force EOS on sources before shutting the pipeline down
  --version                         Print version information and exit
  --no-position                     Do not print current position of pipeline. If this option is unspecified, the position will be printed when stdout is a TTY. To enable printing position when stdout is not a TTY, use "force-position" option
  --force-position                  Allow printing current position of pipeline even if stdout is not a TTY. This option has no effect if the "no-position" option is specified
```


### 参数解析

#### 显示帮助选项

```bash
gst-launch-1.0 --help
```

#### 显示所有帮助选项

```bash
gst-launch-1.0 --help-all
```

#### 显示 GStreamer 选项

```bash
gst-launch-1.0 --help-gst
```

#### 输出标签信息

```bash
gst-launch-1.0 -t
```

#### 输出 TOC 信息

```bash
gst-launch-1.0 -c
```

#### 输出状态信息和属性通知

```bash
gst-launch-1.0 -v
```

#### 不打印任何进度信息

```bash
gst-launch-1.0 -q
```

#### 输出消息

```bash
gst-launch-1.0 -m
```

#### 排除指定属性的状态输出

```bash
gst-launch-1.0 -X volume
```

#### 不安装故障处理器

```bash
gst-launch-1.0 -f
```

#### 强制 EOS 在关闭管道前发送给源

```bash
gst-launch-1.0 -e
```

#### 显示版本信息

```bash
gst-launch-1.0 --version
```

#### 不打印管道的当前位置

```bash
gst-launch-1.0 --no-position
```

#### 强制打印管道的当前位置，即使 stdout 不是 TTY

```bash
gst-launch-1.0 --force-position
```

### 综合应用

#### 输出状态信息和属性通知，同时排除音量属性的状态输出

```bash
gst-launch-1.0 -v -X volume
```

#### 强制 EOS 发送给源，在关闭管道之前，并且不打印管道的当前位置

```bash
gst-launch-1.0 -e --no-position
```

#### 显示所有帮助选项，并强制打印管道的当前位置

```bash
gst-launch-1.0 --help-all --force-position
```

#### 创建一个简单的管道，播放本地文件，并输出状态信息

```bash
gst-launch-1.0 -v filesrc location=/path/to/file ! decodebin ! autovideosink
```

#### 创建一个管道，捕获摄像头视频，并输出标签信息

```bash
gst-launch-1.0 -t v4l2src ! videoconvert ! autovideosink
```


## gst-inspect-1.0
```bash
bash-5.1# gst-inspect-1.0 --help
Usage:
  gst-inspect-1.0 [OPTION?] [ELEMENT-NAME | PLUGIN-NAME]

Help Options:
  -h, --help                           Show help options
  --help-all                           Show all help options
  --help-gst                           Show GStreamer Options

Application Options:
  -a, --print-all                      Print all elements
  -b, --print-blacklist                Print list of blacklisted files
  --print-plugin-auto-install-info     Print a machine-parsable list of features the specified plugin or all plugins provide.
                                       Useful in connection with external automatic plugin installation mechanisms
  --plugin                             List the plugin contents
  -t, --types                          A slashes ('/') separated list of types of elements (also known as klass) to list. (unordered)
  --exists                             Check if the specified element or plugin exists
  --atleast-version                    When checking if an element or plugin exists, also check that its version is at least the version specified
  -u, --uri-handlers                   Print supported URI schemes, with the elements that implement them
  --no-colors                          Disable colors in output. You can also achieve the same by setting 'GST_INSPECT_NO_COLORS' environment variable to any value.
  --sort=<sort-key>                    Sort plugins and features. Sorting keys: name (default), none.
  -C, --color                          Color output, even when not sending to a tty.
  --version                            Print version information and exit
```


### 参数解析

#### 显示帮助选项

```bash
gst-inspect-1.0 --help
```

#### 显示所有帮助选项

```bash
gst-inspect-1.0 --help-all
```

#### 显示 GStreamer 选项

```bash
gst-inspect-1.0 --help-gst
```

#### 打印所有元素

```bash
gst-inspect-1.0 -a
```

#### 打印黑名单文件列表

```bash
gst-inspect-1.0 -b
```

#### 打印插件自动安装信息

```bash
gst-inspect-1.0 --print-plugin-auto-install-info
```

#### 列出插件内容

```bash
gst-inspect-1.0 --plugin
```

#### 列出指定类型的元素

```bash
gst-inspect-1.0 -t sink/source
```

#### 检查指定元素或插件是否存在

```bash
gst-inspect-1.0 --exists videotestsrc
```

#### 检查指定元素或插件的版本是否至少为指定版本

```bash
gst-inspect-1.0 --atleast-version 1.14.0 videotestsrc
```

#### 打印支持的 URI 方案及其对应的元素

```bash
gst-inspect-1.0 -u
```

#### 禁用输出中的颜色

```bash
gst-inspect-1.0 --no-colors
```

#### 强制彩色输出，即使不是发送到终端

```bash
gst-inspect-1.0 -C
```

#### 按名称排序输出

```bash
gst-inspect-1.0 --sort=name
```

#### 显示版本信息

```bash
gst-inspect-1.0 --version
```

### 综合应用

#### 打印所有元素，并按名称排序

```bash
gst-inspect-1.0 -a --sort=name
```

#### 检查特定元素是否存在，并确保其版本至少为 1.14.0

```bash
gst-inspect-1.0 --exists --atleast-version 1.14.0 videotestsrc
```

#### 打印支持的 URI 方案，并禁用颜色输出

```bash
gst-inspect-1.0 -u --no-colors
```

#### 打印所有插件内容，并强制彩色输出

```bash
gst-inspect-1.0 --plugin -C
```

## gst-play-1.0
```bash
bash-5.1# gst-play-1.0 --help
Usage:
  gst-play-1.0 [OPTION?] FILE1|URI1 [FILE2|URI2] [FILE3|URI3] ...

Help Options:
  -h, --help                        Show help options
  --help-all                        Show all help options
  --help-gst                        Show GStreamer Options

Application Options:
  -v, --verbose                     Output status information and property notifications
  --flags                           Control playback behaviour setting playbin 'flags' property
  --version                         Print version information and exit
  --videosink                       Video sink to use (default is autovideosink)
  --audiosink                       Audio sink to use (default is autoaudiosink)
  --gapless                         Enable gapless playback
  --shuffle                         Shuffle playlist
  --no-interactive                  Disable interactive control via the keyboard
  --volume                          Volume
  -s, --start-position              Start position in seconds.
  --playlist                        Playlist file containing input media files
  -i, --instant-rate-changes        Use the experimental instant-rate-change flag when changing rate
  -q, --quiet                       Do not print any output (apart from errors)
  --use-playbin3                    Use playbin3 pipeline(default varies depending on 'USE_PLAYBIN' env variable)
  --wait-on-eos                     Keep showing the last frame on EOS until quit or playlist change command (gapless is ignored)
```


### 参数解析

#### 显示帮助选项

```bash
gst-play-1.0 --help
```

#### 显示所有帮助选项

```bash
gst-play-1.0 --help-all
```

#### 显示 GStreamer 选项

```bash
gst-play-1.0 --help-gst
```

#### 输出状态信息和属性通知

```bash
gst-play-1.0 -v
```

#### 控制播放行为

```bash
gst-play-1.0 --flags=bitrate,buffer-size
```

#### 显示版本信息

```bash
gst-play-1.0 --version
```

#### 指定视频输出设备

```bash
gst-play-1.0 --videosink=ximagesink
```

#### 指定音频输出设备

```bash
gst-play-1.0 --audiosink=alsasink
```

#### 启用无缝播放

```bash
gst-play-1.0 --gapless
```

#### 启用随机播放

```bash
gst-play-1.0 --shuffle
```

#### 禁用键盘交互控制

```bash
gst-play-1.0 --no-interactive
```

#### 设置初始音量

```bash
gst-play-1.0 --volume=0.5
```

#### 设置开始位置

```bash
gst-play-1.0 -s 30
```

#### 指定播放列表文件

```bash
gst-play-1.0 --playlist=myplaylist.m3u
```

#### 使用即时速率更改标志

```bash
gst-play-1.0 -i
```

#### 不打印任何输出（除了错误）

```bash
gst-play-1.0 -q
```

#### 使用 playbin3 管道

```bash
gst-play-1.0 --use-playbin3
```

#### 保持显示最后一个画面直到退出或播放列表更改

```bash
gst-play-1.0 --wait-on-eos
```

### 综合应用

#### 输出状态信息，并启用无缝播放

```bash
gst-play-1.0 -v --gapless file.mp4
```

#### 播放多个文件，并设置初始音量

```bash
gst-play-1.0 --volume=0.8 file1.mp4 file2.mp4
```

#### 使用指定的视频和音频输出设备，并禁用键盘交互控制

```bash
gst-play-1.0 --videosink=ximagesink --audiosink=alsasink --no-interactive file.mp4
```

#### 播放列表文件中的媒体，并启用随机播放

```bash
gst-play-1.0 --shuffle --playlist=myplaylist.m3u
```

#### 使用 playbin3 管道播放文件，并保持显示最后一个画面

```bash
gst-play-1.0 --use-playbin3 --wait-on-eos file.mp4
```

## gst-device-monitor-1.0
```bash
bash-5.1# gst-device-monitor-1.0 --help
Usage:
  gst-device-monitor-1.0 [OPTION?] [DEVICE_CLASSES[:FILTER_CAPS]] [DEVICE_CLASSES[:FILTER_CAPS]] ?

Help Options:
  -h, --help                        Show help options
  --help-all                        Show all help options
  --help-gst                        Show GStreamer Options

Application Options:
  --version                         Print version information and exit
  -f, --follow                      Don't exit after showing the initial device list, but wait for devices to added/removed.
  -i, --include-hidden              Include devices from hidden device providers.
```

### 参数解析

#### 显示帮助选项

```bash
gst-device-monitor-1.0 --help
```

##### 显示所有帮助选项

```bash
gst-device-monitor-1.0 --help-all
```

##### 显示 GStreamer 选项

```bash
gst-device-monitor-1.0 --help-gst
```

#### 显示版本信息

```bash
gst-device-monitor-1.0 --version
```

#### 不在显示初始设备列表后退出，而是持续监控设备的添加和移除

```bash
gst-device-monitor-1.0 -f
```

#### 包括隐藏的设备提供商中的设备

```bash
gst-device-monitor-1.0 -i
```

### 综合应用

#### 监控所有设备，包括隐藏的设备提供商中的设备，并持续等待新的设备添加或移除

```bash
gst-device-monitor-1.0 -fi
```

#### 监控特定类型的设备，并持续等待新的设备添加或移除

```bash
gst-device-monitor-1.0 -f audiosrc
```

#### 显示所有帮助选项，并持续监控所有设备

```bash
gst-device-monitor-1.0 --help-all -f
```


## gst-discoverer-1.0
```bash
bash-5.1# gst-discoverer-1.0 --help
Usage:
  gst-discoverer-1.0 [OPTION?] - discover files synchronously with GstDiscoverer

Help Options:
  -h, --help                        Show help options
  --help-all                        Show all help options
  --help-gst                        Show GStreamer Options

Application Options:
  -a, --async                       Run asynchronously
  --use-cache                       Use GstDiscovererInfo from our cache.
  --print-cache-dir                 Print the directory of the discoverer cache.
  -t, --timeout=T                   Specify timeout (in seconds, default 10)
  -c, --toc                         Output TOC (chapters and editions)
  -v, --verbose                     Verbose properties
```

### 参数解析

#### 显示帮助选项

```bash
gst-discoverer-1.0 --help
```

#### 显示所有帮助选项

```bash
gst-discoverer-1.0 --help-all
```

#### 显示 GStreamer 选项

```bash
gst-discoverer-1.0 --help-gst
```

#### 异步运行

```bash
gst-discoverer-1.0 -a
```

#### 使用缓存信息

```bash
gst-discoverer-1.0 --use-cache
```

#### 打印缓存目录

```bash
gst-discoverer-1.0 --print-cache-dir
```

#### 设置超时时间

```bash
gst-discoverer-1.0 -t 20
```

#### 输出 TOC (章节和版本)

```bash
gst-discoverer-1.0 -c
```

#### 输出详细的属性信息

```bash
gst-discoverer-1.0 -v
```

### 综合应用

#### 异步运行并使用缓存信息

```bash
gst-discoverer-1.0 -a --use-cache
```

#### 设置超时时间为 15 秒，并输出详细的属性信息

```bash
gst-discoverer-1.0 -t 15 -v
```

#### 输出 TOC 信息，并打印缓存目录

```bash
gst-discoverer-1.0 -c --print-cache-dir
```

##  gst-transcoder-1.0
```bash
bash-5.1# gst-transcoder-1.0 --help
Usage:
  gst-transcoder [OPTION?] <source uri> <destination uri> [<encoding format>[/<encoding profile name>]]

gst-transcoder-1.0 transcodes a stream defined by its first <input-uri>
argument to the place defined by its second <output-uri> argument
into the format described in its third <encoding-format> argument,
or using the given <output-uri> file extension.

The <encoding-format> argument:
===============================

If the encoding format is not defined, it will be guessed with
the given <output-uri> file extension.
<encoding-format> describe the media format into which the
input stream is going to be transcoded. We have two different
ways of describing the format:

GstEncodingProfile serialization format
---------------------------------------

GStreamer encoding profiles can be described with a quite extensive
syntax which is described in the GstEncodingProfile documentation.

The simple case looks like:

    muxer_source_caps:videoencoder_source_caps:audioencoder_source_caps

Name and category of serialized GstEncodingTarget
-------------------------------------------------

Encoding targets describe well known formats which
those are provided in '.gep' files. You can list
available ones using the `--list-targets` argument.


Help Options:
  -h, --help                        Show help options
  --help-all                        Show all help options
  --help-gst                        Show GStreamer Options

Application Options:
  -c, --cpu-usage                   The CPU usage to target in the transcoding process
  -l, --list-targets                List all encoding targets
  -s, --size                        set frame size (WxH or abbreviation)
  -r, --audio-rate                  set audio sampling rate (in Hz)
  -f, --framerate                   set video framerate as a fraction (24/1 for 24fps) or a single number (24 for 24fps))
  -v, --video-encoder               The video encoder to use.
```

### 参数解析

#### 显示帮助选项

```bash
gst-transcoder-1.0 --help
```

#### 显示所有帮助选项

```bash
gst-transcoder-1.0 --help-all
```

#### 显示 GStreamer 选项

```bash
gst-transcoder-1.0 --help-gst
```

#### 指定目标 CPU 使用率

```bash
gst-transcoder-1.0 -c 50
```

#### 列出所有编码目标

```bash
gst-transcoder-1.0 -l
```

#### 设置视频帧尺寸

```bash
gst-transcoder-1.0 -s 640x480
```

#### 设置音频采样率

```bash
gst-transcoder-1.0 -r 44100
```

#### 设置视频帧率

```bash
gst-transcoder-1.0 -f 25/1
```

#### 指定视频编码器

```bash
gst-transcoder-1.0 -v x264
```

### 综合应用

#### 使用默认配置转码文件

```bash
gst-transcoder-1.0 file.mp4 output.mp4
```

#### 使用特定的编码格式和配置转码文件

```bash
gst-transcoder-1.0 file.mp4 output.mp4 mp4/veryhigh
```

#### 转码文件并指定视频帧尺寸、音频采样率以及视频帧率

```bash
gst-transcoder-1.0 -s 1280x720 -r 48000 -f 24/1 file.mp4 output.mp4
```

#### 使用指定的视频编码器和目标 CPU 使用率转码文件

```bash
gst-transcoder-1.0 -v x264 -c 80 file.mp4 output.mp4
```

## gst-typefind-1.0
```bash
bash-5.1# gst-typefind-1.0 --help
Usage:
  gst-typefind-1.0 [OPTION?] FILES

Help Options:
  -h, --help                        Show help options
  --help-all                        Show all help options
  --help-gst                        Show GStreamer Options

Application Options:
  --version                         Print version information and exit
```

### 参数解析

#### 显示帮助选项

```bash
gst-typefind-1.0 --help
```

#### 显示所有帮助选项

```bash
gst-typefind-1.0 --help-all
```

#### 显示 GStreamer 选项

```bash
gst-typefind-1.0 --help-gst
```

#### 显示版本信息

```bash
gst-typefind-1.0 --version
```

### 综合应用

#### 显示文件类型

```bash
gst-typefind-1.0 file.mp4
```

#### 显示多个文件的类型

```bash
gst-typefind-1.0 file1.mp4 file2.mp4 file3.mp4
```


## gst-stats-1.0
```bash
bash-5.1# gst-stats-1.0 --help
Usage:
  gst-stats-1.0 [OPTION?] FILE

Help Options:
  -h, --help                        Show help options
  --help-all                        Show all help options
  --help-gst                        Show GStreamer Options

Application Options:
  --version                         Print version information and exit
```

### 参数解析

#### 显示帮助选项

```bash
gst-stats-1.0 --help
```

#### 显示所有帮助选项

```bash
gst-stats-1.0 --help-all
```

#### 显示 GStreamer 选项

```bash
gst-stats-1.0 --help-gst
```

#### 显示版本信息

```bash
gst-stats-1.0 --version
```

### 综合应用

#### 显示文件的统计信息

```bash
gst-stats-1.0 file.mp4
```

# mplayer
```bash
Usage:   mplayer [options] [url|path/]filename

Basic options: (complete list in the man page)
 -vo <drv>        select video output driver ('-vo help' for a list)
 -ao <drv>        select audio output driver ('-ao help' for a list)
 vcd://<trackno>  play (S)VCD (Super Video CD) track (raw device, no mount)
 dvd://<titleno>  play DVD title from device instead of plain file
 -alang/-slang    select DVD audio/subtitle language (by 2-char country code)
 -ss <position>   seek to given (seconds or hh:mm:ss) position
 -nosound         do not play sound
 -fs              fullscreen playback (or -vm, -zoom, details in the man page)
 -x <x> -y <y>    set display resolution (for use with -vm or -zoom)
 -sub <file>      specify subtitle file to use (also see -subfps, -subdelay)
 -playlist <file> specify playlist file
 -vid x -aid y    select video (x) and audio (y) stream to play
 -fps x -srate y  change video (x fps) and audio (y Hz) rate
 -pp <quality>    enable postprocessing filter (details in the man page)
 -framedrop       enable frame dropping (for slow machines)

Basic keys: (complete list in the man page, also check input.conf)
 <-  or  ->       seek backward/forward 10 seconds
 down or up       seek backward/forward  1 minute
 pgdown or pgup   seek backward/forward 10 minutes
 < or >           step backward/forward in playlist
 p or SPACE       pause movie (press any key to continue)
 q or ESC         stop playing and quit program
 + or -           adjust audio delay by +/- 0.1 second
 o                cycle OSD mode:  none / seekbar / seekbar + timer
 * or /           increase or decrease PCM volume
 x or z           adjust subtitle delay by +/- 0.1 second
 r or t           adjust subtitle position up/down, also see -vf expand

 * * * SEE THE MAN PAGE FOR DETAILS, FURTHER (ADVANCED) OPTIONS AND KEYS * * *

MPlayer 1.3.0 (Debian), built with gcc-9 (C) 2000-2016 MPlayer Team
```
### 参数解析

#### 显示帮助选项

```bash
mplayer -help
```

#### 显示所有帮助选项

```bash
mplayer -help all
```

#### 显示版本信息

```bash
mplayer -version
```

#### 播放文件

```bash
mplayer file.mp4
```

#### 设置视频输出驱动

```bash
mplayer -vo x11 file.mp4
```

#### 设置音频输出驱动

```bash
mplayer -ao alsa file.mp4
```

#### 播放 VCD

```bash
mplayer vcd://1
```

#### 播放 DVD

```bash
mplayer dvd://1
```

#### 选择 DVD 音频/字幕语言

```bash
mplayer -alang=en -slang=en dvd://1
```

#### 寻找指定位置

```bash
mplayer -ss 00:01:00 file.mp4
```

#### 禁用声音输出

```bash
mplayer -nosound file.mp4
```

#### 全屏播放

```bash
mplayer -fs file.mp4
```

#### 设置显示分辨率

```bash
mplayer -x 640 -y 480 file.mp4
```

#### 设置字幕文件

```bash
mplayer -sub file.srt file.mp4
```

#### 设置播放列表文件

```bash
mplayer -playlist myplaylist.m3u
```

#### 选择视频和音频流

```bash
mplayer -vid 0 -aid 1 file.mp4
```

#### 改变视频和音频速率

```bash
mplayer -fps 25 -srate 48000 file.mp4
```

#### 启用后处理滤镜

```bash
mplayer -pp normal file.mp4
```

#### 启用帧丢弃

```bash
mplayer -framedrop file.mp4
```

### 综合应用

#### 播放文件并设置视频输出驱动

```bash
mplayer -vo x11 file.mp4
```

#### 播放文件并设置音频输出驱动

```bash
mplayer -ao alsa file.mp4
```

#### 播放文件并从指定时间开始播放，同时显示字幕

```bash
mplayer -ss 00:02:30 -sub file.srt file.mp4
```

#### 播放文件并使用特定的视频和音频输出驱动

```bash
mplayer -vo x11 -ao alsa file.mp4
```

#### 播放文件并调整视频和音频速率

```bash
mplayer -fps 30 -srate 44100 file.mp4
```

#### 播放文件并启用后处理滤镜

```bash
mplayer -pp normal file.mp4
```
# yavta
```bash
bash-5.1# yavta --help
Usage: /usr/bin/yavta [options] device
Supported options:
-B, --buffer-type               Buffer type ("capture", "output",
                                "capture-mplane" or "output-mplane")
-c, --capture[=nframes]         Capture frames
-C, --check-overrun             Verify dequeued frames for buffer overrun
-d, --delay                     Delay (in ms) before requeuing buffers
-f, --format format             Set the video format
                                use -f help to list the supported formats
-F, --file[=name]               Read/write frames from/to disk
        For video capture devices, the first '#' character in the file name is
        expanded to the frame sequence number. The default file name is
        'frame-#.bin'.
-h, --help                      Show this help screen
-i, --input input               Select the video input
-I, --fill-frames               Fill frames with check pattern before queuing them
-l, --list-controls             List available controls
-n, --nbufs n                   Set the number of video buffers
-p, --pause[=n]                 Pause after n frames (0 if n isn't specified)
-q, --quality n                 MJPEG quality (0-100)
-r, --get-control ctrl          Get control 'ctrl'
-R, --realtime=[priority]       Enable realtime RR scheduling
-s, --size WxH                  Set the frame size
-t, --time-per-frame num/denom  Set the time per frame (eg. 1/25 = 25 fps)
-u, --userptr                   Use the user pointers streaming method
-w, --set-control 'ctrl value'  Set control 'ctrl' to 'value'
    --buffer-prefix             Write portions of buffer before data_offset
    --buffer-size               Buffer size in bytes
    --enum-formats              Enumerate formats
    --enum-inputs               Enumerate inputs
    --fd                        Use a numeric file descriptor insted of a device
    --field                     Interlaced format field order
    --log-status                Log device status
    --no-query                  Don't query capabilities on open
    --offset                    User pointer buffer offset from page start
    --premultiplied             Color components are premultiplied by alpha value
    --queue-late                Queue buffers after streamon, not before
    --requeue-last              Requeue the last buffers before streamoff
    --reset-controls            Reset all available controls to their default value
    --timestamp-source          Set timestamp source on output buffers [eof, soe]
    --skip n                    Skip the first n frames
    --sleep-forever             Sleep forever after configuring the device
    --stride value              Line stride in bytes
```

### 参数解析

#### 显示帮助选项

```bash
yavta --help
```

#### 设置缓冲区类型

```bash
yavta --buffer-type capture file.mp4
```

#### 捕获帧

```bash
yavta --capture 100 /dev/video0
```

#### 验证已取消排队的帧是否有缓冲区溢出

```bash
yavta --check-overrun /dev/video0
```

#### 设置重新排队缓冲区之前的延迟

```bash
yavta --delay 500 /dev/video0
```

#### 设置视频格式

```bash
yavta --format YUYV /dev/video0
```

#### 从磁盘读取或写入帧

```bash
yavta --file output.bin /dev/video0
```

#### 列出可用的控制选项

```bash
yavta --list-controls /dev/video0
```

#### 设置视频缓冲区数量

```bash
yavta --nbufs 5 /dev/video0
```

#### 暂停播放

```bash
yavta --pause 10 /dev/video0
```

#### 设置 MJPEG 质量

```bash
yavta --quality 80 /dev/video0
```

#### 获取控制值

```bash
yavta --get-control brightness /dev/video0
```

#### 启用实时调度

```bash
yavta --realtime /dev/video0
```

#### 设置帧尺寸

```bash
yavta --size 640x480 /dev/video0
```

#### 设置每帧时间

```bash
yavta --time-per-frame 1/30 /dev/video0
```

#### 使用用户指针流方法

```bash
yavta --userptr /dev/video0
```

#### 设置控制值

```bash
yavta --set-control 'brightness 50' /dev/video0
```

#### 枚举格式

```bash
yavta --enum-formats /dev/video0
```

#### 枚举输入

```bash
yavta --enum-inputs /dev/video0
```

#### 使用文件描述符代替设备

```bash
yavta --fd 3
```

#### 设置时间戳来源

```bash
yavta --timestamp-source eof /dev/video0
```

#### 设置跳过帧数

```bash
yavta --skip 10 /dev/video0
```

#### 永久休眠

```bash
yavta --sleep-forever /dev/video0
```

### 综合应用

#### 捕获 100 帧并设置视频格式

```bash
yavta --capture 100 --format YUYV /dev/video0
```

#### 暂停 5 帧后继续，并设置 MJPEG 质量

```bash
yavta --pause 5 --quality 90 /dev/video0
```

#### 枚举格式并设置帧尺寸

```bash
yavta --enum-formats --size 1280x720 /dev/video0
```

#### 设置控制值并枚举输入

```bash
yavta --set-control 'brightness 75' --enum-inputs /dev/video0
```