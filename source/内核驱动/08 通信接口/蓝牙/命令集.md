

---
`bluez-utils` 软件包主要包含一系列用于管理和操作蓝牙设备的命令行工具。这些工具覆盖了蓝牙设备的配置、测试、调试和管理等多个方面。以下是 `bluez-utils` 包中常见的组件：
1. **设备控制和管理工具**
- **bluetoothctl**: 控制 `bluez` 守护进程，进行设备发现、连接、断开连接和配对等操作。
- **btmgmt**: 低级别蓝牙设备管理工具，通过蓝牙管理API与内核模块通信。
- **hciattach**: 用于将串行或USB设备连接到蓝牙协议栈，作为HCI的传输层。
- **hciconfig**: 配置蓝牙控制器参数，如名称、可见性、扫描模式等。
- **hcitool**: 发送各种蓝牙命令，如查询设备信息、建立连接、发送数据等。

2. **监控和调试工具**
- **btmon**: 监控蓝牙控制器的HID和HCI层活动，具有日志记录能力。
- **hcidump**: 捕获和显示HCI层的原始数据包，用于调试和分析蓝牙协议。

3. **协议测试工具**
- **l2ping**: 测试L2CAP层的连通性，类似于网络层的ping命令。
- **l2test**: 测试L2CAP协议栈的功能和性能。

4. **服务和协议管理工具**
- **obexctl**: 控制OBEX服务，用于文件传输和浏览。
- **rfcomm**: 管理RFCOMM串行端口，包括创建、删除、绑定等操作。
- **sdptool**: 查询和管理SDP服务记录。


`hciattach`, `hciconfig`, `hcidump`, 和 `hcitool` 是四个在 Linux 系统中用于管理蓝牙设备的命令行工具。它们通常包含在 `bluez-utils` 软件包中，用于蓝牙设备的配置、调试和管理。下面是这些工具的简要说明和使用示例：

1. **hciattach**
   - **用途**: 用于将串行或 USB 设备连接到蓝牙协议栈，作为 HCI（Host Controller Interface）的传输层。这在使用 USB 蓝牙适配器或具有串行 HCI 接口的设备时非常有用。
   - **示例**: 
     ```bash
     hciattach /dev/ttyUSB0 0 115200 16 0 noflow
     ```
   - 这条命令将尝试将 `/dev/ttyUSB0` 这个串行设备连接到蓝牙协议栈，使用速率为 115200bps，模式为 16 位，且没有流控制。

2. **hciconfig**
   - **用途**: 用于配置蓝牙控制器的参数，如名称、可见性、扫描模式等。
   - **示例**: 
     ```bash
     hciconfig hci0 up
     hciconfig hci0 name "MyBluetoothDevice"
     ```
   - 第一条命令将 `hci0` 设备设置为启用状态，第二条命令将设备的名称改为 "MyBluetoothDevice"。

3. **hcidump**
   - **用途**: 用于捕获和显示 HCI 层的原始数据包，常用于调试和分析蓝牙协议。
   - **示例**: 
     ```bash
     hcidump -t -x
     ```
   - 这条命令将以时间戳和十六进制格式显示 HCI 层的数据包，帮助开发者分析蓝牙通信。

4. **hcitool**
   - **用途**: 用于发送各种蓝牙命令，如查询设备信息、建立连接、发送数据等。
   - **示例**: 
     ```bash
     hcitool scan
     hcitool name 00:11:22:33:44:55
     ```
   - 第一条命令将启动设备扫描，查找附近可用的蓝牙设备。第二条命令将显示 MAC 地址为 `00:11:22:33:44:55` 的设备的名称。

这些工具为 Linux 用户和开发者提供了对蓝牙设备底层功能的访问，对于调试和开发蓝牙应用非常有帮助。在使用这些工具之前，确保你的系统中已经安装了 `bluez-utils` 软件包。


---
`dbus` 软件包提供了D-Bus消息总线系统的核心组件和工具，用于实现进程间通信（IPC）。以下是 `dbus` 包中常见组件的描述：
1. **dbus-daemon**: 这是D-Bus守护进程，负责管理总线，实现消息的路由和传递。它是D-Bus系统的核心组件。
2. **dbus-send**: 一个命令行工具，用于向D-Bus发送消息。它允许用户或脚本发送信号或调用远程对象的方法。
3. **dbus-monitor**: 用于监听D-Bus上的消息流，可用于调试和监控D-Bus上的活动。
4. **dbus-bindings**: 通常指的是为不同编程语言提供的D-Bus绑定库，如C++, Python, Java等，但`dbus-binding-tool` 特定功能可能依赖于具体的D-Bus实现。
5. **dbus-update-activation-environment**: 一个脚本，用于更新D-Bus激活环境变量，确保D-Bus守护进程可以正确地启动和管理其他服务。
6. **dbus-cleanup-sockets**: 一个工具，用于清理不再需要的D-Bus套接字文件，通常在系统启动或用户注销时使用。
7. **dbus-launch**: 一个脚本，用于在启动一个新进程时设置D-Bus相关的环境变量，使得进程可以在D-Bus上注册和通信。
8. **dbus-run-session**: 用于启动一个新的用户会话总线实例，常用于图形登录会话。
9. **dbus-test-tool**: 一个用于测试D-Bus功能的工具，可以发送和接收消息，测试总线的响应。
10. **dbus-uuidgen**: 一个工具，用于生成全局唯一标识符（UUID），用于D-Bus服务和对象的唯一标识。
这些工具和组件共同构成了D-Bus消息总线系统，允许Linux系统上的进程之间进行高效和安全的通信。D-Bus被广泛用于实现系统服务、桌面环境、应用程序之间的通信和协调。在不同的Linux发行版中，`dbus` 软件包的内容可能略有不同，但上述组件是其基本组成部分。


---
`openobex` 软件包是用于实现 OBEX (Object Exchange) 协议的工具集，OBEX 是一种用于移动设备之间交换文件和数据的标准协议。`openobex` 包含了用于实现客户端和服务器功能的多个组件，允许设备通过蓝牙或红外线等方式进行文件传输。以下是 `openobex` 软件包中通常包含的组件：
1. **obexd**: 这是 OBEX 服务器守护进程，用于监听并接受来自其他设备的 OBEX 连接请求。它允许客户端设备通过 OBEX 协议上传、下载和浏览文件。
2. **obexctl**: 这是一个命令行工具，用于控制 `obexd` 守护进程，可以启动、停止、重启守护进程，以及配置其运行参数。
3. **obex-client**: 客户端工具，用于发起 OBEX 连接到其他设备，从而能够从这些设备上传或下载文件。
4. **obexftp**: 一个基于 OBEX 协议的文件传输工具，类似于 FTP，用于与 OBEX 服务器进行文件传输。
5. **obexpsh**: 用于推送文件到其他 OBEX 设备的工具。
6. **obexapp**: 用于传输 vCard、vCalendar 和其他 PIM 数据的工具。
7. **obex-bluez**: 一个插件，用于让 `obexd` 通过蓝牙协议与远程设备通信。
8. **obex-irda**: 一个插件，用于让 `obexd` 通过红外线协议与远程设备通信。
9. **libopenobex**: OBEX 协议的库文件，用于开发支持 OBEX 的应用程序。
10. **libopenobex-devel**: 开发库，包含了头文件和静态库，用于编译需要使用 `openobex` 功能的自定义应用程序。
11. **示例脚本和配置文件**: 可能包括一些示例脚本和配置文件，用于演示如何设置和运行 `obexd`。
`openobex` 软件包允许用户在 Linux 系统上轻松地与其他支持 OBEX 的设备进行文件交换，尤其适用于移动设备之间的数据同步。请注意，具体包含的组件可能会根据不同的 Linux 发行版和编译配置有所不同。如果你需要了解特定发行版中 `openobex` 包的详细内容，可以使用包管理器的查询命令，例如在基于 Debian 的系统中使用 `dpkg -L openobex` 命令。

---

  
# rf
## rfcomm
```bash
bash-5.1# rfcomm --help
RFCOMM configuration utility ver 5.63
Usage:
        rfcomm [options] <command> <dev>

Options:
        -i, --device [hciX|bdaddr]     Local HCI device or BD Address
        -h, --help                     Display help
        -r, --raw                      Switch TTY into raw mode
        -A, --auth                     Enable authentication
        -E, --encrypt                  Enable encryption
        -S, --secure                   Secure connection
        -C, --central                  Become the central of a piconet
        -L, --linger [seconds]         Set linger timeout
        -a                             Show all devices (default)

Commands:
        bind     <dev> <bdaddr> [channel]       Bind device
        release  <dev>                          Release device
        show     <dev>                          Show device
        connect  <dev> <bdaddr> [channel]       Connect device
        listen   <dev> [channel [cmd]]          Listen
        watch    <dev> [channel [cmd]]          Watch
```

### 绑定设备
```bash
rfcomm bind /dev/rfcomm0 BDADDR channel
```
绑定本地设备 `/dev/rfcomm0` 到蓝牙设备 BDADDR 的指定通道。

### 释放设备
```bash
rfcomm release /dev/rfcomm0
```
释放本地 RFCOMM 设备 `/dev/rfcomm0`。

### 显示设备信息
```bash
rfcomm show /dev/rfcomm0
```
显示 `/dev/rfcomm0` 的详细信息。

### 连接设备
```bash
rfcomm connect /dev/rfcomm0 BDADDR channel
```
连接到蓝牙设备 BDADDR 的指定通道。

### 监听
```bash
rfcomm listen /dev/rfcomm0 [channel [cmd]]
```
监听本地设备 `/dev/rfcomm0` 的指定通道，可选地执行命令 `cmd` 当连接建立时。

### 观察
```bash
rfcomm watch /dev/rfcomm0 [channel [cmd]]
```
观察本地设备 `/dev/rfcomm0` 的指定通道，可选地执行命令 `cmd` 当连接建立时。

### 设置设备参数
#### 使用特定的本地蓝牙设备或地址
```bash
rfcomm -i hci0 bind /dev/rfcomm0 BDADDR channel
```
绑定到本地设备 hci0。

#### 启用认证
```bash
rfcomm -A bind /dev/rfcomm0 BDADDR channel
```
在绑定时启用认证。

#### 启用加密
```bash
rfcomm -E bind /dev/rfcomm0 BDADDR channel
```
在绑定时启用加密。

#### 安全连接
```bash
rfcomm -S bind /dev/rfcomm0 BDADDR channel
```
在绑定时启用安全连接。

#### 成为微微网中心
```bash
rfcomm -C bind /dev/rfcomm0 BDADDR channel
```
在绑定时成为微微网的中心。

#### 设置延迟超时
```bash
rfcomm -L 10 bind /dev/rfcomm0 BDADDR channel
```
设置延迟超时为 10 秒。

#### 显示所有设备
```bash
rfcomm -a
```
显示所有 RFCOMM 设备。

在使用 `rfcomm` 命令时，确保替换 `BDADDR` 和 `channel` 为具体的蓝牙设备地址和通道号。


## rfkill

```bash
bash-5.1# rfkill --help

Usage:
 rfkill [options] command [identifier ...]

Tool for enabling and disabling wireless devices.

Options:
 -J, --json             use JSON output format
 -n, --noheadings       don't print headings
 -o, --output <list>    define which output columns to use
     --output-all       output all columns
 -r, --raw              use the raw output format

 -h, --help             display this help
 -V, --version          display version

Available output columns:
 DEVICE      kernel device name
 ID          device identifier value
 TYPE        device type name that can be used as identifier
 TYPE-DESC   device type description
 SOFT        status of software block
 HARD        status of hardware block

Commands:
 help
 event
 list   [identifier]
 block   identifier
 unblock identifier
 toggle  identifier

For more details see rfkill(8).
```

### 列出所有无线设备状态
```bash
rfkill list
```
此命令将列出系统中所有无线设备的当前状态，包括设备名称、类型、软阻塞状态和硬阻塞状态。

### 列出自定义输出列的设备状态
```bash
rfkill list -o DEVICE,ID,SOFT,HARD
```
这将只显示设备名称、设备标识符、软件阻塞状态和硬件阻塞状态。

### 使用JSON格式输出
```bash
rfkill list -J
```
输出将以JSON格式展示，便于程序解析。

### 列出特定类型的无线设备
```bash
rfkill list wifi
```
这将仅列出Wi-Fi类型的无线设备。

### 阻塞无线设备
```bash
rfkill block 0
```
阻塞设备标识符为0的无线设备，通常0代表第一个或默认的无线设备。

### 解除阻塞无线设备
```bash
rfkill unblock 0
```
解除设备标识符为0的无线设备的阻塞状态。

### 切换无线设备的阻塞状态
```bash
rfkill toggle 0
```
如果设备被阻塞，则解除阻塞；如果未被阻塞，则阻塞该设备。

### 查看rfkill的帮助信息
```bash
rfkill help
```
显示rfkill命令的详细帮助信息。

### 查看rfkill的版本信息
```bash
rfkill --version
```
显示rfkill工具的版本信息。

### 监听无线设备状态的变化事件
```bash
rfkill event
```
持续监听并显示无线设备状态的实时变化。



## rctest

```bash
bash-5.1# rctest --help
rctest - RFCOMM testing
Usage:
        rctest <mode> [options] [bdaddr]
Modes:
        -r listen and receive
        -w listen and send
        -d listen and dump incoming data
        -s connect and send
        -u connect and receive
        -n connect and be silent
        -c connect, disconnect, connect, ...
        -m multiple connects
        -a automated test (receive hcix as parameter)
Options:
        [-b bytes] [-i device] [-P channel] [-U uuid]
        [-L seconds] enabled SO_LINGER option
        [-W seconds] enable deferred setup
        [-B filename] use data packets from file
        [-O filename] save received data to file
        [-N num] number of frames to send
        [-C num] send num frames before delay (default = 1)
        [-D milliseconds] delay after sending num frames (default = 0)
        [-Y priority] socket priority
        [-A] request authentication
        [-E] request encryption
        [-S] secure connection
        [-M] become central
        [-T] enable timestamps
```

  ### 监听并接收数据
```bash
rctest -r
```
此模式下，rctest 将监听并接收通过 RFCOMM 连接发送来的数据。

### 监听并发送数据
```bash
rctest -w
```
在此模式下，rctest 将监听并发送数据到 RFCOMM 连接。

### 监听并转储数据
```bash
rctest -d
```
此模式将监听并转储通过 RFCOMM 连接接收的所有数据。

### 连接并发送数据
```bash
rctest -s BDADDR
```
此命令将尝试连接到给定的蓝牙设备 BDADDR 并发送数据。

### 连接并接收数据
```bash
rctest -u BDADDR
```
此命令将尝试连接到给定的蓝牙设备 BDADDR 并接收数据。

### 连接并保持静默
```bash
rctest -n BDADDR
```
此命令将尝试连接到给定的蓝牙设备 BDADDR 但不发送或接收数据。

### 连接和断开连接循环
```bash
rctest -c BDADDR
```
此命令将反复连接和断开与给定的蓝牙设备 BDADDR 的连接。

### 多次连接
```bash
rctest -m BDADDR
```
此命令将尝试多次连接到给定的蓝牙设备 BDADDR。

### 自动化测试
```bash
rctest -a BDADDR
```
此模式用于自动化测试，其中参数 `BDADDR` 是用于测试的 HCIX 参数。

### 设置选项
#### 指定发送字节数
```bash
rctest -r -b 1024
```
设置每次发送的字节数为 1024。

#### 指定设备
```bash
rctest -r -i hci0
```
指定要使用的蓝牙设备为 hci0。

#### 指定通道
```bash
rctest -r -P 1
```
指定 RFCOMM 通道为 1。

#### 指定 UUID
```bash
rctest -r -U 1101
```
指定服务的 UUID 为 1101。

#### 设置延迟时间
```bash
rctest -r -L 5
```
设置延迟选项为 5 秒。

#### 启用延迟设置
```bash
rctest -r -W 10
```
启用延迟 10 秒后再进行设置。

#### 使用数据包文件
```bash
rctest -r -B datafile
```
从文件 datafile 中读取数据包。

#### 保存接收数据到文件
```bash
rctest -r -O outputfile
```
将接收到的数据保存到文件 outputfile 中。

#### 设置发送帧数
```bash
rctest -r -N 100
```
设置发送的帧数为 100。

#### 设置帧前的延迟帧数
```bash
rctest -r -C 5
```
设置每发送 5 帧后进行延迟。

#### 设置帧后延迟时间
```bash
rctest -r -D 500
```
设置每发送一定数量的帧后延迟 500 毫秒。

#### 设置套接字优先级
```bash
rctest -r -Y 5
```
设置套接字优先级为 5。

#### 请求认证
```bash
rctest -r -A
```
请求 RFCOMM 连接的认证。

#### 请求加密
```bash
rctest -r -E
```
请求 RFCOMM 连接的加密。

#### 安全连接
```bash
rctest -r -S
```
建立安全的 RFCOMM 连接。

#### 成为中心设备
```bash
rctest -r -M
```
在连接时成为微微网的中心设备。

#### 启用时间戳
```bash
rctest -r -T
```
在输出中启用时间戳。

# dbus
## dbus-daemon

### 启动新的会话总线
```bash
dbus-daemon --session
```
这将启动一个新的会话总线实例，通常用于图形登录会话。

### 启动新的系统总线
```bash
dbus-daemon --system
```
这将启动一个新的系统总线实例，用于系统范围内的进程间通信。

### 启动带有特定地址的总线
```bash
dbus-daemon --address=unix:path=/tmp/dbus-sock
```
这将启动一个总线守护进程，监听特定的 Unix 域套接字。

### 启动守护进程并在后台运行
```bash
dbus-daemon --fork
```
启动守护进程后立即返回到 shell，将守护进程置于后台运行。

### 启动守护进程并重定向标准输入输出
```bash
dbus-daemon --fork --print-to-stderr --syslog-only
```
此命令将守护进程置于后台运行，并将日志输出到 stderr，同时只使用 syslog 日志记录。

### 启动守护进程并禁用进程限制
```bash
dbus-daemon --nofork --nopidfile --system
```
这将启动守护进程而不将其置于后台，也不创建 PID 文件，通常用于调试目的。

### 启动守护进程并打印总线地址
```bash
dbus-daemon --print-address
```
启动守护进程并打印总线的地址，这对于需要连接到特定总线的客户端很有用。

### 启动守护进程并打印 PID
```bash
dbus-daemon --print-pid=123
```
启动守护进程并将 PID 写入文件 descriptor 123。通常，如果省略参数，PID 将被写入标准错误输出。

### 启动守护进程并指定日志级别
```bash
dbus-daemon --log-level=DEBUG
```
设置日志记录的最低级别，这里设置为 DEBUG。

### 启动守护进程并指定日志目标
```bash
dbus-daemon --syslog-only
```
仅将日志输出到 syslog，不输出到标准错误。

### 启动守护进程并允许任何用户连接
```bash
dbus-daemon --allow-insecure
```
此选项允许任何用户连接到总线，即使他们没有正确的身份验证凭据。

### 启动守护进程并指定身份验证方法
```bash
dbus-daemon --auth=EXTERNAL
```
指定守护进程应使用 EXTERNAL 认证方法。



## dbus-launch
### 启动新进程并设置环境变量
```bash
dbus-launch --exit-with-session --sh-syntax --print-env DBUS_SESSION_BUS_ADDRESS --print-pid 1 --print-uid 1 --print-gid 1 my_application
```
此命令将启动一个新的进程 `my_application`，并设置必要的环境变量以便它可以在当前用户的会话总线上进行通信。`--exit-with-session` 表示当会话总线结束时，也终止 `my_application`。`--sh-syntax` 表示输出适合 shell 脚本的语法。`--print-env DBUS_SESSION_BUS_ADDRESS` 打印总线地址到环境变量。`--print-pid 1` 和 `--print-uid 1` 以及 `--print-gid 1` 分别打印进程ID、用户ID和组ID。

### 仅打印总线地址和进程ID
```bash
dbus-launch --print-env DBUS_SESSION_BUS_ADDRESS --print-pid 1
```
此命令不会启动任何进程，而是仅打印会话总线的地址和新启动的守护进程的进程ID。

### 在后台启动应用程序
```bash
dbus-launch --exit-with-session my_application &
```
启动 `my_application` 并将其置于后台运行，同时设置环境变量以允许它与会话总线通信。当会话总线结束时，`my_application` 也将退出。

### 启动应用程序并传递参数
```bash
dbus-launch --exit-with-session my_application arg1 arg2
```
此命令将启动 `my_application` 并传递参数 `arg1` 和 `arg2`，同时设置环境变量以允许它与会话总线通信。

### 启动多个应用程序
```bash
dbus-launch --exit-with-session gnome-terminal & dbus-launch --exit-with-session nautilus
```
这将使用 `dbus-launch` 分别启动 `gnome-terminal` 和 `nautilus` 应用程序，每个应用程序都会在自己的会话总线上运行，并且当会话总线结束时，这两个应用程序都将退出。

### 与环境变量一起使用
```bash
eval $(dbus-launch --exit-with-session --sh-syntax) && my_application
```
使用 `eval` 命令执行 `dbus-launch` 输出的环境变量设置，然后运行 `my_application`。这样 `my_application` 将在设置了环境变量的环境中运行。

`dbus-launch` 主要用于在启动新进程时设置D-Bus相关的环境变量，确保进程可以在D-Bus总线上进行通信。



## dbus-monitor
```bash
bash-5.1# dbus-monitor --help
Usage: /usr/bin/dbus-monitor [--system | --session | --address ADDRESS] [--monitor | --profile | --pcap | --binary ] [watch expressions]
```

### 监控会话总线上的消息
```bash
dbus-monitor
```
此命令将开始监控当前会话总线上的所有消息。

### 监控系统总线上的消息
```bash
dbus-monitor --system
```
此命令将开始监控系统总线上的所有消息。

### 监控特定地址上的总线消息
```bash
dbus-monitor --address=unix:path=/run/user/1000/bus
```
此命令将开始监控指定地址的总线上的所有消息，例如位于 `/run/user/1000/bus` 的 Unix 域套接字。

### 监控并过滤特定的消息
```bash
dbus-monitor 'type="method_call",interface="org.freedesktop.DBus"'
```
此命令将监控所有类型为 `method_call` 并且接口为 `org.freedesktop.DBus` 的消息。

### 以二进制格式输出消息
```bash
dbus-monitor --binary
```
此命令将监控总线上的消息，并以二进制格式输出。

### 以 pcap 格式输出消息
```bash
dbus-monitor --pcap
```
此命令将监控总线上的消息，并以 pcap 格式输出，方便在网络分析工具中进一步分析。

### 以 profile 模式监控消息
```bash
dbus-monitor --profile
```
此命令将监控总线上的消息，并以 profile 模式输出，提供更详细的性能和统计信息。

### 保存监控结果到文件
```bash
dbus-monitor > monitor.log
```
此命令将监控的结果重定向到 `monitor.log` 文件中，便于后续分析。

在使用 `dbus-monitor` 时，可以根据需要使用不同的选项和过滤条件来监控特定类型的消息或特定总线上的消息。这在调试和理解D-Bus通信模式时非常有用。

## dbus-send
```bash
bash-5.1# dbus-send --help
Usage: /usr/bin/dbus-send [--help] [--system | --session | --bus=ADDRESS | --peer=ADDRESS] [--dest=NAME] [--type=TYPE] [--print-reply[=literal]] [--reply-timeout=MSEC] <destination object path> <message name> [contents ...]
```

### 发送信号给系统总线上的对象
```bash
dbus-send --system /org/freedesktop/UPower org.freedesktop.UPower.GetCriticalAction
```
此命令将发送一个信号 `GetCriticalAction` 给位于系统总线上的 `org.freedesktop.UPower` 对象。

### 发送信号给会话总线上的对象
```bash
dbus-send --session /org/gnome/SessionManager org.gnome.SessionManager.LockScreen
```
此命令将发送一个信号 `LockScreen` 给位于会话总线上的 `org.gnome.SessionManager` 对象。

### 指定目标名称发送信号
```bash
dbus-send --dest=org.bluez /org/bluez/hci0 org.bluez.Adapter1.StartDiscovery
```
此命令将发送一个信号 `StartDiscovery` 给位于 `org.bluez` 名称下的 `Adapter1` 对象。

### 发送方法调用并打印回复
```bash
dbus-send --print-reply --dest=org.bluez /org/bluez/hci0 org.bluez.Adapter1.GetProperties
```
此命令将调用 `GetProperties` 方法并打印从 `org.bluez` 名称下的 `Adapter1` 对象返回的属性。

### 发送方法调用并设置超时时间
```bash
dbus-send --reply-timeout=5000 --dest=org.bluez /org/bluez/hci0 org.bluez.Adapter1.StopDiscovery
```
此命令将调用 `StopDiscovery` 方法，并在等待回复时设置超时时间为 5000 毫秒。

### 发送带有参数的方法调用
```bash
dbus-send --dest=org.bluez /org/bluez/hci0/org/bluez/device1 org.bluez.Device1.Connect arg0:string:"00:11:22:33:44:55"
```
此命令将调用 `Connect` 方法，并传递字符串 `"00:11:22:33:44:55"` 作为参数。

### 发送信号并携带字典参数
```bash
dbus-send --dest=org.bluez /org/bluez/hci0 org.bluez.Adapter1.SetDiscoveryFilter array:string:[{s "Transport": s "le"}]
```
此命令将发送 `SetDiscoveryFilter` 信号，并携带一个字典参数 `{ "Transport": "le" }`。

以上命令展示了如何使用 `dbus-send` 工具与 D-Bus 总线上的对象进行交互，包括发送信号、调用方法以及处理回复。D-Bus 是一个用于进程间通信的机制，被广泛应用于 Linux 和其他类 Unix 操作系统中，用于应用程序间的通信和系统管理。通过 `dbus-send`，开发者和系统管理员能够直接与 D-Bus 上的对象交互，进行调试、监控和控制。

## dbus-binding-tool

```bash
bash-5.1# dbus-binding-tool --help
dbus-binding-tool [--version] [--help]
dbus-binding-tool --mode=[pretty|glib-server|glib-client] [--prefix=SYMBOL_PREFIX] [--ignore-unsupported] [--force] [--output=FILE]
dbus-binding-tool --mode=glib-server --prefix=SYMBOL_PREFIX [--ignore-unsupported] [--force] [--output=FILE]
```
### 显示版本信息
```bash
dbus-binding-tool --version
```
此命令将显示 `dbus-binding-tool` 的版本信息。

### 显示帮助信息
```bash
dbus-binding-tool --help
```
此命令将显示 `dbus-binding-tool` 的帮助信息。

### 生成美化后的 D-Bus 绑定代码
```bash
dbus-binding-tool --mode=pretty --output=dbus-bindings.h
```
此命令将以美化格式生成 D-Bus 绑定代码，并将其保存到 `dbus-bindings.h` 文件中。

### 生成 GLib 服务器端绑定代码
```bash
dbus-binding-tool --mode=glib-server --prefix=MyApp --output=myapp_dbus_bindings.c
```
此命令将生成用于 GLib 服务器端的 D-Bus 绑定代码，代码前缀为 `MyApp`，并将输出保存到 `myapp_dbus_bindings.c` 文件中。

### 生成 GLib 客户端绑定代码
```bash
dbus-binding-tool --mode=glib-client --prefix=MyClient --output=myclient_dbus_bindings.c
```
此命令将生成用于 GLib 客户端的 D-Bus 绑定代码，代码前缀为 `MyClient`，并将输出保存到 `myclient_dbus_bindings.c` 文件中。

### 忽略不受支持的接口
```bash
dbus-binding-tool --mode=glib-server --prefix=MyApp --ignore-unsupported --output=myapp_dbus_bindings.c
```
此命令将生成用于 GLib 服务器端的 D-Bus 绑定代码，且在生成过程中忽略任何不受支持的 D-Bus 接口。

### 强制覆盖输出文件
```bash
dbus-binding-tool --mode=glib-server --prefix=MyApp --force --output=myapp_dbus_bindings.c
```
此命令将生成用于 GLib 服务器端的 D-Bus 绑定代码，并在输出文件已存在的情况下强制覆盖它。

以上命令展示了如何使用 `dbus-binding-tool` 来生成针对 D-Bus 接口的绑定代码，这些绑定代码可以用于 GLib 服务器或客户端的开发，使得与 D-Bus 总线上的服务交互变得更加简单和高效。在实际项目中，生成的绑定代码可以减少手动编写 D-Bus 调用的复杂性，并提高代码的可维护性和可读性。


## dbus-cleanup-sockets
```bash
root@AM62x:~# dbus-cleanup-sockets --help
dbus-cleanup-sockets [--version] [--help] <socketdir>
```


## dbus-run-session
```bash
root@AM62x:~# dbus-run-session --help
dbus-run-session [OPTIONS] [--] PROGRAM [ARGUMENTS]
dbus-run-session --version
dbus-run-session --help

Options:
--dbus-daemon=BINARY       run BINARY instead of dbus-daemon
--config-file=FILENAME     pass to dbus-daemon instead of --session
```


## dbus-test-tool
```bash
root@AM62x:~# dbus-test-tool --help
Usage: dbus-test-tool SUBCOMMAND [OPTIONS]

Known SUBCOMMANDs are:

- black-hole
- echo
- spam

For more information: dbus-test-tool SUBCOMMAND --help
```

### black-hole
```bash
root@AM62x:~# dbus-test-tool black-hole --help
Usage: dbus-test-tool black-hole [OPTIONS]

Receive method calls but do not reply.

Options:

    --name=NAME   claim this well-known name first

    --no-read     don't read anything on the D-Bus socket

    --session     use the session bus (default)
    --system      use the system bus
```



### echo
```bash
root@AM62x:~# dbus-test-tool echo --help
Usage: dbus-test-tool echo [OPTIONS]

Respond to all method calls with an empty reply.

Options:

    --name=NAME   claim this well-known name first

    --sleep-ms=N  sleep N milliseconds before sending each reply

    --session     use the session bus (default)
    --system      use the system bus
```


### spam
```bash
root@AM62x:~# dbus-test-tool spam --help
Usage: dbus-test-tool spam [OPTIONS]

Repeatedly call com.example.Spam() on the given D-Bus service.

Options:

    --session     use the session bus (default)
    --system      use the system bus

    --ignore-errors    ignore errors
    --dest=NAME   call methods on NAME (default org.freedesktop.DBus)

    --count=N     send N messages (default 1)
    --queue=N     queue up N messages at a time (default 1)
    --flood       send all messages immediately
    --no-reply    set the NO_REPLY flag (implies --flood)
    --messages-per-conn=N   after sending messages-per-conn, wait
                  for the pending replies if any, then reconnect
                  (default: don't reconnect)

    --string      send payload as a string (default)
    --bytes       send payload as a byte-array
    --empty       send an empty payload

    --payload=S   use S as payload (default "hello, world!")
    --stdin       read payload from stdin, until EOF
    --message-stdin   read a complete D-Bus message from stdin
    --random-size read whitespace-separated ASCII decimal
                  payload sizes from stdin and pick one randomly
                  for each message

    --seed=SEED   seed for srand (default is time())
```


## dbus-uuidgen
```bash
root@AM62x:~# dbus-uuidgen --help
Usage: dbus-uuidgen [--ensure[=FILENAME]] [--get[=FILENAME]]
```


## dbus-update-activation-environment
```bash
root@AM62x:~# dbus-update-activation-environment --help
dbus-update-activation-environment: update environment variables that will be set for D-Bus
    session services

dbus-update-activation-environment [options] VAR[=VAL] [VAR2[=VAL2] ...]
    Add specified variables to D-Bus activation environment.
    If omitted, values are taken from current environment;
    variables not found in the environment are ignored.
dbus-update-activation-environment --all
    Add entire current environment to D-Bus activation
    environment.

Options:

--all
    Upload all environment variables.
--systemd
    Also update the 'systemd --user' environment
    if possible.
--verbose
    Talk about it.
```
  
  
# brcm
## brcm_patchram_plus
```bash
bash-5.1# brcm_patchram_plus --help
/usr/bin/brcm_patchram_plus: unrecognized option '--help'
Usage /usr/bin/brcm_patchram_plus:
        <-d> to print a debug log
        <--patchram patchram_file>
        <--baudrate baud_rate>
        <--bd_addr bd_address>
        <--enable_lpm>
        <--enable_hci>
        <--use_baudrate_for_download> - Uses the
                baudrate for downloading the firmware
        <--autobaud_mode> - Operate in autobaud
                compatible mode
        <--scopcm=sco_routing,pcm_interface_rate,frame_type,
                sync_mode,clock_mode,lsb_first,fill_bits,
                fill_method,fill_num,right_justify>

                Where

                sco_routing is 0 for PCM, 1 for Transport,
                2 for Codec and 3 for I2S,

                pcm_interface_rate is 0 for 128KBps, 1 for
                256 KBps, 2 for 512KBps, 3 for 1024KBps,
                and 4 for 2048Kbps,

                frame_type is 0 for short and 1 for long,
                sync_mode is 0 for slave and 1 for master,

                clock_mode is 0 for slabe and 1 for master,

                lsb_first is 0 for false aand 1 for true,

                fill_bits is the value in decimal for unused bits,

                fill_method is 0 for 0's and 1 for 1's, 2 for
                signed and 3 for programmable,

                fill_num is the number or bits to fill,

                right_justify is 0 for false and 1 for true

        <--i2s=i2s_enable,is_master,sample_rate,clock_rate>

                Where

                i2s_enable is 0 for disable and 1 for enable,

                is_master is 0 for slave and 1 for master,

                sample_rate is 0 for 8KHz, 1 for 16Khz and
                2 for 4 KHz,

                clock_rate is 0 for 128KHz, 1 for 256KHz, 3 for
                1024 KHz and 4 for 2048 KHz.

        <--no2bytes skips waiting for two byte confirmation
                before starting patchram download. Newer chips
                do not generate these two bytes.>
        <--tosleep=microseconds>
        uart_device_name
```

### 打印调试日志
```bash
brcm_patchram_plus -d
```

### 指定Patchram文件
```bash
brcm_patchram_plus --patchram /path/to/patchram_file
```

### 设置波特率
```bash
brcm_patchram_plus --baudrate 115200
```

### 设置蓝牙设备地址
```bash
brcm_patchram_plus --bd_addr 00:11:22:33:44:55
```

### 启用低功耗模式
```bash
brcm_patchram_plus --enable_lpm
```

### 启用HCI模式
```bash
brcm_patchram_plus --enable_hci
```

### 使用波特率下载固件
```bash
brcm_patchram_plus --use_baudrate_for_download
```

### 启用自动波特率模式
```bash
brcm_patchram_plus --autobaud_mode
```

### 配置SCO PCM参数
```bash
brcm_patchram_plus --scopcm=0,0,0,0,0,0,0,0,0,0
```
这里的参数分别对应：
- sco_routing: PCM (0)
- pcm_interface_rate: 128Kbps (0)
- frame_type: Short (0)
- sync_mode: Slave (0)
- clock_mode: Slave (0)
- lsb_first: False (0)
- fill_bits: 0
- fill_method: 0 (0's)
- fill_num: 0
- right_justify: False (0)

### 配置I2S参数
```bash
brcm_patchram_plus --i2s=1,1,1,1
```
这里的参数分别对应：
- i2s_enable: Enable (1)
- is_master: Master (1)
- sample_rate: 16KHz (1)
- clock_rate: 256KHz (1)

### 跳过两字节确认
```bash
brcm_patchram_plus --no2bytes
```

### 指定延时时间
```bash
brcm_patchram_plus --tosleep=1000000
```

### 指定UART设备名称
```bash
brcm_patchram_plus /dev/ttyUSB0
```


## hex2hcd
```bash
bash-5.1# hex2hcd --help
Broadcom Bluetooth firmware converter
Usage:
        hex2hcd [options] <file>
Options:
        -o, --output <file>    Provide firmware output file
        -h, --help             Show help options
```


### 转换文件至HCD格式
```bash
hex2hcd input.hex
```
这里 `input.hex` 是你要转换的原始Hex格式的固件文件。

### 指定输出文件名
```bash
hex2hcd -o output.hcd input.hex
```
或
```bash
hex2hcd --output output.hcd input.hex
```
在这两个命令中，`output.hcd` 是转换后的HCD格式文件的目标名称。

### 显示帮助选项
```bash
hex2hcd -h

hex2hcd --help
```

在使用 `hex2hcd` 命令时，请确保你有权限写入输出文件的目录，并且输入的文件确实是以Hex格式存储的Broadcom蓝牙固件。


## hid2hci


# hci
## hciconfig
```bash
bash-5.1# hciconfig --help
hciconfig - HCI device configuration utility
Usage:
        hciconfig
        hciconfig [-a] hciX [command ...]
Commands:
        up                      Open and initialize HCI device
        down                    Close HCI device
        reset                   Reset HCI device
        rstat                   Reset statistic counters
        auth                    Enable Authentication
        noauth                  Disable Authentication
        encrypt                 Enable Encryption
        noencrypt               Disable Encryption
        piscan                  Enable Page and Inquiry scan
        noscan                  Disable scan
        iscan                   Enable Inquiry scan
        pscan                   Enable Page scan
        ptype      [type]       Get/Set default packet type
        lm         [mode]       Get/Set default link mode
        lp         [policy]     Get/Set default link policy
        name       [name]       Get/Set local name
        class      [class]      Get/Set class of device
        voice      [voice]      Get/Set voice setting
        iac        [iac]        Get/Set inquiry access code
        inqtpl     [level]      Get/Set inquiry transmit power level
        inqmode    [mode]       Get/Set inquiry mode
        inqdata    [data]       Get/Set inquiry data
        inqtype    [type]       Get/Set inquiry scan type
        inqparms   [win:int]    Get/Set inquiry scan window and interval
        pageparms  [win:int]    Get/Set page scan window and interval
        pageto     [to]         Get/Set page timeout
        afhmode    [mode]       Get/Set AFH mode
        sspmode    [mode]       Get/Set Simple Pairing Mode
        aclmtu     <mtu:pkt>    Set ACL MTU and number of packets
        scomtu     <mtu:pkt>    Set SCO MTU and number of packets
        delkey     <bdaddr>     Delete link key from the device
        oobdata                 Get local OOB data
        commands                Display supported commands
        features                Display device features
        version                 Display version information
        revision                Display revision information
        block      <bdaddr>     Add a device to the reject list
        unblock    <bdaddr>     Remove a device from the reject list
        lerandaddr <bdaddr>     Set LE Random Address
        leadv      [type]       Enable LE advertising
                        0 - Connectable undirected advertising (default)
                        3 - Non connectable undirected advertising
        noleadv                 Disable LE advertising
        lestates                Display the supported LE states
```

### 打开并初始化 HCI 设备
```bash
hciconfig hci0 up
```
此命令将打开并初始化 `hci0` 设备。

### 关闭 HCI 设备
```bash
hciconfig hci0 down
```
此命令将关闭 `hci0` 设备。

### 重置 HCI 设备
```bash
hciconfig hci0 reset
```
此命令将重置 `hci0` 设备。

### 重置统计计数器
```bash
hciconfig hci0 rstat
```
此命令将重置 `hci0` 设备的统计计数器。

### 启用身份验证
```bash
hciconfig hci0 auth
```
启用 `hci0` 设备的身份验证。

### 禁用身份验证
```bash
hciconfig hci0 noauth
```
禁用 `hci0` 设备的身份验证。

### 启用加密
```bash
hciconfig hci0 encrypt
```
启用 `hci0` 设备的加密。

### 禁用加密
```bash
hciconfig hci0 noencrypt
```
禁用 `hci0` 设备的加密。

### 启用扫描
```bash
hciconfig hci0 piscan
```
启用 `hci0` 设备的页面和查询扫描。

### 禁用扫描
```bash
hciconfig hci0 noscan
```
禁用 `hci0` 设备的扫描。

### 设置本地名称
```bash
hciconfig hci0 name "MyDevice"
```
设置 `hci0` 设备的本地名称为 "MyDevice"。

### 获取或设置设备类
```bash
hciconfig hci0 class 0x000100
```
设置 `hci0` 设备的类为 `0x000100`。

### 获取或设置链接模式
```bash
hciconfig hci0 lm MASTER
```
设置 `hci0` 设备的默认链接模式为 MASTER。

### 获取或设置链接策略
```bash
hciconfig hci0 lp HOLD_MODE
```
设置 `hci0` 设备的默认链接策略为 HOLD_MODE。

### 删除设备的链接密钥
```bash
hciconfig hci0 delkey 00:11:22:33:44:55
```
从 `hci0` 设备删除与 `00:11:22:33:44:55` 设备的链接密钥。

### 显示支持的命令
```bash
hciconfig hci0 commands
```
显示 `hci0` 设备支持的所有命令。

### 显示设备特性
```bash
hciconfig hci0 features
```
显示 `hci0` 设备的特性。

### 显示版本信息
```bash
hciconfig hci0 version
```
显示 `hci0` 设备的版本信息。

### 显示修订信息
```bash
hciconfig hci0 revision
```
显示 `hci0` 设备的修订信息。

### 添加设备到拒绝列表
```bash
hciconfig hci0 block 00:11:22:33:44:55
```
将设备 `00:11:22:33:44:55` 添加到 `hci0` 设备的拒绝列表。

### 从拒绝列表中移除设备
```bash
hciconfig hci0 unblock 00:11:22:33:44:55
```
从 `hci0` 设备的拒绝列表中移除设备 `00:11:22:33:44:55`。

### 设置 LE 随机地址
```bash
hciconfig hci0 lerandaddr 11:22:33:44:55:66
```
设置 `hci0` 设备的 LE 随机地址为 `11:22:33:44:55:66`。

### 启用 LE 广告
```bash
hciconfig hci0 leadv 3
```
启用 `hci0` 设备的非连接定向广告。

### 禁用 LE 广告
```bash
hciconfig hci0 noleadv
```
禁用 `hci0` 设备的 LE 广告。

### 显示支持的 LE 状态
```bash
hciconfig hci0 lestates
```
显示 `hci0` 设备支持的所有 LE 状态。


## hcitool
```bash
bash-5.1# hcitool --help
hcitool - HCI Tool ver 5.63
Usage:
        hcitool [options] <command> [command parameters]
Options:
        --help  Display help
        -i dev  HCI device
Commands:
        dev     Display local devices
        inq     Inquire remote devices
        scan    Scan for remote devices
        name    Get name from remote device
        info    Get information from remote device
        spinq   Start periodic inquiry
        epinq   Exit periodic inquiry
        cmd     Submit arbitrary HCI commands
        con     Display active connections
        cc      Create connection to remote device
        dc      Disconnect from remote device
        sr      Switch central/peripheral role
        cpt     Change connection packet type
        rssi    Display connection RSSI
        lq      Display link quality
        tpl     Display transmit power level
        afh     Display AFH channel map
        lp      Set/display link policy settings
        lst     Set/display link supervision timeout
        auth    Request authentication
        enc     Set connection encryption
        key     Change connection link key
        clkoff  Read clock offset
        clock   Read local or remote clock
        lescan  Start LE scan
        leinfo  Get LE remote information
        lealadd Add device to LE Accept List
        lealrm  Remove device from LE Accept List
        lealsz  Read size of LE Accept List
        lealclr Clear LE Accept List
        lewladd Deprecated. Use lealadd instead.
        lewlrm  Deprecated. Use lealrm instead.
        lewlsz  Deprecated. Use lealsz instead.
        lewlclr Deprecated. Use lealclr instead.
        lerladd Add device to LE Resolving List
        lerlrm  Remove device from LE Resolving List
        lerlclr Clear LE Resolving List
        lerlsz  Read size of LE Resolving List
        lerlon  Enable LE Address Resolution
        lerloff Disable LE Address Resolution
        lecc    Create a LE Connection
        ledc    Disconnect a LE Connection
        lecup   LE Connection Update

For more information on the usage of each command use:
        hcitool <command> --help
```

### 显示本地设备
```bash
hcitool dev
```
此命令将显示所有本地蓝牙设备的信息。

### 查询远程设备
```bash
hcitool inq
```
此命令将启动查询过程，寻找附近的蓝牙设备。

### 扫描远程设备
```bash
hcitool scan
```
此命令将开始扫描周围的蓝牙设备。

### 获取远程设备名称
```bash
hcitool name BDADDR
```
此命令将获取蓝牙设备 BDADDR 的名称。

### 获取远程设备信息
```bash
hcitool info BDADDR
```
此命令将获取蓝牙设备 BDADDR 的详细信息。

### 开始周期性查询
```bash
hcitool spinq
```
此命令将启动周期性的设备查询。

### 停止周期性查询
```bash
hcitool epinq
```
此命令将停止正在进行的周期性设备查询。

### 提交任意的 HCI 命令
```bash
hcitool cmd 0x08 0x000C
```
此命令将提交一个特定的 HCI 命令，例如，这里发送的是一个读取本地支持的命令的命令。

### 显示活跃连接
```bash
hcitool con
```
此命令将显示所有当前活跃的蓝牙连接。

### 创建连接到远程设备
```bash
hcitool cc BDADDR
```
此命令将尝试连接到远程蓝牙设备 BDADDR。

### 断开远程设备连接
```bash
hcitool dc BDADDR
```
此命令将断开与远程蓝牙设备 BDADDR 的连接。

### 切换中心/外围角色
```bash
hcitool sr
```
此命令将切换蓝牙设备的角色，从中心设备变为外围设备，或反之。

### 更改连接数据包类型
```bash
hcitool cpt BDADDR PKT_TYPE
```
此命令将更改与远程设备 BDADDR 的连接的数据包类型为 PKT_TYPE。

### 显示连接的 RSSI
```bash
hcitool rssi BDADDR
```
此命令将显示与远程设备 BDADDR 连接的接收信号强度指示（RSSI）。

### 显示链路质量
```bash
hcitool lq BDADDR
```
此命令将显示与远程设备 BDADDR 连接的链路质量。

### 显示传输功率等级
```bash
hcitool tpl BDADDR
```
此命令将显示远程设备 BDADDR 的传输功率等级。

### 显示 AFH 信道映射
```bash
hcitool afh BDADDR
```
此命令将显示与远程设备 BDADDR 连接的自适应频率跳变（AFH）信道映射。

### 设置/显示链路策略
```bash
hcitool lp BDADDR POLICY
```
此命令将设置或显示与远程设备 BDADDR 连接的链路策略。

### 设置/显示链路监督超时
```bash
hcitool lst BDADDR TIMEOUT
```
此命令将设置或显示与远程设备 BDADDR 连接的链路监督超时。

### 请求认证
```bash
hcitool auth BDADDR
```
此命令将请求与远程设备 BDADDR 的连接进行认证。

### 设置连接加密
```bash
hcitool enc BDADDR LEVEL
```
此命令将设置与远程设备 BDADDR 连接的加密级别。

### 更改连接链接密钥
```bash
hcitool key BDADDR NEW_KEY
```
此命令将更改与远程设备 BDADDR 连接的链接密钥。

### 读取时钟偏移
```bash
hcitool clkoff BDADDR
```
此命令将读取与远程设备 BDADDR 连接的时钟偏移。

### 读取本地或远程时钟
```bash
hcitool clock BDADDR
```
此命令将读取本地或远程设备 BDADDR 的时钟。

### 开始 LE 扫描
```bash
hcitool lescan
```
此命令将开始低功耗（LE）扫描，寻找周围的 LE 设备。

### 获取 LE 远程信息
```bash
hcitool leinfo BDADDR
```
此命令将获取 LE 蓝牙设备 BDADDR 的信息。

### 将设备添加到 LE 接收列表
```bash
hcitool lealadd BDADDR
```
此命令将把远程设备 BDADDR 添加到 LE 接收列表。

### 从 LE 接收列表移除设备
```bash
hcitool lealrm BDADDR
```
此命令将从 LE 接收列表中移除远程设备 BDADDR。

### 清空 LE 接收列表
```bash
hcitool lealclr
```
此命令将清空 LE 接收列表。

### 读取 LE 接收列表大小
```bash
hcitool lealsz
```
此命令将读取 LE 接收列表的大小。

### 启用 LE 地址解析
```bash
hcitool lerlon
```
此命令将启用 LE 地址解析。

### 禁用 LE 地址解析
```bash
hcitool lerloff
```
此命令将禁用 LE 地址解析。

### 创建 LE 连接
```bash
hcitool lecc BDADDR
```
此命令将创建与远程 LE 设备 BDADDR 的连接。

### 断开 LE 连接
```bash
hcitool ledc BDADDR
```
此命令将断开与远程 LE 设备 BDADDR 的连接。

### 更新 LE 连接
```bash
hcitool lecup BDADDR
```
此命令将更新与远程 LE 设备 BDADDR 的连接参数。



## hciattach
```bash
bash-5.1# hciattach --help
hciattach - HCI UART driver initialization utility
Usage:
        hciattach [-n] [-p] [-b] [-r] [-t timeout] [-s initial_speed] <tty> <type | id> [speed] [flow|noflow] [sleep|nosleep] [bdaddr]
        hciattach -l
```

### 初始化 UART 蓝牙设备
```bash
hciattach /dev/ttyUSB0 any 9600 noflow
```
此命令将初始化 `/dev/ttyUSB0` 上的 UART 蓝牙设备，使用自动检测的 UART 类型，波特率为 9600，无流控制。

### 使用特定的 UART 类型初始化设备
```bash
hciattach /dev/ttyUSB0 bcm2042 115200 flow
```
此命令将初始化 `/dev/ttyUSB0` 上的 UART 蓝牙设备，使用 `bcm2042` 类型的 UART，波特率为 115200，使用流控制。

### 初始化设备并设置睡眠模式
```bash
hciattach /dev/ttyUSB0 any 9600 nosleep
```
此命令将初始化 UART 蓝牙设备，设置为不进入睡眠模式。

### 初始化设备并指定蓝牙地址
```bash
hciattach /dev/ttyUSB0 any 9600 noflow 00:11:22:33:44:55
```
此命令将初始化 UART 蓝牙设备，并指定蓝牙设备的 MAC 地址为 `00:11:22:33:44:55`。

### 设置初始化超时
```bash
hciattach -t 10 /dev/ttyUSB0 any 9600 noflow
```
此命令将初始化 UART 蓝牙设备，并设置初始化超时时间为 10 秒。

### 设置初始速度
```bash
hciattach -s 9600 /dev/ttyUSB0 any 115200 noflow
```
此命令将初始化 UART 蓝牙设备，并设置初始速度为 9600 波特，在成功初始化后将速度改为 115200 波特。

### 强制模式
```bash
hciattach -f /dev/ttyUSB0 any 9600 noflow
```
此命令将强制初始化 UART 蓝牙设备，即使设备可能已经初始化。

### 不显示警告信息
```bash
hciattach -n /dev/ttyUSB0 any 9600 noflow
```
此命令将初始化 UART 蓝牙设备，但不会显示非致命的警告信息。

### 列出已连接的 UART 蓝牙设备
```bash
hciattach -l
```
此命令将列出所有当前通过 UART 连接的蓝牙设备。

在使用 `hciattach` 命令时，通常需要根据具体的 UART 蓝牙模块的类型和要求来选择正确的参数。例如，一些模块可能需要特定的波特率或流控制选项。此外，如果设备没有正确识别或连接，可能需要检查串行端口是否正确，以及是否有权限访问该端口。


## hcidump
```bash
bash-5.1# hcidump --help
Usage: hcidump [OPTION...] [filter]
  -i, --device=hci_dev       HCI device
  -l, --snap-len=len         Snap len (in bytes)
  -p, --psm=psm              Default PSM
  -m, --manufacturer=compid  Default manufacturer
  -w, --save-dump=file       Save dump to a file
  -r, --read-dump=file       Read dump from a file
  -t, --ts                   Display time stamps
  -a, --ascii                Dump data in ascii
  -x, --hex                  Dump data in hex
  -X, --ext                  Dump data in hex and ascii
  -R, --raw                  Dump raw data
  -C, --cmtp=psm             PSM for CMTP
  -H, --hcrp=psm             PSM for HCRP
  -O, --obex=port            Channel/PSM for OBEX
  -P, --ppp=channel          Channel for PPP
  -S, --sap=channel          Channel for SAP
  -D, --pppdump=file         Extract PPP traffic
  -A, --audio=file           Extract SCO audio data
  -Y, --novendor             No vendor commands or events
  -h, --help                 Give this help list
  -v, --version              Give version information
      --usage                Give a short usage message
```

### 捕获特定 HCI 设备的 HCI 数据包
```bash
hcidump -i hci0
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包。

### 指定数据包捕获长度
```bash
hcidump -i hci0 -l 1024
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，数据部分的最大长度为 1024 字节。

### 捕获并保存数据包到文件
```bash
hcidump -i hci0 -w capture.pcap
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并将它们保存到名为 `capture.pcap` 的文件中。

### 从文件读取并重放数据包
```bash
hcidump -r capture.pcap
```
此命令将从 `capture.pcap` 文件中读取并重放 HCI 数据包。

### 显示时间戳
```bash
hcidump -i hci0 -t
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并在输出中显示时间戳。

### 以 ASCII 格式显示数据
```bash
hcidump -i hci0 -a
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并以 ASCII 格式显示数据部分。

### 以十六进制格式显示数据
```bash
hcidump -i hci0 -x
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并以十六进制格式显示数据部分。

### 以十六进制和 ASCII 格式显示数据
```bash
hcidump -i hci0 -X
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并同时以十六进制和 ASCII 格式显示数据部分。

### 捕获原始数据
```bash
hcidump -i hci0 -R
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并以原始数据格式输出。

### 提取并保存 PPP 流量
```bash
hcidump -i hci0 -D pppdump.txt
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并将 PPP 流量提取并保存到 `pppdump.txt` 文件中。

### 提取并保存 SCO 音频数据
```bash
hcidump -i hci0 -A audio.dat
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并将 SCO 音频数据提取并保存到 `audio.dat` 文件中。

### 禁止显示厂商特定的命令和事件
```bash
hcidump -i hci0 -Y
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，但不会显示厂商特定的命令和事件。

### 指定默认 PSM
```bash
hcidump -i hci0 -p 17
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并设置默认的 PSM（Protocol Service Multiplexer）为 17。

### 指定制造商 ID
```bash
hcidump -i hci0 -m 0x1234
```
此命令将捕获来自 `hci0` 设备的 HCI 数据包，并设置默认制造商 ID 为 `0x1234`。

### 显示版本信息
```bash
hcidump --version
```
此命令将显示 `hcidump` 的版本信息。

### 显示简短的使用信息
```bash
hcidump --usage
```
此命令将显示 `hcidump` 的简短使用信息。

  
# bluez
## bluetoothctl
```bash
root@AM62x:~# bluetoothctl --help
bluetoothctl ver 5.63
Usage:
        bluetoothctl [--options] [commands]
Options:
        --agent         Register agent handler: <capability>
        --monitor       Enable monitor output
        --timeout       Timeout in seconds for non-interactive mode
        --version       Display version
        --help          Display help
Commands:
        list            List available controllers
        show            Controller information
        select          Select default controller
        devices         List available devices
        paired-devices  List paired devices
        system-alias    Set controller alias
        reset-alias     Reset controller alias
        power           Set controller power
        pairable        Set controller pairable mode
        discoverable    Set controller discoverable mode
        discoverable-timeout    Set discoverable timeout
        agent           Enable/disable agent with given capability
        default-agent   Set agent as the default one
        advertise       Enable/disable advertising with given type
        set-alias       Set device alias
        scan            Scan for devices
        info            Device information
        pair            Pair with device
        cancel-pairing  Cancel pairing with device
        trust           Trust device
        untrust         Untrust device
        block           Block device
        unblock         Unblock device
        remove          Remove device
        connect         Connect device
        disconnect      Disconnect device

        advertise.:
                uuids           Set/Get advertise uuids
                service         Set/Get advertise service data
                manufacturer    Set/Get advertise manufacturer data
                data            Set/Get advertise data
                discoverable    Set/Get advertise discoverable
                discoverable-timeout    Set/Get advertise discoverable timeout
                tx-power        Show/Enable/Disable TX power to be advertised
                name            Configure local name to be advertised
                appearance      Configure custom appearance to be advertised
                duration        Set/Get advertise duration
                timeout         Set/Get advertise timeout
                secondary       Set/Get advertise secondary channel
                interval        Set/Get advertise interval range
                clear           Clear advertise config

        monitor.:
                set-rssi-threshold      Set RSSI threshold parameter
                set-rssi-timeout        Set RSSI timeout parameter
                set-rssi-sampling-period        Set RSSI sampling period parameter
                add-or-pattern  Register 'or pattern' type monitor with the specified RSSI parameters
                get-pattern     Get advertisement monitor
                remove-pattern  Remove advertisement monitor
                get-supported-info      Get advertisement manager supported features and supported monitor types
                print-usage     Print the command usage

        scan.:
                uuids           Set/Get UUIDs filter
                rssi            Set/Get RSSI filter, and clears pathloss
                pathloss        Set/Get Pathloss filter, and clears RSSI
                transport       Set/Get transport filter
                duplicate-data  Set/Get duplicate data filter
                discoverable    Set/Get discoverable filter
                pattern         Set/Get pattern filter
                clear           Clears discovery filter.

        gatt.:
                list-attributes List attributes
                select-attribute        Select attribute
                attribute-info  Select attribute
                read            Read attribute value
                write           Write attribute value
                acquire-write   Acquire Write file descriptor
                release-write   Release Write file descriptor
                acquire-notify  Acquire Notify file descriptor
                release-notify  Release Notify file descriptor
                notify          Notify attribute value
                clone           Clone a device or attribute
                register-application    Register profile to connect
                unregister-application  Unregister profile
                register-service        Register application service.
                unregister-service      Unregister application service
                register-includes       Register as Included service in.
                unregister-includes     Unregister Included service.
                register-characteristic Register application characteristic
                unregister-characteristic       Unregister application characteristic
                register-descriptor     Register application descriptor
                unregister-descriptor   Unregister application descriptor

        admin.:
                allow           Allow service UUIDs and block rest of them
```

  
  
# l2cap
## l2ping
```bash
bash-5.1# l2ping --help
l2ping - L2CAP ping
Usage:
        l2ping [-i device] [-s size] [-c count] [-t timeout] [-d delay] [-f] [-r] [-v] <bdaddr>
        -f  Flood ping (delay = 0)
        -r  Reverse ping
        -v  Verify request and response payload

```

### 发送 L2CAP ping 请求
```bash
l2ping BDADDR
```
此命令将向蓝牙设备 BDADDR 发送 L2CAP ping 请求。

### 指定 L2CAP ping 的设备
```bash
l2ping -i hci0 BDADDR
```
此命令将通过指定的蓝牙设备 hci0 向蓝牙设备 BDADDR 发送 L2CAP ping 请求。

### 指定 L2CAP ping 数据包大小
```bash
l2ping -s 1024 BDADDR
```
此命令将向蓝牙设备 BDADDR 发送大小为 1024 字节的 L2CAP ping 请求。

### 指定 L2CAP ping 请求次数
```bash
l2ping -c 10 BDADDR
```
此命令将向蓝牙设备 BDADDR 发送 10 次 L2CAP ping 请求。

### 设置 L2CAP ping 超时时间
```bash
l2ping -t 5 BDADDR
```
此命令将向蓝牙设备 BDADDR 发送 L2CAP ping 请求，如果在 5 秒内没有响应则超时。

### 设置 L2CAP ping 请求之间的延迟
```bash
l2ping -d 1 BDADDR
```
此命令将向蓝牙设备 BDADDR 发送 L2CAP ping 请求，每次请求之间有 1 秒的延迟。

### Flood ping（零延迟）
```bash
l2ping -f BDADDR
```
此命令将向蓝牙设备 BDADDR 发送连续的 L2CAP ping 请求，请求之间没有延迟。

### 反向 ping
```bash
l2ping -r BDADDR
```
此命令将向蓝牙设备 BDADDR 发送反向的 L2CAP ping 请求，即等待对方发起 ping。

### 验证请求和响应负载
```bash
l2ping -v BDADDR
```
此命令将向蓝牙设备 BDADDR 发送 L2CAP ping 请求，并验证请求和响应的负载数据是否一致。

结合上述选项，你可以构建更复杂的 L2ping 命令，例如：
```bash
l2ping -i hci0 -s 512 -c 5 -t 3 BDADDR
```
此命令将通过 hci0 设备向 BDADDR 发送 5 次大小为 512 字节的 L2CAP ping 请求，每次请求超时时间为 3 秒。



## l2test
```bash
bash-5.1# l2test --help
l2test - L2CAP testing
Usage:
        l2test <mode> [options] [bdaddr]
Modes:
        -r listen and receive
        -w listen and send
        -d listen and dump incoming data
        -x listen, then send, then dump incoming data
        -t listen, then send and receive at the same time
        -q connect, then send and receive at the same time
        -s connect and send
        -u connect and receive
        -n connect and be silent
        -y connect, then send, then dump incoming data
        -c connect, disconnect, connect, ...
        -m multiple connects
        -p trigger dedicated bonding
        -z information request
Options:
        [-b bytes] [-i device] [-P psm] [-J cid]
        [-I imtu] [-O omtu]
        [-L seconds] enable SO_LINGER
        [-W seconds] enable deferred setup
        [-B filename] use data packets from file
        [-N num] send num frames (default = infinite)
        [-C num] send num frames before delay (default = 1)
        [-D milliseconds] delay after sending num frames (default = 0)
        [-K milliseconds] delay before receiving (default = 0)
        [-g milliseconds] delay before disconnecting (default = 0)
        [-X mode] l2cap mode (help for list, default = basic)
        [-a policy] chan policy (help for list, default = bredr)
        [-F fcs] use CRC16 check (default = 1)
        [-Q num] Max Transmit value (default = 3)
        [-Z size] Transmission Window size (default = 63)
        [-Y priority] socket priority
        [-H size] Maximum receive buffer size
        [-R] reliable mode
        [-G] use connectionless channel (datagram)
        [-U] use sock stream
        [-A] request authentication
        [-E] request encryption
        [-S] secure connection
        [-M] become central
        [-T] enable timestamps
        [-V type] address type (help for list, default = bredr)
        [-e seq] initial sequence value (default = 0)
```

### 监听并接收数据
```bash
l2test -r
```
此模式下，`l2test` 将监听并接收通过 L2CAP 连接发送来的数据。

### 监听并发送数据
```bash
l2test -w BDADDR
```
在此模式下，`l2test` 将监听来自蓝牙设备 BDADDR 的连接，并发送数据。

### 监听并转储数据
```bash
l2test -d BDADDR
```
此模式将监听来自蓝牙设备 BDADDR 的连接，并转储通过 L2CAP 连接接收的所有数据。

### 监听、发送、然后转储数据
```bash
l2test -x BDADDR
```
此模式下，`l2test` 将监听来自蓝牙设备 BDADDR 的连接，发送数据，然后转储接收的数据。

### 监听、同时发送和接收数据
```bash
l2test -t BDADDR
```
此模式下，`l2test` 将监听来自蓝牙设备 BDADDR 的连接，并同时发送和接收数据。

### 连接、同时发送和接收数据
```bash
l2test -q BDADDR
```
此模式下，`l2test` 将主动连接到蓝牙设备 BDADDR，并同时发送和接收数据。

### 连接并发送数据
```bash
l2test -s BDADDR
```
此模式下，`l2test` 将主动连接到蓝牙设备 BDADDR 并发送数据。

### 连接并接收数据
```bash
l2test -u BDADDR
```
此模式下，`l2test` 将主动连接到蓝牙设备 BDADDR 并接收数据。

### 连接并保持静默
```bash
l2test -n BDADDR
```
此模式下，`l2test` 将主动连接到蓝牙设备 BDADDR 但不发送或接收数据。

### 连接、发送、然后转储数据
```bash
l2test -y BDADDR
```
此模式下，`l2test` 将主动连接到蓝牙设备 BDADDR，发送数据，然后转储接收的数据。

### 连接、断开、再连接循环
```bash
l2test -c BDADDR
```
此模式下，`l2test` 将反复连接和断开与蓝牙设备 BDADDR 的连接。

### 多次连接
```bash
l2test -m BDADDR
```
此模式下，`l2test` 将尝试多次连接到蓝牙设备 BDADDR。

### 触发专用绑定
```bash
l2test -p BDADDR
```
此模式下，`l2test` 将触发与蓝牙设备 BDADDR 的专用绑定。

### 请求信息
```bash
l2test -z BDADDR
```
此模式下，`l2test` 将向蓝牙设备 BDADDR 发送信息请求。

### 设置选项
#### 指定发送字节数
```bash
l2test -r -b 1024 BDADDR
```
设置每次发送的字节数为 1024。

#### 指定设备
```bash
l2test -r -i hci0 BDADDR
```
指定要使用的蓝牙设备为 hci0。

#### 指定 PSM
```bash
l2test -r -P 17 BDADDR
```
指定 L2CAP 的 PSM（Protocol Service Multiplexer）为 17。

#### 指定 CID
```bash
l2test -r -J 4 BDADDR
```
指定 L2CAP 的通道 ID（CID）为 4。

#### 指定 IMTU
```bash
l2test -r -I 1024 BDADDR
```
设置 L2CAP 的输入 MTU（最大传输单元）为 1024。

#### 指定 OMTU
```bash
l2test -r -O 1024 BDADDR
```
设置 L2CAP 的输出 MTU（最大传输单元）为 1024。

#### 设置延迟时间
```bash
l2test -r -L 5 BDADDR
```
设置延迟选项为 5 秒。

#### 启用延迟设置
```bash
l2test -r -W 10 BDADDR
```
启用延迟 10 秒后再进行设置。

#### 使用数据包文件
```bash
l2test -r -B datafile BDADDR
```
从文件 datafile 中读取数据包。

#### 设置发送帧数
```bash
l2test -r -N 100 BDADDR
```
设置发送的帧数为 100。

#### 设置帧前的延迟帧数
```bash
l2test -r -C 5 BDADDR
```
设置每发送 5 帧后进行延迟。

#### 设置帧后延迟时间
```bash
l2test -r -D 500 BDADDR
```
设置每发送一定数量的帧后延迟 500 毫秒。

#### 设置接收前延迟时间
```bash
l2test -r -K 500 BDADDR
```
设置在接收数据前延迟 500 毫秒。

#### 设置断开前延迟时间
```bash
l2test -r -g 500 BDADDR
```
设置在断开连接前延迟 500 毫秒。

#### 设置 L2CAP 模式
```bash
l2test -r -X enhanced BDADDR
```
设置 L2CAP 的模式为增强模式。

#### 设置通道策略
```bash
l2test -r -a le BDADDR
```
设置通道策略为低功耗蓝牙（LE）。

#### 使用 CRC16 校验
```bash
l2test -r -F 1 BDADDR
```
启用使用 CRC16 校验。

#### 设置最大传输值
```bash
l2test -r -Q 5 BDADDR
```
设置最大传输值为 5。

#### 设置传输窗口大小
```bash
l2test -r -Z 64 BDADDR
```
设置传输窗口大小为 64。

#### 设置套接字优先级
```bash
l2test -r -Y 5 BDADDR
```
设置套接字优先级为 5。

#### 设置最大接收缓冲区大小
```bash
l2test -r -H 1024 BDADDR
```
设置最大接收缓冲区大小为 1024 字节。

#### 可靠模式
```bash
l2test -r -R BDADDR
```
启用可靠模式。

#### 使用无连接通道
```bash
l2test -r -G BDADDR
```
使用无连接通道（数据报）。

#### 使用流套接字
```bash
l2test -r -U BDADDR
```
使用流套接字。

#### 请求认证
```bash
l2test -r -A BDADDR
```
请求 L2CAP 连接的认证。

#### 请求加密
```bash
l2test -r -E BDADDR
```
请求 L2CAP 连接的加密。

#### 安全连接
```bash
l2test -r -S BDADDR
```
建立安全的 L2CAP 连接。

#### 成为中心设备
```bash
l2test -r -M BDADDR
```
在连接时成为微微网的中心设备。

#### 启用时间戳
```bash
l2test -r -T BDADDR
```
在输出中启用时间戳。

#### 设置地址类型
```bash
l2test -r -V le BDADDR
```
设置地址类型为低功耗蓝牙（LE）。

#### 设置初始序列值
```bash
l2test -r -e 10 BDADDR
```
设置初始序列值为 10。



  
# obex
## obexctl
```bash
root@AM62x:~# obexctl --help
obexctl ver 5.63
Usage:
        obexctl [--options] [commands]
Options:
        --monitor       Enable monitor output
        --timeout       Timeout in seconds for non-interactive mode
        --version       Display version
        --help          Display help
```

## obexftp

## obex-client-tool

## obex-server-tool

  

  
  
# 监控
## btmon
```bash
bash-5.1# btmon --help
btmon - Bluetooth monitor
Usage:
        btmon [options]
options:
        -r, --read <file>      Read traces in btsnoop format
        -w, --write <file>     Save traces in btsnoop format
        -a, --analyze <file>   Analyze traces in btsnoop format
        -s, --server <socket>  Start monitor server socket
        -p, --priority <level> Show only priority or lower
        -i, --index <num>      Show only specified controller
        -d, --tty <tty>        Read data from TTY
        -B, --tty-speed <rate> Set TTY speed (default 115200)
        -V, --vendor <compid>  Set default company identifier
        -M, --mgmt             Open channel for mgmt events
        -t, --time             Show time instead of time offset
        -T, --date             Show time and date information
        -S, --sco              Dump SCO traffic
        -A, --a2dp             Dump A2DP stream traffic
        -E, --ellisys [ip]     Send Ellisys HCI Injection
        -P, --no-pager         Disable pager usage
        -J  --jlink <device>,[<serialno>],[<interface>],[<speed>]
                               Read data from RTT
        -R  --rtt [<address>],[<area>],[<name>]
                               RTT control block parameters
        -C, --columns [width]  Output width if not a terminal
        -c, --color [mode]     Output color: auto/always/never
        -h, --help             Show help options
```

### 读取 btsnoop 格式的跟踪文件
```bash
btmon -r trace.btsnoop
```
此命令将读取名为 `trace.btsnoop` 的文件中的 btsnoop 格式的跟踪数据。

### 保存跟踪到 btsnoop 格式的文件
```bash
btmon -w output.btsnoop
```
此命令将把跟踪数据保存到名为 `output.btsnoop` 的文件中。

### 分析 btsnoop 格式的跟踪文件
```bash
btmon -a trace.btsnoop
```
此命令将分析名为 `trace.btsnoop` 的文件中的 btsnoop 格式的跟踪数据。

### 启动监视服务器套接字
```bash
btmon -s /tmp/btmon.sock
```
此命令将启动一个监视服务器，监听在 `/tmp/btmon.sock`。

### 设置优先级
```bash
btmon -p 5
```
此命令将只显示优先级为 5 或更低的日志消息。

### 选择特定控制器
```bash
btmon -i 1
```
此命令将只显示来自第 1 控制器的信息。

### 从 TTY 读取数据
```bash
btmon -d /dev/ttyUSB0
```
此命令将从 `/dev/ttyUSB0` 读取数据。

### 设置 TTY 速度
```bash
btmon -B 9600
```
此命令将设置 TTY 的速度为 9600 波特。

### 设置默认公司标识符
```bash
btmon -V 0x1234
```
此命令将设置默认的公司标识符为 `0x1234`。

### 打开 MGMT 通道
```bash
btmon -M
```
此命令将打开用于 MGMT 事件的通道。

### 显示时间而不是时间偏移
```bash
btmon -t
```
此命令将显示绝对时间，而不是相对于启动的时间偏移。

### 显示时间和日期信息
```bash
btmon -T
```
此命令将显示时间和日期信息。

### 转储 SCO 交通
```bash
btmon -S
```
此命令将转储 SCO（同步连接导向）交通。

### 转储 A2DP 流交通
```bash
btmon -A
```
此命令将转储 A2DP（高级音频分发配置文件）流交通。

### 发送 Ellisys HCI 注入
```bash
btmon -E 192.168.1.100
```
此命令将向 IP 地址 `192.168.1.100` 发送 Ellisys HCI 注入。

### 禁用分页器
```bash
btmon -P
```
此命令将在输出时禁用分页器。

### 从 J-Link 读取数据
```bash
btmon -J JLinkARM,123456,0,115200
```
此命令将从 J-Link ARM 读取数据，其中 `123456` 是 J-Link 的序列号，`0` 是接口编号，`115200` 是波特率。

### 设置 RTT 控制块参数
```bash
btmon -R 00:11:22:33:44:55,0,trace
```
此命令将设置 RTT 控制块参数，其中 `00:11:22:33:44:55` 是设备地址，`0` 是区域，`trace` 是名称。

### 设置输出宽度
```bash
btmon -C 80
```
此命令将设置输出宽度为 80 个字符。

### 设置输出颜色模式
```bash
btmon -c always
```
此命令将设置输出颜色模式始终开启。

### 显示帮助选项
```bash
btmon -h
```
此命令将显示 btmon 的帮助选项。

`btmon` 是一个强大的工具，用于监视和分析蓝牙设备的 HCI 层通信。它可以读取、写入、分析 btsnoop 格式的跟踪文件，以及实时监视和分析来自不同来源的蓝牙数据。这些命令可以单独使用，也可以组合起来以满足特定的监视和调试需求。


## btmgmt

## bluemoon
```bash
bash-5.1# bluemoon --help
bluemoon - Bluemoon configuration utility
Usage:
        bluemoon [options]
Options:
        -A, --bdaddr [addr]    Set Bluetooth address
        -F, --firmware [file]  Load firmware
        -C, --check <file>     Check firmware image
        -R, --reset            Reset controller
        -B, --coldboot         Cold boot controller
        -E, --exception        Trigger exception
        -i, --index <num>      Use specified controller
        -h, --help             Show help options
```

### 设置蓝牙地址
```bash
bluemoon -A 00:11:22:33:44:55
```
此命令将蓝牙控制器的地址设置为 `00:11:22:33:44:55`。

### 加载固件
```bash
bluemoon -F firmware.bin
```
此命令将从文件 `firmware.bin` 中加载固件到蓝牙控制器。

### 检查固件镜像
```bash
bluemoon -C firmware.bin
```
此命令将检查 `firmware.bin` 文件中的固件镜像是否完整和正确。

### 重置控制器
```bash
bluemoon -R
```
此命令将重置蓝牙控制器，使其回到初始状态。

### 冷启动控制器
```bash
bluemoon -B
```
此命令将对蓝牙控制器进行冷启动，类似于电源关闭后再重新上电。

### 触发异常
```bash
bluemoon -E
```
此命令将触发蓝牙控制器的异常，用于调试目的。

### 选择特定控制器
```bash
bluemoon -i 1
```
此命令将选择第 1 个蓝牙控制器进行操作。

以上命令可以根据需要组合使用，以满足不同的蓝牙控制器配置和调试需求。在实际应用中，`bluemoon` 命令主要用于固件的加载、控制器的初始化和调试等场景。


# tool
## sdptool
```bash
bash-5.1# sdptool --help
sdptool - SDP tool v5.63
Usage:
        sdptool [options] <command> [command parameters]
Options:
        -h              Display help
        -i              Specify source interface
Commands:
        search          Search for a service
        browse          Browse all available services
        records         Request all records
        add             Add local service
        del             Delete local service
        get             Get local service
        setattr         Set/Add attribute to a SDP record
        setseq          Set/Add attribute sequence to a SDP record

Services:
        DID SP DUN LAN FAX OPUSH FTP PRINT HS HSAG HF HFAG SAP PBAP MAP
        NAP GN PANU HCRP HID KEYB WIIMOTE CIP CTP A2SRC A2SNK AVRCT AVRTG
        UDIUE UDITE SEMCHLA SR1 SYNCML SYNCMLSERV ACTIVESYNC HOTSYNC
        PALMOS NOKID PCSUITE NFTP NSYNCML NGAGE APPLE IAP ISYNC GATT
```

### 搜索服务
```bash
sdptool search SERVICE
```
此命令将搜索本地或远程设备上提供的特定服务。例如，搜索蓝牙耳机服务（Handsfree Audio Gateway）：
```bash
sdptool search hfag
```

### 浏览所有可用服务
```bash
sdptool browse BDADDR
```
此命令将浏览蓝牙设备 BDADDR 上的所有可用服务。例如，浏览本地蓝牙设备上的服务：
```bash
sdptool browse 00:11:22:33:44:55
```

### 请求所有记录
```bash
sdptool records BDADDR
```
此命令将请求蓝牙设备 BDADDR 上的所有 SDP 记录。例如，请求本地蓝牙设备上的所有记录：
```bash
sdptool records
```

### 添加本地服务
```bash
sdptool add SERVICE
```
此命令将添加一个本地服务到蓝牙设备的服务列表中。例如，添加打印服务：
```bash
sdptool add print
```

### 删除本地服务
```bash
sdptool del SERVICE
```
此命令将从蓝牙设备的服务列表中删除特定的服务。例如，删除打印服务：
```bash
sdptool del print
```

### 获取本地服务
```bash
sdptool get SERVICE
```
此命令将获取本地服务的详细信息。例如，获取打印服务的详细信息：
```bash
sdptool get print
```

### 设置 SDP 记录属性
```bash
sdptool setattr SERVICE ATTRIBUTE VALUE
```
此命令将设置或添加特定属性到 SDP 服务记录中。例如，设置打印服务的友好名称：
```bash
sdptool setattr print friendly_name "My Printer"
```

### 设置 SDP 记录属性序列
```bash
sdptool setseq SERVICE SEQUENCE_ATTRIBUTE VALUE
```
此命令将设置或添加属性序列到 SDP 服务记录中。例如，设置打印服务的协议序列：
```bash
sdptool setseq print protocol "L2CAP"
```



## gatttool
```bash
bash-5.1# gatttool --help
Usage:
  gatttool [OPTION?]

Help Options:
  -h, --help                                Show help options
  --help-all                                Show all help options
  --help-gatt                               Show all GATT commands
  --help-params                             Show all Primary Services/Characteristics arguments
  --help-char-read-write                    Show all Characteristics Value/Descriptor Read/Write arguments

Application Options:
  -i, --adapter=hciX                        Specify local adapter interface
  -b, --device=MAC                          Specify remote Bluetooth address
  -t, --addr-type=[public | random]         Set LE address type. Default: public
  -m, --mtu=MTU                             Specify the MTU size
  -p, --psm=PSM                             Specify the PSM for GATT/ATT over BR/EDR
  -l, --sec-level=[low | medium | high]     Set security level. Default: low
  -I, --interactive                         Use interactive mode

```

### 指定本地适配器接口
```bash
gatttool -i hci0
```
此命令将使用 `hci0` 作为本地蓝牙适配器接口。

### 指定远程蓝牙地址
```bash
gatttool -b 00:11:22:33:44:55
```
此命令将指定远程蓝牙设备的地址为 `00:11:22:33:44:55`。

### 设置 LE 地址类型
```bash
gatttool -t random
```
此命令将设置 LE 地址类型为随机地址。

### 指定 MTU 大小
```bash
gatttool -m 247
```
此命令将指定 MTU（最大传输单元）大小为 247 字节。

### 指定 PSM
```bash
gatttool -p 17
```
此命令将指定用于 GATT/ATT over BR/EDR 的 PSM（Protocol Service Multiplexer）为 17。

### 设置安全性级别
```bash
gatttool -l medium
```
此命令将设置安全性级别为 medium。

### 启用交互模式
```bash
gatttool -I
```
此命令将使 gatttool 进入交互模式，允许用户输入命令进行交互式操作。

#### 交互模式示例
一旦 gatttool 在交互模式下运行，你可以输入以下命令：

- **连接到远程设备**
  ```bash
  connect
  ```

- **列出主服务**
  ```bash
  primary
  ```

- **列出特征**
  ```bash
  characteristics
  ```

- **读取特征值**
  ```bash
  read-value HANDLE
  ```
  其中 `HANDLE` 是特征的句柄。

- **写入特征值**
  ```bash
  write-value HANDLE VALUE
  ```
  其中 `HANDLE` 是特征的句柄，`VALUE` 是要写入的值。

- **读取描述符**
  ```bash
  read-desc HANDLE
  ```
  其中 `HANDLE` 是描述符的句柄。

- **写入描述符**
  ```bash
  write-desc HANDLE VALUE
  ```
  其中 `HANDLE` 是描述符的句柄，`VALUE` 是要写入的值。

- **发现服务**
  ```bash
  discover-services
  ```

- **发现特征**
  ```bash
  discover-characteristics
  ```

- **发现描述符**
  ```bash
  discover-descriptors
  ```

- **订阅通知**
  ```bash
  subscribe HANDLE
  ```

- **取消订阅通知**
  ```bash
  unsubscribe HANDLE
  ```

- **断开连接**
  ```bash
  disconnect
  ```

在实际使用中，gatttool 是一个非常强大的工具，用于与 BLE（Bluetooth Low Energy）设备交互，读写 GATT 特征和描述符，以及监控通知和指示。通过交互模式，用户可以灵活地执行各种 GATT 相关的操作。